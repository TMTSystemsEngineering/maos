<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>maos-1.2.0: maos/ahst.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="/home/lianqiw/work/programming/aos/doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">maos-1.2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ahst_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">maos/ahst.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains functions to setup NGS modes and reconstructor using AHST for one or two DMs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#ab6cb5ccefc3b866bb7e62960db5c35a2">ngsmod_nmod</a> (int ndm, double hs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute number of ahst modes from number of DMs.  <a href="#ab6cb5ccefc3b866bb7e62960db5c35a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#aab5201cf34340713bc531225efb97d19">ngsmod_mcc</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper, const double *wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">computes the cross-coupling of NGS modes in science field.  <a href="#aab5201cf34340713bc531225efb97d19"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structspcell.html">spcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a93a5f84318748435a67e0d7d3c4b228e">ngsmod_Wa</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper, int use_ploc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute NGS mode aperture weighting using science field.  <a href="#a93a5f84318748435a67e0d7d3c4b228e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a7851621262fbc9e1d6bc1019c61bb139">ngsmod_Pngs_Wa</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper, int use_ploc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">compute NGS mode removal Pngs from LGS commands using aperture weighting.  <a href="#a7851621262fbc9e1d6bc1019c61bb139"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#ae3113f442d824e6b7ffcc6ffe4d16361">ngsmod_Ptt_Wa</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper, int use_ploc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">compute tip/tilt mode removal from each DM commands using aperture weighting.  <a href="#ae3113f442d824e6b7ffcc6ffe4d16361"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#ad785d41e2aa4c2b2d4be48f52d4b37c3">ngsmod_m</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">DM modes for all the low order modes.  <a href="#ad785d41e2aa4c2b2d4be48f52d4b37c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a7e3cbb7965f524ef7ab5c63a90466abd">ngsmod_hm_accphi</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute NGS modes Ha*M in the science directon using ray tracing.  <a href="#a7e3cbb7965f524ef7ab5c63a90466abd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdcell.html">dcell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#af38907f48ddcb69345df2d5ef6ecc615">ngsmod_hm_ana</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute NGS modes Ha*M in the science directon using analytic formula.  <a href="#af38907f48ddcb69345df2d5ef6ecc615"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a55c65679c193d90bc7f5175ebb17733f">setup_ngsmod</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structRECON__T.html">RECON_T</a> *recon, <a class="el" href="structAPER__T.html">APER_T</a> *aper, <a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setup NGS modes and reconstructor using AHST for one or two DMs.  <a href="#a55c65679c193d90bc7f5175ebb17733f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#abad45266bd29e9426cdbb40322c78c38">calc_ngsmod_dot</a> (double *pttr_out, double *pttrcoeff_out, double *ngsmod_out, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, const <a class="el" href="structRECON__T.html">RECON_T</a> *recon, const <a class="el" href="structAPER__T.html">APER_T</a> *aper, const double *opd, int ievl)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">used in performance evaluation on science opds.  <a href="#abad45266bd29e9426cdbb40322c78c38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a3d2a474cd4a6fcebb9e1ff8f26855353">ngsmod2dm</a> (<a class="el" href="structdcell.html">dcell</a> **dmc, const <a class="el" href="structRECON__T.html">RECON_T</a> *recon, const <a class="el" href="structdcell.html">dcell</a> *M, double gain)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert NGS modes to DM actuator commands using analytical expression.  <a href="#a3d2a474cd4a6fcebb9e1ff8f26855353"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#ad6fba8d936260040166a309c4679fa08">ngsmod2science</a> (<a class="el" href="structdmat.html">dmat</a> *iopdevl, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, const <a class="el" href="structRECON__T.html">RECON_T</a> *recon, const <a class="el" href="structAPER__T.html">APER_T</a> *aper, const double *mod, int ievl, double alpha)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert NGS mode vector to aperture grid for science directions.  <a href="#ad6fba8d936260040166a309c4679fa08"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#a36f0c7d4ea59dd8f46e209691e5e6d8a">remove_dm_ngsmod</a> (<a class="el" href="structSIM__T.html">SIM_T</a> *simu, <a class="el" href="structdcell.html">dcell</a> *dmerr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">remove NGS modes from LGS DM commands if ahst_wt==1 Rngs*GA*dmerr is zero if ahst_wt==2 Doesn't perturb NGS modes in science direction.  <a href="#a36f0c7d4ea59dd8f46e209691e5e6d8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ahst_8c.html#aca3081102037e19a19003a2728b52073">remove_dm_tt</a> (<a class="el" href="structSIM__T.html">SIM_T</a> *simu, <a class="el" href="structdcell.html">dcell</a> *dmerr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removal tip/tilt on invidual DMs.  <a href="#aca3081102037e19a19003a2728b52073"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Contains functions to setup NGS modes and reconstructor using AHST for one or two DMs. </p>
<p>Use parms-&gt;wfsr instead of parms-&gt;wfs for wfs information, which hands GLAO mode correctly. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab6cb5ccefc3b866bb7e62960db5c35a2"></a><!-- doxytag: member="ahst.c::ngsmod_nmod" ref="ab6cb5ccefc3b866bb7e62960db5c35a2" args="(int ndm, double hs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="ahst_8c.html#ab6cb5ccefc3b866bb7e62960db5c35a2">ngsmod_nmod</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>hs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute number of ahst modes from number of DMs. </p>

</div>
</div>
<a class="anchor" id="aab5201cf34340713bc531225efb97d19"></a><!-- doxytag: member="ahst.c::ngsmod_mcc" ref="aab5201cf34340713bc531225efb97d19" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper, const double *wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#aab5201cf34340713bc531225efb97d19">ngsmod_mcc</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>wt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>computes the cross-coupling of NGS modes in science field. </p>
<p>MCC=(M'*Ha'*W*Ha*M) where M is ngsmod on DM, Ha is propagator from DM to science. W is weighting in science. </p>

</div>
</div>
<a class="anchor" id="a93a5f84318748435a67e0d7d3c4b228e"></a><!-- doxytag: member="ahst.c::ngsmod_Wa" ref="a93a5f84318748435a67e0d7d3c4b228e" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper, int use_ploc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structspcell.html">spcell</a>* <a class="el" href="ahst_8c.html#a93a5f84318748435a67e0d7d3c4b228e">ngsmod_Wa</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_ploc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute NGS mode aperture weighting using science field. </p>
<p>Wa=Ha'*W*Ha where Ha is from ALOC to PLOCS and W is the amplitude weighting in PLOCS when use_ploc==0. Otherwise, Ha is from ALOC to PLOC and W is the amplitude weighting in PLOC. </p>

</div>
</div>
<a class="anchor" id="a7851621262fbc9e1d6bc1019c61bb139"></a><!-- doxytag: member="ahst.c::ngsmod_Pngs_Wa" ref="a7851621262fbc9e1d6bc1019c61bb139" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper, int use_ploc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#a7851621262fbc9e1d6bc1019c61bb139">ngsmod_Pngs_Wa</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_ploc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>compute NGS mode removal Pngs from LGS commands using aperture weighting. </p>
<p>Pngs=(MCC)^-1 (Hm'*W*Ha).</p>
<p>2012-05-25: The NGS mode removal should be based on old five modes even if now focus on PS1 is merged with defocus mode </p>

</div>
</div>
<a class="anchor" id="ae3113f442d824e6b7ffcc6ffe4d16361"></a><!-- doxytag: member="ahst.c::ngsmod_Ptt_Wa" ref="ae3113f442d824e6b7ffcc6ffe4d16361" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper, int use_ploc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#ae3113f442d824e6b7ffcc6ffe4d16361">ngsmod_Ptt_Wa</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_ploc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>compute tip/tilt mode removal from each DM commands using aperture weighting. </p>
<p>Ptt=(MCC_TT)^-1 *(Hmtt * W * Ha) </p>

</div>
</div>
<a class="anchor" id="ad785d41e2aa4c2b2d4be48f52d4b37c3"></a><!-- doxytag: member="ahst.c::ngsmod_m" ref="ad785d41e2aa4c2b2d4be48f52d4b37c3" args="(const PARMS_T *parms, RECON_T *recon)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#ad785d41e2aa4c2b2d4be48f52d4b37c3">ngsmod_m</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>DM modes for all the low order modes. </p>

</div>
</div>
<a class="anchor" id="a7e3cbb7965f524ef7ab5c63a90466abd"></a><!-- doxytag: member="ahst.c::ngsmod_hm_accphi" ref="a7e3cbb7965f524ef7ab5c63a90466abd" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#a7e3cbb7965f524ef7ab5c63a90466abd">ngsmod_hm_accphi</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute NGS modes Ha*M in the science directon using ray tracing. </p>
<p>Not used </p>

</div>
</div>
<a class="anchor" id="af38907f48ddcb69345df2d5ef6ecc615"></a><!-- doxytag: member="ahst.c::ngsmod_hm_ana" ref="af38907f48ddcb69345df2d5ef6ecc615" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdcell.html">dcell</a>* <a class="el" href="ahst_8c.html#af38907f48ddcb69345df2d5ef6ecc615">ngsmod_hm_ana</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute NGS modes Ha*M in the science directon using analytic formula. </p>
<p>Not used </p>

</div>
</div>
<a class="anchor" id="a55c65679c193d90bc7f5175ebb17733f"></a><!-- doxytag: member="ahst.c::setup_ngsmod" ref="a55c65679c193d90bc7f5175ebb17733f" args="(const PARMS_T *parms, RECON_T *recon, APER_T *aper, POWFS_T *powfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#a55c65679c193d90bc7f5175ebb17733f">setup_ngsmod</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup NGS modes and reconstructor using AHST for one or two DMs. </p>

</div>
</div>
<a class="anchor" id="abad45266bd29e9426cdbb40322c78c38"></a><!-- doxytag: member="ahst.c::calc_ngsmod_dot" ref="abad45266bd29e9426cdbb40322c78c38" args="(double *pttr_out, double *pttrcoeff_out, double *ngsmod_out, const PARMS_T *parms, const RECON_T *recon, const APER_T *aper, const double *opd, int ievl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#abad45266bd29e9426cdbb40322c78c38">calc_ngsmod_dot</a> </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pttr_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pttrcoeff_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>ngsmod_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>opd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ievl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>used in performance evaluation on science opds. </p>
<p>accumulate to out </p>

</div>
</div>
<a class="anchor" id="a3d2a474cd4a6fcebb9e1ff8f26855353"></a><!-- doxytag: member="ahst.c::ngsmod2dm" ref="a3d2a474cd4a6fcebb9e1ff8f26855353" args="(dcell **dmc, const RECON_T *recon, const dcell *M, double gain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#a3d2a474cd4a6fcebb9e1ff8f26855353">ngsmod2dm</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdcell.html">dcell</a> **&#160;</td>
          <td class="paramname"><em>dmc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdcell.html">dcell</a> *&#160;</td>
          <td class="paramname"><em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert NGS modes to DM actuator commands using analytical expression. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>switch to use mode vectors </dd></dl>

</div>
</div>
<a class="anchor" id="ad6fba8d936260040166a309c4679fa08"></a><!-- doxytag: member="ahst.c::ngsmod2science" ref="ad6fba8d936260040166a309c4679fa08" args="(dmat *iopdevl, const PARMS_T *parms, const RECON_T *recon, const APER_T *aper, const double *mod, int ievl, double alpha)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#ad6fba8d936260040166a309c4679fa08">ngsmod2science</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>iopdevl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structRECON__T.html">RECON_T</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ievl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>alpha</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert NGS mode vector to aperture grid for science directions. </p>

</div>
</div>
<a class="anchor" id="a36f0c7d4ea59dd8f46e209691e5e6d8a"></a><!-- doxytag: member="ahst.c::remove_dm_ngsmod" ref="a36f0c7d4ea59dd8f46e209691e5e6d8a" args="(SIM_T *simu, dcell *dmerr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#a36f0c7d4ea59dd8f46e209691e5e6d8a">remove_dm_ngsmod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM__T.html">SIM_T</a> *&#160;</td>
          <td class="paramname"><em>simu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdcell.html">dcell</a> *&#160;</td>
          <td class="paramname"><em>dmerr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove NGS modes from LGS DM commands if ahst_wt==1 Rngs*GA*dmerr is zero if ahst_wt==2 Doesn't perturb NGS modes in science direction. </p>

</div>
</div>
<a class="anchor" id="aca3081102037e19a19003a2728b52073"></a><!-- doxytag: member="ahst.c::remove_dm_tt" ref="aca3081102037e19a19003a2728b52073" args="(SIM_T *simu, dcell *dmerr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ahst_8c.html#aca3081102037e19a19003a2728b52073">remove_dm_tt</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM__T.html">SIM_T</a> *&#160;</td>
          <td class="paramname"><em>simu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdcell.html">dcell</a> *&#160;</td>
          <td class="paramname"><em>dmerr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removal tip/tilt on invidual DMs. </p>
<p>Be careful about the roll off near the edge. </p>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ahst_8c.html">ahst.c</a>      </li>

    <li class="footer">Generated on Tue Aug 14 2012 09:47:57 for maos-1.2.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
