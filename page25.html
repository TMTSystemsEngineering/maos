<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Multi-threaded Adaptive Optics Simulator: Running simulations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi-threaded Adaptive Optics Simulator
   </div>
   <div id="projectbrief">A Fast End to End Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page25.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Running simulations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sect-run"></a>
Introduction</h1>
<p>We assume that maos is already in the PATH so we can type "maos" to launch it.</p>
<p>Use the following command to get the help message: </p>
<pre class="fragment">maos -h  #will print the help message and exit.
</pre><p>If maos is launched without any parameters, it will use default.conf which contains the baseline NFIRAOS configuration nfiraos.conf. Users can change the content of default.conf to include another file to make that the default option. The valid command line arguments are listed as follows</p>
<pre class="fragment">maos   # Run the default configuration of NFIRAOS: nfiaros.conf as the baseline.
maos -c scao_ngs.conf -s 2 -n 2 -d -o scao_ngs override.conf chol.conf
# Run a single conjugate natural guide star case, with seed 2, 2 threads
# detach from the terminal and output results to folder scao_ngs
# and read in overriding parameters stored in override.conf and chol.conf

Options: 
-h, --help        to print out this message
-d, --detach      to detach from terminal and run in background
-f, --force       force starting simulation without scheduler
-n, --nthread=N   Use N threads, default is 1
-s, --seed=N      Use seed N instead of the numbers specified in .conf files
-o, --output=DIR  output the results to DIR.
-c, --conf=FILE.conf
Use FILE.conf as the baseline config instead of nfiraos.conf
-p, --path=dir    Add dir to the internal PATH
-P, --pause       paulse simulation in the end of every time step
-g, --gpu=i       Use the i'th gpu. 0 for the first. -1 to disable. default: automatic
-G, --ngpu=N'     Use a total of N gpus.
-r, --run=host    Run the job in another host.</pre><p>Beside this, key=value pairs, as found in the configuration files, can be supplied in command line to override default values. Please be aware that such options that appear later will override those that appear earlier if the key is the same.</p>
<h1><a class="anchor" id="sect-exe"></a>
Examples</h1>
<p>With a 10 meter outer diameter, 1 meter inner diameter annular telescope, an order 20x20 system, the following shows how to run each AO mode:</p>
<ul>
<li>LGS MCAO</li>
</ul>
<pre class="fragment">maos aper.d=[10 1] dm.order=[20 20] -o lgsmcao20
</pre><ul>
<li>NGS MCAO</li>
</ul>
<pre class="fragment">maos -cmcao_ngs.conf aper.d=[10 1] dm.order=[20 20] -o ngsmcao20
</pre><ul>
<li>NGS SCAO</li>
</ul>
<pre class="fragment">maos -cscao_ngs.conf aper.d=[10 1] dm.order=[20 20] -o ngsscao20 
</pre><ul>
<li>LGS SCAO</li>
</ul>
<pre class="fragment">maos -cscao_lgs.conf aper.d=[10 1] dm.order=[20 20] -o lgsscao20 
</pre><ul>
<li>LGS GLAO</li>
</ul>
<pre class="fragment">maos dm_single.conf aper.d=[10 1] dm.order=[20] wfs_lgs_only.conf recon.glao=1 -o lgsglao20
</pre><h1><a class="anchor" id="sect-details"></a>
Details</h1>
<p>This section describes how to change simulation detailed parameters. The configurations can be combined to make multiple changes in a single run.</p>
<ul>
<li>Change turbulence</li>
</ul>
<p>Override keys listed in <code>config/maos/atm_mk13n50p.conf</code></p>
<p>E.g., change r0 at zenith to 0.1m</p>
<p><code>maos atm.r0z=0.1</code></p>
<ul>
<li>Change zenith angle to 30 degrees</li>
</ul>
<p><code>maos sim.zadeg=30</code></p>
<ul>
<li>Use noise free wfs</li>
</ul>
<p><code>maos powfs.noisy=[0]</code></p>
<ul>
<li>Use geometric wfs (sense wavefront directly) instead of physical optics wfs</li>
</ul>
<p><code>maos powfs.phystep=[-1]</code></p>
<p>Adjust the number of elements depending on how many powfs is in use. A powfs is a type of WFS. Each type can have multiple WFS.</p>
<ul>
<li>Change gain of the main integrator to 0.3</li>
</ul>
<p><code>maos sim.epdm=0.3</code></p>
<p>See <a class="el" href="page30.html">Simulation Parameters</a> for further explanation.</p>
<p>See <a class="el" href="page40.html">Simulation Results</a> for result interpretation. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
