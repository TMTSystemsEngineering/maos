
##Parameters that seldom change

#skyc.ngsgrid = 20  #NGS grid. relocated to maos.conf
skyc.ngsalign= 0   #align ngs to grids to avoid interpolation.
skyc.keepout = 2   #in arcsec. probe keep out range.
skyc.patfov  = 120 #patrol field in arcsec.
skyc.minrad  = 0   #minimum radius of the stars (keep out of center science region)
skyc.npowfs  = 2   #number of powfs. 2. TTF and TT
#The following is per powfs
skyc.nwfsmax = [1 2] #max 1 TTF, 2 TT
skyc.pixguard= [12 12] #guard window size 12 for TTF and TT
skyc.pixblur = [0.3 0.3] #bluring. Turned on 2012/08/21
skyc.pixoffx = [0 0] #Offset of detector image from vertex. in unit of pixel
skyc.pixoffy = [0 0]
skyc.start   = 0   #starting sky field.
skyc.nsky    = 500 #max number of sky field.
skyc.rne     = -1  #-1: measured freq dependent rne. >=0: use literarily. 
skyc.excess  = 1   #excess photon  noise factor.
skyc.evlstart= 2498 #time step to start doing performace evluation (inclusive);
skyc.phystart= 1249 #time step to start physical optics simulation. leading ztilt to help converging/acquisition.
skyc.neaaniso = 1 #count grad variance in stored PSF as additional NEA
skyc.neanonlin= 1 
#The following is per wvl.

#skyc.dtrats  = [50 40 32 25 20 16 14 12 11 10 9 8 5 4 2 1]
skyc.dtrats   = [40 32 20 16 14 12 10 9 8 6 4 2 1]
skyc.dtrats_mr= [64 32 16 8 4 2 1] 
skyc.snrmin_mr= [ 3  3 3  4 4 5 6]  #minimum snr to select each dtrats_mr. balances servo lag error vs noise propagation
skyc.snrmin   = 3 #minimum snr to keep a star
skyc.mtchcr  = 0 #1: constraint matched filter.
skyc.mtchfft = 1 #1: use FFT for derivative.
skyc.servo   = 2 #1: simple integrator with 0.5 gain. 2: type II. -1: LQG
skyc.gsplit  = 1 #Separate gain for each mode.
skyc.psd_ws  = "PSD/PSD_TMT_WindShake20mas_m2.bin" #Telscope Windshake PSD

skyc.maxstar = 10 #maximum number of (brightest) stars for each star field.

#For debugging and testing
skyc.psd_scale = 0 #scane NGS, TT, PS PSD to match CL error. 0 is good
skyc.limitnstep= 0 # 5000
skyc.stars     = #"frame_6.bin" #a cell array of nskyx1, each cell contains (2+nwvl) x nstar array of location, and magnitudes
skyc.verbose   = 0 #be verbose for debugging
skyc.dbg       = 0 #save debugging information
skyc.dbgsky    = -1 #do a specific sky frame only
skyc.dbgaster  = -1 #do a specific asterism only.
skyc.keeporder = 0 #1: Keep order of stars as input is skyc.star
skyc.interpg   = 1 #nonzero: Interpolate gain based in dtrat and signan
skyc.save      = 0 #save for MAOS to run integrated simulations.
skyc.noisy     = 1
skyc.maxaster  = 5 #was 4#maximum number of asterisms to try for each star field. 5 is good.
skyc.maxdtrat  = 5 #was 4#maximum number of dtrats to try for each asterism.

#skyc.reest     = 1 #reestimate the error after gain estimation.
#Frequent changed variables.
#skyc.nthread  = 1   #number of threads
skyc.pixtheta  = [0.012 0.006] #arcsec (20180220)# was [0.011344575 0.0056722875] 
skyc.lat       = 90  #location of star field. Galatic latitude
skyc.lon       = 0 #galactic longitude.
skyc.catscl    = 1   #scale the catlog star count. 
skyc.phytype   = 1 #Type of pixel processing. 1: mtch, 2: cog, 3: correlation
skyc.ttfbrightest = 0 #1: make ttf always the brightest
skyc.seed      = 1 #seed for generating asterism and random numbers
skyc.bspstrehl = 1 #do bicubic spline interpolation on strehl. 1 is good.
skyc.addws     = 1 #add wind shake time series to mideal. -1: auto
skyc.imperrnmb = 0 #Implementation error slopt in nm:
		   #imperrnm(theta)=sqrt(imperrnm^2+imperrnmb^2*theta^2). The
		   #location in fov, theta, is normalized by patfov/2
skyc.pmargin   = 0.785398163397448 #PI/4
skyc.psdcalc   = 1 #calculate PSD from input time series.


skyc.fnpsf1= [] #psf of star. NULL for point source.
skyc.sdetmax=10 #max time sepearation for sde covariance fitting. 0 for PSD fitting.

skyc.multirate=1  #Each OIWFS can run at different dtrat (not ready)
skyc.usephygrad=1 #Use physical optics grad instead of ztilt
skyc.navg=1       #Number of simulations to average
skyc.estimate=0  #Estiamte performance only, without time domain simulation


#The following are per wavelength (J, H, K-short are defined)
#Last updated on 2021-12-09
skyc.zb.wvl=[1.25e-6 1.65e-6 2.2e-6] #wavelength
skyc.zb.Z = [3.22e9 2.82e9 1.51e9 ]	#Zero magnitude flux (#photon/s/m^2) 
skyc.zb.B = [16.2 13.9 14.9] 		#Sky background (magnidue per arcsec^2)
skyc.zb.qe= [0.7 0.7 0.7] 			#detector QE
skyc.zb.thruput=[0.529 0.541 0.508] #telescope + NFIRAOS + OIWFS
skyc.zb.excessbkgrnd=[0 0 0.569] 	#extrace background from optics as a ratio to sky bkgrnd