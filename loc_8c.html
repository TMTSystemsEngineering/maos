<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>maos-0.7.1: lib/loc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lib/loc.c File Reference</h1>This file defines functions relates to <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a>, <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>, <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a>, etc.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#a7b39637e20709c2f21454a43dd1f227">ptsfree_do</a> (<a class="el" href="structpts__t.html">pts_t</a> *pts)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a> data.  <a href="#a7b39637e20709c2f21454a43dd1f227"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#701ca5faa8c797d59e11b4155b10eede">locstatfree_do</a> (<a class="el" href="structlocstat__t.html">locstat_t</a> *locstat)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structlocstat__t.html" title="Stores array of locstatcol_t.">locstat_t</a> data.  <a href="#701ca5faa8c797d59e11b4155b10eede"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#51fe49fb09ca33713b0abd3c62fb4915">loc_free_map</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the MAP in <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>.  <a href="#51fe49fb09ca33713b0abd3c62fb4915"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#a53d0ffe413fe5002244699bfb7d641b">locfree_do</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> data.  <a href="#a53d0ffe413fe5002244699bfb7d641b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#09a53c4553b6b5edea84a81470d530df">locarrfree_do</a> (<a class="el" href="structloc__t.html">loc_t</a> **loc, int nloc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> array.  <a href="#09a53c4553b6b5edea84a81470d530df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#596dac8689b3758e2673fb6394a46414">sqmapfree_do</a> (<a class="el" href="structmap__t.html">map_t</a> *map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a> data.  <a href="#596dac8689b3758e2673fb6394a46414"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#532b0d27373357b7a9becc3078d1f6cf">sqmaparrfree_do</a> (<a class="el" href="structmap__t.html">map_t</a> **map, int nmap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a> array.  <a href="#532b0d27373357b7a9becc3078d1f6cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#df5da4d010d013a15fd7be07e2d2c1bb">rectmapfree_do</a> (<a class="el" href="structrectmap__t.html">rectmap_t</a> *map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free <a class="el" href="structrectmap__t.html" title="Map with different x/y sampling.">rectmap_t</a> data.  <a href="#df5da4d010d013a15fd7be07e2d2c1bb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#ab9c873b7d8e5fb9ad226440b5401d84">loc_create_embed</a> (int *nembed, const <a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an vector to embed OPD into square array for FFT purpose.  <a href="#ab9c873b7d8e5fb9ad226440b5401d84"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#e3b2280ea7b47be6321e96d02a1f2f9e">loc_create_map</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a map for loc with padding of 1.  <a href="#e3b2280ea7b47be6321e96d02a1f2f9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#d968301c40fe0d7b5619e8467a71ba43">loc_create_map_npad</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, int npad)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a map for loc so that we can obtain the index in loc by x,y coordinate.  <a href="#d968301c40fe0d7b5619e8467a71ba43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#c87fc54d21197d660ebb42129a71874b">sqmap2loc</a> (<a class="el" href="structmap__t.html">map_t</a> *amp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">convert a sqmap to a loc object.  <a href="#c87fc54d21197d660ebb42129a71874b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#d3986a863d3218b5d0c387b0e9a54d55">sqmap2embed</a> (<a class="el" href="structmap__t.html">map_t</a> *amp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an index array can put embed opd defined in loc from map2loc into a square array of size nx*ny.  <a href="#d3986a863d3218b5d0c387b0e9a54d55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#f6e165d34697abe953aa2b08aa3ecf75">map2loc</a> (double dx, long nx, long ny, double ox, double oy, double *map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a map to a loc that collects all positive entries.  <a href="#f6e165d34697abe953aa2b08aa3ecf75"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#926631dc34bd81fb61bd5700b1f71f38">map2embed</a> (long nx, long ny, double *map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an index array that can be used to embed opd defined in loc from map2loc into a square array of size nx*ny.  <a href="#926631dc34bd81fb61bd5700b1f71f38"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#9c33adabbaa1b953c570eecc6ecb5bc4">mk1dloc_vec</a> (double *x, long nx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create 1 dimensional loc with given vector.  <a href="#9c33adabbaa1b953c570eecc6ecb5bc4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#4f2a4c729eb6264e05d8c1179b4226f9">mk1dloc</a> (double x0, double dx, long nx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create 1 dimensional loc with origin at x0, sampling of dx, and nx numbers.  <a href="#4f2a4c729eb6264e05d8c1179b4226f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#e3c8ed8e16d223414bbd4132752252a6">mksqloc_map</a> (<a class="el" href="structmap__t.html">map_t</a> *map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a loc array that covers the <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a>.  <a href="#e3c8ed8e16d223414bbd4132752252a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#56a881e95fbc17b041c1054e6d73c185">mksqloc_auto</a> (long nx, long ny, double dx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a loc array of size nx*ny at sampling dx with origin at (nx/2, ny/2).  <a href="#56a881e95fbc17b041c1054e6d73c185"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#908b73cad7f5c79f288098460680691f">mksqloc</a> (long nx, long ny, double dx, double ox, double oy)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a loc array contains coorindates in a square map of size nx*ny, with sampling dx, and at origin ox,oy.  <a href="#908b73cad7f5c79f288098460680691f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#75054dbe25069830b00722acba51db07">mksqlocrot</a> (long nx, long ny, double dx, double ox, double oy, double theta)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">like mksqloc, but roated theta CCW.  <a href="#75054dbe25069830b00722acba51db07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#b8e1a32ce8c88b3595214e9d50e3ecf1">mkcirloc</a> (double dcir, double dx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create rough circular grid, within diameter of dcir.  <a href="#b8e1a32ce8c88b3595214e9d50e3ecf1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#c7f14244184dca15b65de064d22ead63">mkcirloc_amp</a> (double **ampout, <a class="el" href="structlocstat__t.html">locstat_t</a> *cstat, <a class="el" href="structmap__t.html">map_t</a> *ampin, double dcir, double dx, int cropamp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create LOC map when amplitude map is specified, within a maximum diameter.  <a href="#c7f14244184dca15b65de064d22ead63"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#719d0e9537dc1a7904b79ded9114c9dc">loccenter</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the point that closes to origin (0,0) in loc.  <a href="#719d0e9537dc1a7904b79ded9114c9dc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdmat.html">dmat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#c68b764561e8b6fb72a5fba2846987ab">loc_mcc_ptt</a> (const <a class="el" href="structloc__t.html">loc_t</a> *loc, const double *amp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">assemble modes of piston/tip/tilt into Nx3 matrix M, and compute their inverse covariance matrix.  <a href="#c68b764561e8b6fb72a5fba2846987ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdcell.html">dcell</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#63e86597be21bbacacaa223ef87c1489">pts_mcc_ptt</a> (const <a class="el" href="structpts__t.html">pts_t</a> *pts, const double *amp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">same as loc_mcc_ptt, except using pts instead of loc.  <a href="#63e86597be21bbacacaa223ef87c1489"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#9ebc205d6343dbc9f73357c26cf6ff88">loc_calc_ptt</a> (double *rmsout, double *coeffout, const <a class="el" href="structloc__t.html">loc_t</a> *loc, const double ipcc, const <a class="el" href="structdmat.html">dmat</a> *imcc, const double *amp, const double *opd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">evaluate piston/tip-tilt/ removed wavefront error.  <a href="#9ebc205d6343dbc9f73357c26cf6ff88"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#25a57790666a0892bea66a3781f58801">loc_calc_mod</a> (double *rmsout, double *coeffout, const <a class="el" href="structdmat.html">dmat</a> *mod, const double *amp, double *opd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate variance of OPD in modes defined in mod.  <a href="#25a57790666a0892bea66a3781f58801"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#b1e416804268cba258c31ad4b017d2bd">loc_remove_ptt</a> (double *opd, const double *ptt, const <a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove Piston/Tip/Tilt (in radian) from OPD.  <a href="#b1e416804268cba258c31ad4b017d2bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#43b690f19e294542434f1c9ff5f1c501">loc_add_ptt</a> (double *opd, const double *ptt, const <a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add Piston/Tip/Tilt from OPD.  <a href="#43b690f19e294542434f1c9ff5f1c501"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#a98996c84135fcb903513f21de5472df">pts_ztilt</a> (double *out, const <a class="el" href="structpts__t.html">pts_t</a> *pts, const <a class="el" href="structdcell.html">dcell</a> *imcc, const double *amp, const double *opd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute zernike best fit for all subapertures.  <a href="#a98996c84135fcb903513f21de5472df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structlocstat__t.html">locstat_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#bb839d3a9deca3f83c8cb3026c89d437">mklocstat</a> (const <a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gather information about the starting of each column in loc.  <a href="#bb839d3a9deca3f83c8cb3026c89d437"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#c744d2a40bf5ff11ea78d26eff7b0ede">loccircle</a> (double *phi, <a class="el" href="structloc__t.html">loc_t</a> *loc, double cx, double cy, double r, double val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a gray pixel circular map in phi using coordinates defined in loc, center defined using cx, cy, radius of r, and value of val.  <a href="#c744d2a40bf5ff11ea78d26eff7b0ede"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#446e5c2b1df43113645cd4b5251e6ec2">locellipse</a> (double *phi, <a class="el" href="structloc__t.html">loc_t</a> *loc, double cx, double cy, double rx, double ry, double val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a gray pixel elliptical map in phi using coordinates defined in loc, center defined using cx, cy, radii of rx, ry, and value of val.  <a href="#446e5c2b1df43113645cd4b5251e6ec2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#5baa8770b09d3cf98a44e98b3e38e716">loc_reduce_spcell</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, <a class="el" href="structspcell.html">spcell</a> *spc, int dim, int cont)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove uncoupled points in loc.  <a href="#5baa8770b09d3cf98a44e98b3e38e716"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#ce526a66d1e3f71d9585bc75a48edee1">loc_reduce_sp</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, <a class="el" href="structdsp.html">dsp</a> *sp, int dim, int cont)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove uncoupled points in loc.  <a href="#ce526a66d1e3f71d9585bc75a48edee1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#6600ccaf94a37957f2ba14014d352851">genRnm</a> (<a class="el" href="structdmat.html">dmat</a> *locr, int ir, int im)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generating Zernike Rnm for radial order ir, azimuthal or im.  <a href="#6600ccaf94a37957f2ba14014d352851"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdmat.html">dmat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#14466c5904613f07573321891c54a2c1">loc_zernike</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, double R, int nr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create Zernike modes on loc with radius R and radial order upto nr nr=0 is piston nr=1 is tip/tilt nr=2 is quadratic modes.  <a href="#14466c5904613f07573321891c54a2c1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#97ddd2f3a4448e5394197a69d88dfe86">loc_add_focus</a> (double *opd, <a class="el" href="structloc__t.html">loc_t</a> *loc, double val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add val amount of focus to opd.  <a href="#97ddd2f3a4448e5394197a69d88dfe86"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdmat.html">dmat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#2802210958b6877d9ee6eb7198b8b35e">loc2mat</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, int piston)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a <a class="el" href="structdmat.html" title="a double matrix object contains 2-d array of double numbers">dmat</a> containing locx and locy in two columns.  <a href="#2802210958b6877d9ee6eb7198b8b35e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#4d528e34a7d8b4e5e3d034480db6a2de">pts2loc</a> (<a class="el" href="structpts__t.html">pts_t</a> *pts)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a> to <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>.  <a href="#4d528e34a7d8b4e5e3d034480db6a2de"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#b69c225c64ec68bf802f11586f5e6d79">locrot</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, const double theta)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotate the coordinates by theta CCW.  <a href="#b69c225c64ec68bf802f11586f5e6d79"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#2cde9c71833ed0c72f04e868f343b508">locdup</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">duplicate a <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> object;  <a href="#2cde9c71833ed0c72f04e868f343b508"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#abd0897e648f8c80b1162517bddff4ff">loctransform</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, <a class="el" href="structdmat.html">dmat</a> **coeff)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transform coordinate.  <a href="#abd0897e648f8c80b1162517bddff4ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="loc_8c.html#661df971a3fe89b0c20a4f9b81772f33">loc_nxny</a> (long *nx, long *ny, const <a class="el" href="structloc__t.html">loc_t</a> *loc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the size of a map that is used to build loc or can fully contain loc (embed).  <a href="#661df971a3fe89b0c20a4f9b81772f33"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file defines functions relates to <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a>, <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>, <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a>, etc. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7b39637e20709c2f21454a43dd1f227"></a><!-- doxytag: member="loc.c::ptsfree_do" ref="a7b39637e20709c2f21454a43dd1f227" args="(pts_t *pts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptsfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpts__t.html">pts_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pts</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a> data. 
<p>

</div>
</div><p>
<a class="anchor" name="701ca5faa8c797d59e11b4155b10eede"></a><!-- doxytag: member="loc.c::locstatfree_do" ref="701ca5faa8c797d59e11b4155b10eede" args="(locstat_t *locstat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void locstatfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlocstat__t.html">locstat_t</a> *&nbsp;</td>
          <td class="paramname"> <em>locstat</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structlocstat__t.html" title="Stores array of locstatcol_t.">locstat_t</a> data. 
<p>

</div>
</div><p>
<a class="anchor" name="51fe49fb09ca33713b0abd3c62fb4915"></a><!-- doxytag: member="loc.c::loc_free_map" ref="51fe49fb09ca33713b0abd3c62fb4915" args="(loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_free_map           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free the MAP in <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="a53d0ffe413fe5002244699bfb7d641b"></a><!-- doxytag: member="loc.c::locfree_do" ref="a53d0ffe413fe5002244699bfb7d641b" args="(loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void locfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> data. 
<p>

</div>
</div><p>
<a class="anchor" name="09a53c4553b6b5edea84a81470d530df"></a><!-- doxytag: member="loc.c::locarrfree_do" ref="09a53c4553b6b5edea84a81470d530df" args="(loc_t **loc, int nloc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void locarrfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> **&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nloc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> array. 
<p>

</div>
</div><p>
<a class="anchor" name="596dac8689b3758e2673fb6394a46414"></a><!-- doxytag: member="loc.c::sqmapfree_do" ref="596dac8689b3758e2673fb6394a46414" args="(map_t *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sqmapfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&nbsp;</td>
          <td class="paramname"> <em>map</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a> data. 
<p>

</div>
</div><p>
<a class="anchor" name="532b0d27373357b7a9becc3078d1f6cf"></a><!-- doxytag: member="loc.c::sqmaparrfree_do" ref="532b0d27373357b7a9becc3078d1f6cf" args="(map_t **map, int nmap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sqmaparrfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> **&nbsp;</td>
          <td class="paramname"> <em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nmap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a> array. 
<p>

</div>
</div><p>
<a class="anchor" name="df5da4d010d013a15fd7be07e2d2c1bb"></a><!-- doxytag: member="loc.c::rectmapfree_do" ref="df5da4d010d013a15fd7be07e2d2c1bb" args="(rectmap_t *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rectmapfree_do           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrectmap__t.html">rectmap_t</a> *&nbsp;</td>
          <td class="paramname"> <em>map</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free <a class="el" href="structrectmap__t.html" title="Map with different x/y sampling.">rectmap_t</a> data. 
<p>

</div>
</div><p>
<a class="anchor" name="ab9c873b7d8e5fb9ad226440b5401d84"></a><!-- doxytag: member="loc.c::loc_create_embed" ref="ab9c873b7d8e5fb9ad226440b5401d84" args="(int *nembed, const loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* loc_create_embed           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nembed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an vector to embed OPD into square array for FFT purpose. 
<p>

</div>
</div><p>
<a class="anchor" name="e3b2280ea7b47be6321e96d02a1f2f9e"></a><!-- doxytag: member="loc.c::loc_create_map" ref="e3b2280ea7b47be6321e96d02a1f2f9e" args="(loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_create_map           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a map for loc with padding of 1. 
<p>

</div>
</div><p>
<a class="anchor" name="d968301c40fe0d7b5619e8467a71ba43"></a><!-- doxytag: member="loc.c::loc_create_map_npad" ref="d968301c40fe0d7b5619e8467a71ba43" args="(loc_t *loc, int npad)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_create_map_npad           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>npad</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a map for loc so that we can obtain the index in loc by x,y coordinate. 
<p>
Useful in ray tracing (<a class="el" href="accphi_8c.html" title="Contains ray tracing routines optimized for different input/output formats.">accphi.c</a>) 
</div>
</div><p>
<a class="anchor" name="c87fc54d21197d660ebb42129a71874b"></a><!-- doxytag: member="loc.c::sqmap2loc" ref="c87fc54d21197d660ebb42129a71874b" args="(map_t *amp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* sqmap2loc           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&nbsp;</td>
          <td class="paramname"> <em>amp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
convert a sqmap to a loc object. 
<p>
only positive numbers are converted. 
</div>
</div><p>
<a class="anchor" name="d3986a863d3218b5d0c387b0e9a54d55"></a><!-- doxytag: member="loc.c::sqmap2embed" ref="d3986a863d3218b5d0c387b0e9a54d55" args="(map_t *amp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long* sqmap2embed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&nbsp;</td>
          <td class="paramname"> <em>amp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an index array can put embed opd defined in loc from map2loc into a square array of size nx*ny. 
<p>

</div>
</div><p>
<a class="anchor" name="f6e165d34697abe953aa2b08aa3ecf75"></a><!-- doxytag: member="loc.c::map2loc" ref="f6e165d34697abe953aa2b08aa3ecf75" args="(double dx, long nx, long ny, double ox, double oy, double *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* map2loc           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>ox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>oy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>map</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a map to a loc that collects all positive entries. 
<p>

</div>
</div><p>
<a class="anchor" name="926631dc34bd81fb61bd5700b1f71f38"></a><!-- doxytag: member="loc.c::map2embed" ref="926631dc34bd81fb61bd5700b1f71f38" args="(long nx, long ny, double *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long* map2embed           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>map</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an index array that can be used to embed opd defined in loc from map2loc into a square array of size nx*ny. 
<p>

</div>
</div><p>
<a class="anchor" name="9c33adabbaa1b953c570eecc6ecb5bc4"></a><!-- doxytag: member="loc.c::mk1dloc_vec" ref="9c33adabbaa1b953c570eecc6ecb5bc4" args="(double *x, long nx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mk1dloc_vec           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create 1 dimensional loc with given vector. 
<p>

</div>
</div><p>
<a class="anchor" name="4f2a4c729eb6264e05d8c1179b4226f9"></a><!-- doxytag: member="loc.c::mk1dloc" ref="4f2a4c729eb6264e05d8c1179b4226f9" args="(double x0, double dx, long nx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mk1dloc           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create 1 dimensional loc with origin at x0, sampling of dx, and nx numbers. 
<p>

</div>
</div><p>
<a class="anchor" name="e3c8ed8e16d223414bbd4132752252a6"></a><!-- doxytag: member="loc.c::mksqloc_map" ref="e3c8ed8e16d223414bbd4132752252a6" args="(map_t *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mksqloc_map           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&nbsp;</td>
          <td class="paramname"> <em>map</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a loc array that covers the <a class="el" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a>. 
<p>
Notice that it is different from sqmap2loc which only covers valid (value&gt;0) regions. 
</div>
</div><p>
<a class="anchor" name="56a881e95fbc17b041c1054e6d73c185"></a><!-- doxytag: member="loc.c::mksqloc_auto" ref="56a881e95fbc17b041c1054e6d73c185" args="(long nx, long ny, double dx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mksqloc_auto           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a loc array of size nx*ny at sampling dx with origin at (nx/2, ny/2). 
<p>

</div>
</div><p>
<a class="anchor" name="908b73cad7f5c79f288098460680691f"></a><!-- doxytag: member="loc.c::mksqloc" ref="908b73cad7f5c79f288098460680691f" args="(long nx, long ny, double dx, double ox, double oy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mksqloc           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>ox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>oy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a loc array contains coorindates in a square map of size nx*ny, with sampling dx, and at origin ox,oy. 
<p>

</div>
</div><p>
<a class="anchor" name="75054dbe25069830b00722acba51db07"></a><!-- doxytag: member="loc.c::mksqlocrot" ref="75054dbe25069830b00722acba51db07" args="(long nx, long ny, double dx, double ox, double oy, double theta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mksqlocrot           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>ox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>oy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>theta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
like mksqloc, but roated theta CCW. 
<p>
Useful in creating the pixel coordinates in a polar coordinate CCD. 
</div>
</div><p>
<a class="anchor" name="b8e1a32ce8c88b3595214e9d50e3ecf1"></a><!-- doxytag: member="loc.c::mkcirloc" ref="b8e1a32ce8c88b3595214e9d50e3ecf1" args="(double dcir, double dx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mkcirloc           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dcir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create rough circular grid, within diameter of dcir. 
<p>
Not used often. 
</div>
</div><p>
<a class="anchor" name="c7f14244184dca15b65de064d22ead63"></a><!-- doxytag: member="loc.c::mkcirloc_amp" ref="c7f14244184dca15b65de064d22ead63" args="(double **ampout, locstat_t *cstat, map_t *ampin, double dcir, double dx, int cropamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* mkcirloc_amp           </td>
          <td>(</td>
          <td class="paramtype">double **&nbsp;</td>
          <td class="paramname"> <em>ampout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlocstat__t.html">locstat_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cstat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ampin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dcir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cropamp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create LOC map when amplitude map is specified, within a maximum diameter. 
<p>
The amplitude map must be defined in the same sampling of dx.<p>
<ul>
<li>cropmap=0: LOC is purely defined by the amplitude map. dcir is irrelevant in this case.</li><li>cropmap=1: LOC is forced to be within dcir. ampin is cropped.</li></ul>
<p>
cstat records the starting point for each row to speed up accphi. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>ampout</em>&nbsp;</td><td>amplitude map defined on loc </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>cstat</em>&nbsp;</td><td>statistics on loc </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>ampin</em>&nbsp;</td><td>the amplitude that defines the circular aperture, modified to widhtin dtel if cropmap=1 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dcir</em>&nbsp;</td><td>maximum diameter of the circular loc </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dx</em>&nbsp;</td><td>sampling of output loc </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cropamp</em>&nbsp;</td><td>do we zero ampin points if it outside of dcir </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="719d0e9537dc1a7904b79ded9114c9dc"></a><!-- doxytag: member="loc.c::loccenter" ref="719d0e9537dc1a7904b79ded9114c9dc" args="(loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int loccenter           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the point that closes to origin (0,0) in loc. 
<p>
Useful in single point piston constraint in creating reconstructor. 
</div>
</div><p>
<a class="anchor" name="c68b764561e8b6fb72a5fba2846987ab"></a><!-- doxytag: member="loc.c::loc_mcc_ptt" ref="c68b764561e8b6fb72a5fba2846987ab" args="(const loc_t *loc, const double *amp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdmat.html">dmat</a>* loc_mcc_ptt           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>amp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
assemble modes of piston/tip/tilt into Nx3 matrix M, and compute their inverse covariance matrix. 
<p>
mcc=M'*(amp.*M) 
</div>
</div><p>
<a class="anchor" name="63e86597be21bbacacaa223ef87c1489"></a><!-- doxytag: member="loc.c::pts_mcc_ptt" ref="63e86597be21bbacacaa223ef87c1489" args="(const pts_t *pts, const double *amp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdcell.html">dcell</a>* pts_mcc_ptt           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpts__t.html">pts_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>amp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
same as loc_mcc_ptt, except using pts instead of loc. 
<p>
this is used to build imcc for TT/F powfs ztilt imcc 
</div>
</div><p>
<a class="anchor" name="9ebc205d6343dbc9f73357c26cf6ff88"></a><!-- doxytag: member="loc.c::loc_calc_ptt" ref="9ebc205d6343dbc9f73357c26cf6ff88" args="(double *rmsout, double *coeffout, const loc_t *loc, const double ipcc, const dmat *imcc, const double *amp, const double *opd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_calc_ptt           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>rmsout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>coeffout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>ipcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>imcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>amp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>opd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
evaluate piston/tip-tilt/ removed wavefront error. 
<p>
output coeffout in unit of radian like units. 
</div>
</div><p>
<a class="anchor" name="25a57790666a0892bea66a3781f58801"></a><!-- doxytag: member="loc.c::loc_calc_mod" ref="25a57790666a0892bea66a3781f58801" args="(double *rmsout, double *coeffout, const dmat *mod, const double *amp, double *opd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_calc_mod           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>rmsout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>coeffout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>amp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>opd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculate variance of OPD in modes defined in mod. 
<p>
Notice the difference in rmsout for loc_calc_ptt and this loc_calc_mode. in loc_calc_ptt, out[0] is PR, out[1] is TT, out[2] is PTTR in loc_calc_mod, out[0] is PR, out[1] is PTR, out[2] is PTTR, etc<p>
The mod is already orth-noramlized so that we have the following simple forms.<p>
coeffout is in unit of zernike! 
</div>
</div><p>
<a class="anchor" name="b1e416804268cba258c31ad4b017d2bd"></a><!-- doxytag: member="loc.c::loc_remove_ptt" ref="b1e416804268cba258c31ad4b017d2bd" args="(double *opd, const double *ptt, const loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_remove_ptt           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>opd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>ptt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove Piston/Tip/Tilt (in radian) from OPD. 
<p>

</div>
</div><p>
<a class="anchor" name="43b690f19e294542434f1c9ff5f1c501"></a><!-- doxytag: member="loc.c::loc_add_ptt" ref="43b690f19e294542434f1c9ff5f1c501" args="(double *opd, const double *ptt, const loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_add_ptt           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>opd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>ptt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add Piston/Tip/Tilt from OPD. 
<p>

</div>
</div><p>
<a class="anchor" name="a98996c84135fcb903513f21de5472df"></a><!-- doxytag: member="loc.c::pts_ztilt" ref="a98996c84135fcb903513f21de5472df" args="(double *out, const pts_t *pts, const dcell *imcc, const double *amp, const double *opd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pts_ztilt           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpts__t.html">pts_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdcell.html">dcell</a> *&nbsp;</td>
          <td class="paramname"> <em>imcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>amp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>opd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute zernike best fit for all subapertures. 
<p>
add result to out. returns radians not zernike modes of tip/tilt. Used in wfsgrad 
</div>
</div><p>
<a class="anchor" name="bb839d3a9deca3f83c8cb3026c89d437"></a><!-- doxytag: member="loc.c::mklocstat" ref="bb839d3a9deca3f83c8cb3026c89d437" args="(const loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlocstat__t.html">locstat_t</a>* mklocstat           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gather information about the starting of each column in loc. 
<p>

</div>
</div><p>
<a class="anchor" name="c744d2a40bf5ff11ea78d26eff7b0ede"></a><!-- doxytag: member="loc.c::loccircle" ref="c744d2a40bf5ff11ea78d26eff7b0ede" args="(double *phi, loc_t *loc, double cx, double cy, double r, double val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loccircle           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>phi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a gray pixel circular map in phi using coordinates defined in loc, center defined using cx, cy, radius of r, and value of val. 
<p>

</div>
</div><p>
<a class="anchor" name="446e5c2b1df43113645cd4b5251e6ec2"></a><!-- doxytag: member="loc.c::locellipse" ref="446e5c2b1df43113645cd4b5251e6ec2" args="(double *phi, loc_t *loc, double cx, double cy, double rx, double ry, double val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void locellipse           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>phi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>ry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a gray pixel elliptical map in phi using coordinates defined in loc, center defined using cx, cy, radii of rx, ry, and value of val. 
<p>

</div>
</div><p>
<a class="anchor" name="5baa8770b09d3cf98a44e98b3e38e716"></a><!-- doxytag: member="loc.c::loc_reduce_spcell" ref="5baa8770b09d3cf98a44e98b3e38e716" args="(loc_t *loc, spcell *spc, int dim, int cont)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_reduce_spcell           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structspcell.html">spcell</a> *&nbsp;</td>
          <td class="paramname"> <em>spc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cont</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove uncoupled points in loc. 
<p>
debugged on 2009-12-20. Not used often. using a <a class="el" href="structspcell.html" title="an 2-d array of sparse.">spcell</a>, to compute the coupling which is modified accordingly. 
</div>
</div><p>
<a class="anchor" name="ce526a66d1e3f71d9585bc75a48edee1"></a><!-- doxytag: member="loc.c::loc_reduce_sp" ref="ce526a66d1e3f71d9585bc75a48edee1" args="(loc_t *loc, dsp *sp, int dim, int cont)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_reduce_sp           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdsp.html">dsp</a> *&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cont</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove uncoupled points in loc. 
<p>
debugged on 2009-12-20. use single sparse matrix, which is modified accordingly. 
</div>
</div><p>
<a class="anchor" name="6600ccaf94a37957f2ba14014d352851"></a><!-- doxytag: member="loc.c::genRnm" ref="6600ccaf94a37957f2ba14014d352851" args="(dmat *locr, int ir, int im)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdmat.html">dmat</a>* genRnm           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>locr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>im</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generating Zernike Rnm for radial order ir, azimuthal or im. 
<p>
used by loc_zernike. 
</div>
</div><p>
<a class="anchor" name="14466c5904613f07573321891c54a2c1"></a><!-- doxytag: member="loc.c::loc_zernike" ref="14466c5904613f07573321891c54a2c1" args="(loc_t *loc, double R, int nr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdmat.html">dmat</a>* loc_zernike           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create Zernike modes on loc with radius R and radial order upto nr nr=0 is piston nr=1 is tip/tilt nr=2 is quadratic modes. 
<p>

</div>
</div><p>
<a class="anchor" name="97ddd2f3a4448e5394197a69d88dfe86"></a><!-- doxytag: member="loc.c::loc_add_focus" ref="97ddd2f3a4448e5394197a69d88dfe86" args="(double *opd, loc_t *loc, double val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_add_focus           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>opd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add val amount of focus to opd. 
<p>
The unit is in radian like. Piston is not removed. 
</div>
</div><p>
<a class="anchor" name="2802210958b6877d9ee6eb7198b8b35e"></a><!-- doxytag: member="loc.c::loc2mat" ref="2802210958b6877d9ee6eb7198b8b35e" args="(loc_t *loc, int piston)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdmat.html">dmat</a>* loc2mat           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>piston</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a <a class="el" href="structdmat.html" title="a double matrix object contains 2-d array of double numbers">dmat</a> containing locx and locy in two columns. 
<p>

</div>
</div><p>
<a class="anchor" name="4d528e34a7d8b4e5e3d034480db6a2de"></a><!-- doxytag: member="loc.c::pts2loc" ref="4d528e34a7d8b4e5e3d034480db6a2de" args="(pts_t *pts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* pts2loc           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpts__t.html">pts_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pts</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert <a class="el" href="structpts__t.html" title="low left point of each subaperture.">pts_t</a> to <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a>. 
<p>
Each entry in pts recors the lower left point in each subaperture. 
</div>
</div><p>
<a class="anchor" name="b69c225c64ec68bf802f11586f5e6d79"></a><!-- doxytag: member="loc.c::locrot" ref="b69c225c64ec68bf802f11586f5e6d79" args="(loc_t *loc, const double theta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void locrot           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>theta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotate the coordinates by theta CCW. 
<p>

</div>
</div><p>
<a class="anchor" name="2cde9c71833ed0c72f04e868f343b508"></a><!-- doxytag: member="loc.c::locdup" ref="2cde9c71833ed0c72f04e868f343b508" args="(loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* locdup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
duplicate a <a class="el" href="structloc__t.html" title="Struct for loc like plocs, xloc, aloc etc.">loc_t</a> object; 
<p>

</div>
</div><p>
<a class="anchor" name="abd0897e648f8c80b1162517bddff4ff"></a><!-- doxytag: member="loc.c::loctransform" ref="abd0897e648f8c80b1162517bddff4ff" args="(loc_t *loc, dmat **coeff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structloc__t.html">loc_t</a>* loctransform           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> **&nbsp;</td>
          <td class="paramname"> <em>coeff</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Transform coordinate. 
<p>
loc contains x,y; locm contains xm, ym. xm{ip}=sum}_{ic}(coeff[0](1,ic)*pow(x,coeff[0](2,ic))*pow(y,coeff[0](3,ic))) ym{ip}=sum}_{ic}(coeff[1](1,ic)*pow(x,coeff[1](2,ic))*pow(y,coeff[1](3,ic))) 
</div>
</div><p>
<a class="anchor" name="661df971a3fe89b0c20a4f9b81772f33"></a><!-- doxytag: member="loc.c::loc_nxny" ref="661df971a3fe89b0c20a4f9b81772f33" args="(long *nx, long *ny, const loc_t *loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loc_nxny           </td>
          <td>(</td>
          <td class="paramtype">long *&nbsp;</td>
          <td class="paramname"> <em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&nbsp;</td>
          <td class="paramname"> <em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structloc__t.html">loc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the size of a map that is used to build loc or can fully contain loc (embed). 
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 3 13:02:52 2010 for maos-0.7.1 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
