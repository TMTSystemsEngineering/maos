<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>maos-1.2.0: maos/setup_powfs.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="/home/lianqiw/work/programming/aos/doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">maos-1.2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('maos_2setup__powfs_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">maos/setup_powfs.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Setting up WFS geometry.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2f2638a878b96a88d02c346d003a0fa"></a><!-- doxytag: member="maos/setup_powfs.c::TEST_POWFS" ref="ae2f2638a878b96a88d02c346d003a0fa" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TEST_POWFS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a842527a136b91be0cc8be0227965c46d"></a><!-- doxytag: member="maos/setup_powfs.c::MOVES" ref="a842527a136b91be0cc8be0227965c46d" args="(p, i, j)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOVES</b>(p, i, j)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa9063fe00998d7318532dfd17a1481e6"></a><!-- doxytag: member="maos/setup_powfs.c::MOVED" ref="aa9063fe00998d7318532dfd17a1481e6" args="(p, n, i, j)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOVED</b>(p, n, i, j)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6db5161a453f8fbe57398d46ae247f8"></a><!-- doxytag: member="maos/setup_powfs.c::MOVEPTS" ref="af6db5161a453f8fbe57398d46ae247f8" args="(pts, count, isa)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOVEPTS</b>(pts, count, isa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acaa17ea7a8318a0f7a543e6ea60f86a4"></a><!-- doxytag: member="maos/setup_powfs.c::MOVELOC" ref="acaa17ea7a8318a0f7a543e6ea60f86a4" args="(loc, count, isa)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOVELOC</b>(loc, count, isa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d9be42cebc599186be09cd74636e746"></a><!-- doxytag: member="maos/setup_powfs.c::MOVEDLOC" ref="a3d9be42cebc599186be09cd74636e746" args="(loc, nxsa, count, isa)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOVEDLOC</b>(loc, nxsa, count, isa)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#af500bd9800a3b3f47a36b855a9f88ae9">free_powfs_geom</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the powfs geometric parameters.  <a href="#af500bd9800a3b3f47a36b855a9f88ae9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdmat.html">dmat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a5f48c23ede245553b05e9bb42b335d93">wfsamp2saa</a> (<a class="el" href="structdmat.html">dmat</a> *wfsamp, long nxsa)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert amplitude map of subapertures to normalized subaperture area.  <a href="#a5f48c23ede245553b05e9bb42b335d93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdmat.html">dmat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a516d29b0a6799fc55f07562bf55059d8">mkwfsamp</a> (<a class="el" href="structloc__t.html">loc_t</a> *loc, <a class="el" href="structmap__t.html">map_t</a> *ampground, double misregx, double misregy, double D, double Din)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create WFS amplitude map from coordinate, masked with annular defined by (D,Din).  <a href="#a516d29b0a6799fc55f07562bf55059d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a45091e8a3495393326547d1c9ac09f41">wfspupmask</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structloc__t.html">loc_t</a> *loc, <a class="el" href="structdmat.html">dmat</a> *amp, double misreg[2], int iwfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setting up subaperture geometry.  <a href="#a45091e8a3495393326547d1c9ac09f41"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a77b6fd986d6105964adf2c844ee9df87"></a><!-- doxytag: member="maos/setup_powfs.c::setup_powfs_geom" ref="a77b6fd986d6105964adf2c844ee9df87" args="(POWFS_T *powfs, const PARMS_T *parms, APER_T *aper, int ipowfs)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>setup_powfs_geom</b> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structAPER__T.html">APER_T</a> *aper, int ipowfs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ae92ae33f8f650cb9c7975044bd82432f">setup_powfs_grad</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creating geometric wavefront gradient operator GS0 and ZA0 from WFS OPD to subaperture grads.  <a href="#ae92ae33f8f650cb9c7975044bd82432f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ab1409e69dddf8131559ea35731109bda">setup_powfs_prep_phy</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the parameters for physical optics setup.  <a href="#ab1409e69dddf8131559ea35731109bda"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a2589e29c8b5c4bd05b33da3638e8ae53">setup_powfs_ncpa</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up NCPA maps for each WFS.  <a href="#a2589e29c8b5c4bd05b33da3638e8ae53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a692825f333d5738b213e2d6d4f1ab5d5">free_powfs_dtf</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the detector transfer function.  <a href="#a692825f333d5738b213e2d6d4f1ab5d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ab1890fbc6facc2013338054962b1398a">setup_powfs_dtf</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting up Detector transfer function used to translate PSFs from FFTs to detector pixel images.  <a href="#ab1890fbc6facc2013338054962b1398a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a7bbae2bc69e06f553d55c7c2d8c68ff3">setup_powfs_focus</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setup the range to sodium layer as an additional parameter.  <a href="#a7bbae2bc69e06f553d55c7c2d8c68ff3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ae2eab1b8ad97f659e38afe630140834e">setup_powfs_sodium</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load and smooth out sodium profile.  <a href="#ae2eab1b8ad97f659e38afe630140834e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#abd59ad37c2a3372a70066e4b5cf34ac1">setup_powfs_etf</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs, int mode, int istep)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute Elongation Transfer function.  <a href="#abd59ad37c2a3372a70066e4b5cf34ac1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#aa8ee626a374ebefb84c2d560793c4c1e">setup_powfs_llt</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setting up uplink pts/amp lotf  <a href="#aa8ee626a374ebefb84c2d560793c4c1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38aad1ba60413494dbd0a53f61f3fb6f"></a><!-- doxytag: member="maos/setup_powfs.c::cog_nea" ref="a38aad1ba60413494dbd0a53f61f3fb6f" args="(double *nea, dmat *ints, double cogthres, double cogoff, int ntry, rand_t *rstat, double bkgrnd, double bkgrndc, double *bkgrnd2i, double *bkgrnd2ic, double rne)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>cog_nea</b> (double *nea, <a class="el" href="structdmat.html">dmat</a> *ints, double cogthres, double cogoff, int ntry, <a class="el" href="structmt__state.html">rand_t</a> *rstat, double bkgrnd, double bkgrndc, double *bkgrnd2i, double *bkgrnd2ic, double rne)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adecde92a5275b55c35b79747ff1a0d73"></a><!-- doxytag: member="maos/setup_powfs.c::cogfun" ref="adecde92a5275b55c35b79747ff1a0d73" args="(double *x, cogdata_t *info)" -->
static double&#160;</td><td class="memItemRight" valign="bottom"><b>cogfun</b> (double *x, cogdata_t *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a73a4e883843481bf61e73bebf4a00958">setup_powfs_cog</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup CoG gradient offset for simulation and NEA for reconstruction.  <a href="#a73a4e883843481bf61e73bebf4a00958"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ad7450a59aa11dce99fa3ce0ea02b1d84">setup_powfs_phy</a> (<a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs, const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, int ipowfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the matched filter pixel processing parameters for physical optics wfs.  <a href="#ad7450a59aa11dce99fa3ce0ea02b1d84"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#ac7b704504acb96d7fbcbdd60f15c6cf8">setup_powfs</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structAPER__T.html">APER_T</a> *aper)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the powfs struct based on parms and aper.  <a href="#ac7b704504acb96d7fbcbdd60f15c6cf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="maos_2setup__powfs_8c.html#a4fdd29141f0d60af1fd7c6b2385f0031">free_powfs</a> (const <a class="el" href="structPARMS__T.html">PARMS_T</a> *parms, <a class="el" href="structPOWFS__T.html">POWFS_T</a> *powfs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all parameters of powfs at the end of simulation.  <a href="#a4fdd29141f0d60af1fd7c6b2385f0031"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Setting up WFS geometry. </p>
<p>like the subaperture location, subaperture grid points, physical optics detection transfer function, LGS elongation transfer function, etc.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>isolate DTF, ETF, routines, make then generic interface and relocate to the lib folder.</dd></dl>
<p>Do not use sparse interpolation to replace ray tracing for fine sampled destination grid, especially cubic splines. The interpolation marix takes too much space. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="af500bd9800a3b3f47a36b855a9f88ae9"></a><!-- doxytag: member="setup_powfs.c::free_powfs_geom" ref="af500bd9800a3b3f47a36b855a9f88ae9" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#af500bd9800a3b3f47a36b855a9f88ae9">free_powfs_geom</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free the powfs geometric parameters. </p>

</div>
</div>
<a class="anchor" id="a5f48c23ede245553b05e9bb42b335d93"></a><!-- doxytag: member="setup_powfs.c::wfsamp2saa" ref="a5f48c23ede245553b05e9bb42b335d93" args="(dmat *wfsamp, long nxsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdmat.html">dmat</a>* <a class="el" href="maos_2setup__powfs_8c.html#a5f48c23ede245553b05e9bb42b335d93">wfsamp2saa</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>wfsamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nxsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert amplitude map of subapertures to normalized subaperture area. </p>
<p>Used only in setup_powfs_geom </p>

</div>
</div>
<a class="anchor" id="a516d29b0a6799fc55f07562bf55059d8"></a><!-- doxytag: member="setup_powfs.c::mkwfsamp" ref="a516d29b0a6799fc55f07562bf55059d8" args="(loc_t *loc, map_t *ampground, double misregx, double misregy, double D, double Din)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdmat.html">dmat</a>* <a class="el" href="maos_2setup__powfs_8c.html#a516d29b0a6799fc55f07562bf55059d8">mkwfsamp</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmap__t.html">map_t</a> *&#160;</td>
          <td class="paramname"><em>ampground</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>misregx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>misregy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Din</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create WFS amplitude map from coordinate, masked with annular defined by (D,Din). </p>

</div>
</div>
<a class="anchor" id="a45091e8a3495393326547d1c9ac09f41"></a><!-- doxytag: member="setup_powfs.c::wfspupmask" ref="a45091e8a3495393326547d1c9ac09f41" args="(const PARMS_T *parms, loc_t *loc, dmat *amp, double misreg[2], int iwfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#a45091e8a3495393326547d1c9ac09f41">wfspupmask</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structloc__t.html">loc_t</a> *&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>amp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>misreg</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iwfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setting up subaperture geometry. </p>
<ul>
<li>powfs-&gt;pts: the location of the lower left grid coordinate in this subaperture &gt;=saloc.</li>
</ul>
<ul>
<li>powfs-&gt;saloc: the lower left corner of the subaperture</li>
</ul>
<ul>
<li>powfs-&gt;loc: the x,y coordinates of all the points, ordered acoording to subaperture.</li>
</ul>
<p>2011-02-11: In the matched filter and geometric gradient computation, the amplitude should use the real (misregistered) amplitude map. The geometric optics operator should just the normal loc but misregistered amplitude map (on locm). The subaperture selector should, however, use assumed amp (non-misregistered). </p>

</div>
</div>
<a class="anchor" id="ae92ae33f8f650cb9c7975044bd82432f"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_grad" ref="ae92ae33f8f650cb9c7975044bd82432f" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#ae92ae33f8f650cb9c7975044bd82432f">setup_powfs_grad</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creating geometric wavefront gradient operator GS0 and ZA0 from WFS OPD to subaperture grads. </p>
<p>Use loc, and ampm. Do not locm. locm is only used to do ray tracing. </p>

</div>
</div>
<a class="anchor" id="ab1409e69dddf8131559ea35731109bda"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_prep_phy" ref="ab1409e69dddf8131559ea35731109bda" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#ab1409e69dddf8131559ea35731109bda">setup_powfs_prep_phy</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prepare the parameters for physical optics setup. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>Make LGS number of pixels depend on subapertue elongation in radial coordinate CCD mode. Make ncompx, ncompy dependent on number of pixels for radial ccd.</dd></dl>

</div>
</div>
<a class="anchor" id="a2589e29c8b5c4bd05b33da3638e8ae53"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_ncpa" ref="a2589e29c8b5c4bd05b33da3638e8ae53" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#a2589e29c8b5c4bd05b33da3638e8ae53">setup_powfs_ncpa</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up NCPA maps for each WFS. </p>
<p>Load NCPA maps and ray trace to grid of loc </p>

</div>
</div>
<a class="anchor" id="a692825f333d5738b213e2d6d4f1ab5d5"></a><!-- doxytag: member="setup_powfs.c::free_powfs_dtf" ref="a692825f333d5738b213e2d6d4f1ab5d5" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#a692825f333d5738b213e2d6d4f1ab5d5">free_powfs_dtf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free the detector transfer function. </p>

</div>
</div>
<a class="anchor" id="ab1890fbc6facc2013338054962b1398a"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_dtf" ref="ab1890fbc6facc2013338054962b1398a" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="skyc_2setup__powfs_8c.html#a6e9ea05733a2e89ae27d5e629222c5eb">setup_powfs_dtf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setting up Detector transfer function used to translate PSFs from FFTs to detector pixel images. </p>
<p>Integration over pixel size and leaking between pixels are considered.</p>
<p>We are going to sample the PSF <img class="formulaInl" alt="$\phi(\theta)$" src="form_24.png"/> onto detectors. For a detector pixel <img class="formulaInl" alt="$i$" src="form_25.png"/> at <img class="formulaInl" alt="$\theta_{i}$" src="form_26.png"/>, oriented along angle <img class="formulaInl" alt="$\alpha$" src="form_27.png"/>, we have </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ I(\theta_{i})=\int\textrm{d}\theta\phi(\theta)S(\theta-\theta_{i})=\int\textrm{d}\theta\phi(\theta-\theta_{i})S(\theta)\]" src="form_28.png"/>
</p>
<p> where <img class="formulaInl" alt="$S(\theta)$" src="form_29.png"/> is the pixel weighting function. Rewrite the equation in Fourier domain,</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} I(\theta_{i}) &amp; = &amp; \int\textrm{d}\theta\int\textrm{d} u\hat{\phi}(u)e^{2\pi i(\theta-\theta_{i})u}S(\theta)\\ &amp; = &amp; \int\textrm{d} u\hat{\phi}(u)\hat{S}(-u)e^{2\pi i\theta_{i}u}\\ &amp; = &amp; \mathcal{F}^{-1}[\hat{\phi}(u)\hat{S}(-u)](\theta_{i})\end{eqnarray*}" src="form_30.png"/>
</p>
<p>For a polar coordinate CCD with pixel edges alonging , we have</p>
<p>The detector pixels can be modeled as a square, convolved with a Gaussian to model the pixel blurring (charge leaking) </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ S(\theta)=S^{\prime}(\theta_{ra})=\sqcap(\theta_{r}/\Delta)\sqcap(\theta_{a}/\Delta)*\frac{1}{2\pi \theta_b^2}\exp(-\frac{\theta_r^2+\theta_u^2}{2\theta_b^2}) \]" src="form_31.png"/>
</p>
<p>, where <img class="formulaInl" alt="$R$" src="form_32.png"/> is the rotation matrix and <img class="formulaInl" alt="$\theta_{ra}=R^{T}\theta$" src="form_33.png"/> is the coordinate in the local radial-azimuthal coordinate system for a Polar coordinate CCD, <img class="formulaInl" alt="$\theta_b$" src="form_34.png"/> is a measure of the blurring of the pixel. For a pixel aligned along <img class="formulaInl" alt="$x/y$" src="form_35.png"/> directions, <img class="formulaInl" alt="$R$" src="form_32.png"/> is simply identity.</p>
<p>The Fourier transform of the detector pixel function <img class="formulaInl" alt="$S(\theta)$" src="form_29.png"/> is then</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \hat{S}(u) &amp; = &amp; \int\textrm{d}\theta S(\theta)e^{-2\pi i\theta^{T}u}\\ &amp; = &amp; \int\textrm{d}\theta S^{\prime}(R^{T}\theta)e^{-2\pi i\theta^{T}u}\\ &amp; = &amp;\int\textrm{d}(R^{T}\theta)S^{\prime}(R^{T}\theta)e^{-2\pi i(R^{T}\theta)^{T}(R^{T}u)}\\ &amp; = &amp; \hat{S^{\prime}}(R^{T}u)\end{eqnarray*}" src="form_36.png"/>
</p>
<p>The Fourier transform of <img class="formulaInl" alt="$\hat{S^{\prime}}$" src="form_37.png"/> is </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \hat{S^{\prime}}(u_{ra})=\Delta^{2}\textrm{sinc}(u_{r}\Delta)\textrm{sinc}(u_{\theta}\Delta) \exp[-2\pi^2\theta_b^2(u_r^2+u_a^2)] \]" src="form_38.png"/>
</p>
<p>Finally, we have </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ I(\theta_{i})=\mathcal{F}^{-1}[\hat{\phi}(u)\Delta^{2}\textrm{sinc}(\Delta(u_{x}\cos\theta+u_{y}\sin\theta))\textrm{sinc}(\Delta(-u_{x}\sin\theta+u_{y}\cos\theta))\exp[-2\pi^2\theta_b^2(u_r^2+u_a^2)](\theta_{i})\]" src="form_39.png"/>
</p>
<p> the last <img class="formulaInl" alt="$\theta_{i}$" src="form_26.png"/> means evaluate the function at <img class="formulaInl" alt="$\theta_{i}$" src="form_26.png"/> by interpolation. When there is leaking between actuators. We can multiply the sinc functions with a Gaussian blurring function. </p>

</div>
</div>
<a class="anchor" id="a7bbae2bc69e06f553d55c7c2d8c68ff3"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_focus" ref="a7bbae2bc69e06f553d55c7c2d8c68ff3" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#a7bbae2bc69e06f553d55c7c2d8c68ff3">setup_powfs_focus</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup the range to sodium layer as an additional parameter. </p>

</div>
</div>
<a class="anchor" id="ae2eab1b8ad97f659e38afe630140834e"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_sodium" ref="ae2eab1b8ad97f659e38afe630140834e" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#ae2eab1b8ad97f659e38afe630140834e">setup_powfs_sodium</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load and smooth out sodium profile. </p>
<p>We preserve the sum of the sodium profile, which represents a scaling factor of the signal level. </p>

</div>
</div>
<a class="anchor" id="abd59ad37c2a3372a70066e4b5cf34ac1"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_etf" ref="abd59ad37c2a3372a70066e4b5cf34ac1" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs, int mode, int istep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="maos_2setup__powfs_8c.html#abd59ad37c2a3372a70066e4b5cf34ac1">setup_powfs_etf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>istep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute Elongation Transfer function. </p>
<ul>
<li>mode=0: for preparation.</li>
<li>mode=1: for simulation. </li>
</ul>

</div>
</div>
<a class="anchor" id="aa8ee626a374ebefb84c2d560793c4c1e"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_llt" ref="aa8ee626a374ebefb84c2d560793c4c1e" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#aa8ee626a374ebefb84c2d560793c4c1e">setup_powfs_llt</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setting up uplink pts/amp lotf </p>

</div>
</div>
<a class="anchor" id="a73a4e883843481bf61e73bebf4a00958"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_cog" ref="a73a4e883843481bf61e73bebf4a00958" args="(const PARMS_T *parms, POWFS_T *powfs, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#a73a4e883843481bf61e73bebf4a00958">setup_powfs_cog</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup CoG gradient offset for simulation and NEA for reconstruction. </p>

</div>
</div>
<a class="anchor" id="ad7450a59aa11dce99fa3ce0ea02b1d84"></a><!-- doxytag: member="setup_powfs.c::setup_powfs_phy" ref="ad7450a59aa11dce99fa3ce0ea02b1d84" args="(POWFS_T *powfs, const PARMS_T *parms, int ipowfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="maos_2setup__powfs_8c.html#ad7450a59aa11dce99fa3ce0ea02b1d84">setup_powfs_phy</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ipowfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup the matched filter pixel processing parameters for physical optics wfs. </p>

</div>
</div>
<a class="anchor" id="ac7b704504acb96d7fbcbdd60f15c6cf8"></a><!-- doxytag: member="setup_powfs.c::setup_powfs" ref="ac7b704504acb96d7fbcbdd60f15c6cf8" args="(const PARMS_T *parms, APER_T *aper)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPOWFS__T.html">POWFS_T</a>* <a class="el" href="skyc_2setup__powfs_8c.html#a9fd5284932263fee238a4f1bcf8f78d1">setup_powfs</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAPER__T.html">APER_T</a> *&#160;</td>
          <td class="paramname"><em>aper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup the powfs struct based on parms and aper. </p>
<p>Everything about wfs are setup here. </p>

</div>
</div>
<a class="anchor" id="a4fdd29141f0d60af1fd7c6b2385f0031"></a><!-- doxytag: member="setup_powfs.c::free_powfs" ref="a4fdd29141f0d60af1fd7c6b2385f0031" args="(const PARMS_T *parms, POWFS_T *powfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="skyc_2setup__powfs_8c.html#a81c84b70d9bcb9f0e5f104289fff4bf8">free_powfs</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPARMS__T.html">PARMS_T</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__T.html">POWFS_T</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free all parameters of powfs at the end of simulation. </p>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="maos_2setup__powfs_8c.html">setup_powfs.c</a>      </li>

    <li class="footer">Generated on Tue Aug 14 2012 09:47:57 for maos-1.2.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
