<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>maos-0.7.1: skyc/setup_aster.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>skyc/setup_aster.c File Reference</h1>Routines to handle asterisms.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#d3fa807794f44992a3e1a8b7dc0edd00">comb_select</a> (long n, long k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes the number of possibilities of selection k items from n items <img class="formulaInl" alt="$C_n^k$" src="form_66.png">.  <a href="#d3fa807794f44992a3e1a8b7dc0edd00"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#76b6d28cf50738ecd9851d4b11c61664">comb_init</a> (long k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize an initial combination composed a vector of non-negative numbers 0,1,2,.  <a href="#76b6d28cf50738ecd9851d4b11c61664"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#0d8127a25ae2043c9c54d8d7f3115466">comb_next</a> (int *comb, long n, long k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the next combination.  <a href="#0d8127a25ae2043c9c54d8d7f3115466"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#775e19b8c2c52a6258c7d943de3d4303">setup_aster_comb</a> (int *naster, int nstar, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create combination of stars to form asterism.  <a href="#775e19b8c2c52a6258c7d943de3d4303"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#50dc7d12cb4690e99dab343b7cf7eec9">setup_aster_g</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structSTAR__S.html">STAR_S</a> *star, <a class="el" href="structPOWFS__S.html">POWFS_S</a> *powfs, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute Modal to gradient operator by copying from the stars.  <a href="#50dc7d12cb4690e99dab343b7cf7eec9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#c5f2ea45439c6fe0dbb79f5fcbb51890">setup_aster_copystar</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structSTAR__S.html">STAR_S</a> *star, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy information from star struct <a class="el" href="structSTAR__S.html" title="Data for each available star.">STAR_S</a> to stars in asterism <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>.  <a href="#c5f2ea45439c6fe0dbb79f5fcbb51890"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#0af703f2bfcb475b2480f5946ed8a44f">setup_aster_wvf</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structSTAR__S.html">STAR_S</a> *star, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy time history of complex pupil function from <a class="el" href="structSTAR__S.html" title="Data for each available star.">STAR_S</a> to <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>.  <a href="#0af703f2bfcb475b2480f5946ed8a44f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#75bc43c46e3cc71b9f1492f3929183ff">calc_recon_error</a> (const <a class="el" href="structdmat.html">dmat</a> *pgm, const <a class="el" href="structdmat.html">dmat</a> *ineam, const <a class="el" href="structdmat.html">dmat</a> *mcc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Estimate wavefront error propagated from measurement error.  <a href="#75bc43c46e3cc71b9f1492f3929183ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#15fffb6defdd36b2a2f7d3c00efaed62">setup_aster_recon</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structSTAR__S.html">STAR_S</a> *star, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup the reconstructor for each <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>.  <a href="#15fffb6defdd36b2a2f7d3c00efaed62"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#8a20d80d33c6adceb86f8a76d1c76cf0">setup_aster_servo</a> (<a class="el" href="structSIM__S.html">SIM_S</a> *simu, <a class="el" href="structASTER__S.html">ASTER_S</a> *aster, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Optimize type II servo gains beased on measurement noise and signal PSD.  <a href="#8a20d80d33c6adceb86f8a76d1c76cf0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#1c22bae6e81d5017ef7529fbf88e2ce5">sortfun</a> (const double *a, const double *b)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">for sort incrementally.  <a href="#1c22bae6e81d5017ef7529fbf88e2ce5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#034bd25de2203b0d841829b8db05cdf6">setup_aster_select</a> (double *result, <a class="el" href="structASTER__S.html">ASTER_S</a> *aster, int naster, <a class="el" href="structSTAR__S.html">STAR_S</a> *star, double maxerror, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select a few asterisms that have decent performance (less than maxerror).  <a href="#034bd25de2203b0d841829b8db05cdf6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#de17b96ff13c31bdb279cf44b6dee974">setup_aster_regenpsf</a> (<a class="el" href="structdmat.html">dmat</a> *mideal, <a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structPOWFS__S.html">POWFS_S</a> *powfs, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Regenerate PSF By doing ztilt simulations and compute the average PSF with this ztilt resigual NGS modes.  <a href="#de17b96ff13c31bdb279cf44b6dee974"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#656fd368239d064d95b3f669baf1ee67">setup_aster_redomtch</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, <a class="el" href="structPOWFS__S.html">POWFS_S</a> *powfs, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute matched filter from PSFs.  <a href="#656fd368239d064d95b3f669baf1ee67"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="setup__aster_8c.html#b4edbba502e193755bec6e1ea6687ad0">free_aster</a> (<a class="el" href="structASTER__S.html">ASTER_S</a> *aster, int naster, const <a class="el" href="structPARMS__S.html">PARMS_S</a> *parms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a> array.  <a href="#b4edbba502e193755bec6e1ea6687ad0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Routines to handle asterisms. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d3fa807794f44992a3e1a8b7dc0edd00"></a><!-- doxytag: member="setup_aster.c::comb_select" ref="d3fa807794f44992a3e1a8b7dc0edd00" args="(long n, long k)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static long comb_select           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>k</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes the number of possibilities of selection k items from n items <img class="formulaInl" alt="$C_n^k$" src="form_66.png">. 
<p>

</div>
</div><p>
<a class="anchor" name="76b6d28cf50738ecd9851d4b11c61664"></a><!-- doxytag: member="setup_aster.c::comb_init" ref="76b6d28cf50738ecd9851d4b11c61664" args="(long k)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int* comb_init           </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>k</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
initialize an initial combination composed a vector of non-negative numbers 0,1,2,. 
<p>
.. 
</div>
</div><p>
<a class="anchor" name="0d8127a25ae2043c9c54d8d7f3115466"></a><!-- doxytag: member="setup_aster.c::comb_next" ref="0d8127a25ae2043c9c54d8d7f3115466" args="(int *comb, long n, long k)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int comb_next           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>comb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>k</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the next combination. 
<p>

</div>
</div><p>
<a class="anchor" name="775e19b8c2c52a6258c7d943de3d4303"></a><!-- doxytag: member="setup_aster.c::setup_aster_comb" ref="775e19b8c2c52a6258c7d943de3d4303" args="(int *naster, int nstar, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structASTER__S.html">ASTER_S</a>* setup_aster_comb           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>naster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nstar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create combination of stars to form asterism. 
<p>
It has the option to put TTF always on the brightest for testing purpose. 
</div>
</div><p>
<a class="anchor" name="50dc7d12cb4690e99dab343b7cf7eec9"></a><!-- doxytag: member="setup_aster.c::setup_aster_g" ref="50dc7d12cb4690e99dab343b7cf7eec9" args="(ASTER_S *aster, STAR_S *star, POWFS_S *powfs, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_g           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSTAR__S.html">STAR_S</a> *&nbsp;</td>
          <td class="paramname"> <em>star</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__S.html">POWFS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute Modal to gradient operator by copying from the stars. 
<p>
Using average gradients. Similar to Z tilt since the mode is low order 
</div>
</div><p>
<a class="anchor" name="c5f2ea45439c6fe0dbb79f5fcbb51890"></a><!-- doxytag: member="setup_aster.c::setup_aster_copystar" ref="c5f2ea45439c6fe0dbb79f5fcbb51890" args="(ASTER_S *aster, STAR_S *star, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_copystar           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSTAR__S.html">STAR_S</a> *&nbsp;</td>
          <td class="paramname"> <em>star</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy information from star struct <a class="el" href="structSTAR__S.html" title="Data for each available star.">STAR_S</a> to stars in asterism <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="0af703f2bfcb475b2480f5946ed8a44f"></a><!-- doxytag: member="setup_aster.c::setup_aster_wvf" ref="0af703f2bfcb475b2480f5946ed8a44f" args="(ASTER_S *aster, STAR_S *star, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_wvf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSTAR__S.html">STAR_S</a> *&nbsp;</td>
          <td class="paramname"> <em>star</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy time history of complex pupil function from <a class="el" href="structSTAR__S.html" title="Data for each available star.">STAR_S</a> to <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="75bc43c46e3cc71b9f1492f3929183ff"></a><!-- doxytag: member="setup_aster.c::calc_recon_error" ref="75bc43c46e3cc71b9f1492f3929183ff" args="(const dmat *pgm, const dmat *ineam, const dmat *mcc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdmat.html">dmat</a>* calc_recon_error           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>pgm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>ineam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>mcc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Estimate wavefront error propagated from measurement error. 
<p>
pgm is the reconstructor. ineam is the error inverse. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pgm</em>&nbsp;</td><td>the reconstructor </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ineam</em>&nbsp;</td><td>the inverse of error covariance matrix </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mcc</em>&nbsp;</td><td>NGS mode covariance matrix. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="15fffb6defdd36b2a2f7d3c00efaed62"></a><!-- doxytag: member="setup_aster.c::setup_aster_recon" ref="15fffb6defdd36b2a2f7d3c00efaed62" args="(ASTER_S *aster, STAR_S *star, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_recon           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSTAR__S.html">STAR_S</a> *&nbsp;</td>
          <td class="paramname"> <em>star</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Setup the reconstructor for each <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a>. 
<p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[R_{ngs}=(G_M^T C_n^{-1} G_M)^{-1})G_M^T C_n^{-1}\]" src="form_67.png">
<p>
<p>
<ul>
<li><img class="formulaInl" alt="$R_{ngs}$" src="form_68.png"> is the reconstructor.</li></ul>
<p>
<ul>
<li><img class="formulaInl" alt="$C_n^{-1}$" src="form_69.png"> is the measurement error covariance matrix. Inclue both the measurement error and tilt anisoplanatism effects (computed as the variance of noise free gradient on PSFs that have ideal NGS compensation</li></ul>
<p>
<ul>
<li><img class="formulaInl" alt="$G_M^T$" src="form_70.png"> is the NGS mode to gradient operator. </li></ul>

</div>
</div><p>
<a class="anchor" name="8a20d80d33c6adceb86f8a76d1c76cf0"></a><!-- doxytag: member="setup_aster.c::setup_aster_servo" ref="8a20d80d33c6adceb86f8a76d1c76cf0" args="(SIM_S *simu, ASTER_S *aster, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_servo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM__S.html">SIM_S</a> *&nbsp;</td>
          <td class="paramname"> <em>simu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Optimize type II servo gains beased on measurement noise and signal PSD. 
<p>
We try to minimize <p class="formulaDsp">
<img class="formulaDsp" alt="\[ \sigma^2=\int \textrm{PSD}_{ngs,ws}H_{rej}\textrm{d}\nu + \int_0^{\nu_{nyquist}} \textrm{PSF}\textrm{d}\nu \]" src="form_71.png">
<p>
 
</div>
</div><p>
<a class="anchor" name="1c22bae6e81d5017ef7529fbf88e2ce5"></a><!-- doxytag: member="setup_aster.c::sortfun" ref="1c22bae6e81d5017ef7529fbf88e2ce5" args="(const double *a, const double *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int sortfun           </td>
          <td>(</td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
for sort incrementally. 
<p>

</div>
</div><p>
<a class="anchor" name="034bd25de2203b0d841829b8db05cdf6"></a><!-- doxytag: member="setup_aster.c::setup_aster_select" ref="034bd25de2203b0d841829b8db05cdf6" args="(double *result, ASTER_S *aster, int naster, STAR_S *star, double maxerror, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_select           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>naster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSTAR__S.html">STAR_S</a> *&nbsp;</td>
          <td class="paramname"> <em>star</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>maxerror</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Select a few asterisms that have decent performance (less than maxerror). 
<p>

</div>
</div><p>
<a class="anchor" name="de17b96ff13c31bdb279cf44b6dee974"></a><!-- doxytag: member="setup_aster.c::setup_aster_regenpsf" ref="de17b96ff13c31bdb279cf44b6dee974" args="(dmat *mideal, ASTER_S *aster, POWFS_S *powfs, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_regenpsf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdmat.html">dmat</a> *&nbsp;</td>
          <td class="paramname"> <em>mideal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__S.html">POWFS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Regenerate PSF By doing ztilt simulations and compute the average PSF with this ztilt resigual NGS modes. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000013">Todo:</a></b></dt><dd>record pistat during physical optics simulation and rerun them might help further! </dd></dl>

</div>
</div><p>
<a class="anchor" name="656fd368239d064d95b3f669baf1ee67"></a><!-- doxytag: member="setup_aster.c::setup_aster_redomtch" ref="656fd368239d064d95b3f669baf1ee67" args="(ASTER_S *aster, POWFS_S *powfs, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_aster_redomtch           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPOWFS__S.html">POWFS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute matched filter from PSFs. 
<p>

</div>
</div><p>
<a class="anchor" name="b4edbba502e193755bec6e1ea6687ad0"></a><!-- doxytag: member="setup_aster.c::free_aster" ref="b4edbba502e193755bec6e1ea6687ad0" args="(ASTER_S *aster, int naster, const PARMS_S *parms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_aster           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structASTER__S.html">ASTER_S</a> *&nbsp;</td>
          <td class="paramname"> <em>aster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>naster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structPARMS__S.html">PARMS_S</a> *&nbsp;</td>
          <td class="paramname"> <em>parms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free the <a class="el" href="structASTER__S.html" title="asterism dependent data.">ASTER_S</a> array. 
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 3 13:02:52 2010 for maos-0.7.1 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
