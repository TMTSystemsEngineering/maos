<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>maos-0.6.1: 6 C Fundementals</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page">6 C Fundementals </a></h1>The user is required to have a good understanding of the C fundementals, like pointer usage, to study and improve the code.<p>
Here we list a few to remind the user. <h2><a class="anchor" name="sect-array">
Arrays</a></h2>
If you declare an array:<p>
<code>double a[1024];</code> the symbol actually contains the address of a 1024x8byte memory region that is automatically allocated in the stack (malloc, calloc allocations memory in the heap). Suppost the address of the memory region of 0xFF00. Assignment <code>a[0]=1;</code>puts 1 in memory started at 0xFF00 <code>a[1]=1;</code>puts 1 in memory started at 0xFF08.<h2><a class="anchor" name="sect-pointer">
Pointers A pointer is a variable that stores the</a></h2>
address of a memory region. <code>void *p;</code> is a minimal pointer that just stores the address and can not do any thing about the memory it points to. Its value can be assigned to any other non const vectr or from any vector (1d or 2d).<p>
However, a normal pointer like <code>double *p;</code> also contains information about the memory it points to. More specifically, the compiler know the length of each element so that it can compute the address of the elements, just like arrays. For example. <code>double *p;</code>if p contains value of 0xFF00.<p>
<code>p[0]=1;</code>will store a double 1 into memory region at 0xFF00<p>
<code>p[1]=1;</code>will store a double 1 into memory region at 0xFF08 because a double requires 8 bytes.<p>
<code>p=p+1;</code>p will now contain 0xFF08, i.e., points to the next element, instead of 0xFF01<p>
<code>p[0]=1;</code> is strictly equivalent to <code>*p=1;<code> *p means visit the memory pointed by p instead of p itself. <code>p[1]=1;</code> is strictly equivalent to <code>*(p+1)=1;<code></code></code></code></code><p>
<code><code><code><code></code></code></code></code><p>
<code><code><code><code> </code></code></code></code><h3><a class="anchor" name="sect-1d-pointer">
1D Pointers</a></h3>
<code><code><code><code> The simplist usage of pointer is to create and index an 1-D array: <code>double *p;</code>A pointer stores the address of some memory region</code></code></code></code><p>
<code><code><code><code> <code>p=calloc(1024, sizeof(double));</code>Allocate a memory block of 1024x8 byte and store its address in p.</code></code></code></code><p>
<code><code><code><code> <code>p[0]=1;</code>We assign 1 to the first number in the array</code></code></code></code><p>
<code><code><code><code></code></code></code></code><p>
<code><code><code><code> This is equivalent as using the arrays <code>double a[1024];</code>Declare an 1-D array.</code></code></code></code><p>
<code><code><code><code> <code>a[0]=1;</code>We assign 1 to the first number in the array</code></code></code></code><p>
<code><code><code><code> The symbol a is like a constant pointer. We can assign it's value to a constant pointer: <code>double *const p=a;</code></code></code></code></code><p>
<code><code><code><code> <code>p[0]=1;</code></code></code></code></code><p>
<code><code><code><code></code></code></code></code><p>
<code><code><code><code> </code></code></code></code><h3><a class="anchor" name="sect-const">
Const pointers vs. pointers point to const memory</a></h3>
<code><code><code><code> Beware about a const pointer and pointer that points to constant memory regions: <code>const double *p;</code>p is a pointer that points to a memory region that can not be changed.</code></code></code></code><p>
<code><code><code><code> Thus <code>p[0]=1;</code> is illegal.</code></code></code></code><p>
<code><code><code><code> <code>double * const p;</code>p is a constant pointer that can not have its value changed.</code></code></code></code><p>
<code><code><code><code> Thus <code>p=a</code> is illegal, unless you assign at declaration :<code>double *const p=a</code></code></code></code></code><p>
<code><code><code><code> However, it is legal to modify the values in the memory p points to: <code>p[0]=1;</code> is perfectly ok.</code></code></code></code><p>
<code><code><code><code> </code></code></code></code><h3><a class="anchor" name="sect-2d-pointer">
2D Pointers A 2D pointer is like a 1D pointer. It</a></h3>
<code><code><code><code> stores the address of a memory region. However, unlike the 1D pointer, the compiler knows some additional infos about the 2D pointer. The compiler knows the length of the first dimension so that is can compute the memory location given 2D index like a[2][3]; <code>double (*p)[2]=calloc(3*2,sizeof(double))</code> can be used in the same way as <code>double a[3][2]</code></code></code></code></code><p>
<code><code><code><code> The pointer p in our <a class="el" href="structdmat.html" title="a double matrix object contains 2-d array of double numbers">dmat</a> (or <a class="el" href="structcmat.html" title="a double complex matrix object contains 2-d arrays of double complex numbers.">cmat</a>) struct points to the allocated memory. It can be cast to a two-d vector to facilitize visiting of the elements. The cast is conveniently done by PDMAT(a,pa) for <a class="el" href="structdmat.html" title="a double matrix object contains 2-d array of double numbers">dmat</a> a. This simply declares a 2-d pointer and assign a-&gt;p to it: <code>double (pa*)[2]=(void*)a-&gt;p</code>. a-&gt;p is first cast to void * because it is a double * and can not be assigned to double (*)[2] directly. The array elements (ix,jy) can be accessed by pa[iy][ix]. Notice that ix changes fastest. </code></code></code></code></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Oct 27 12:43:14 2010 for maos-0.6.1 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
