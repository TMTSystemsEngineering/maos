<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Multi-threaded Adaptive Optics Simulator: Example: SCAO BASE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi-threaded Adaptive Optics Simulator
   </div>
   <div id="projectbrief">A Fast End to End Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('SCAO_BASE.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example: SCAO BASE </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following shows the content of scao_base.conf, which defines a basic SCAO system on TMT without information about wfs.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#We create a single conjugate AO case based on the baseline MCAO configuration.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#defines simulation parameters.</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;sim.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Tilt surfaces. see nfiraos.conf for description.</span></div>
<div class="line"><span class="preprocessor"></span>tsurf       = []</div>
<div class="line">surf        = [] # a list of file names</div>
<div class="line">include     = <span class="stringliteral">&quot;atm_mk50p.conf&quot;</span></div>
<div class="line">include     = <span class="stringliteral">&quot;atmr_single.conf&quot;</span></div>
<div class="line">include     = <span class="stringliteral">&quot;dm_single.conf&quot;</span></div>
<div class="line">include     = <span class="stringliteral">&quot;fov_oa.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Including configurations for reconstruction (tomo/fitting) and debugging.</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;recon.conf&quot;</span></div>
<div class="line">include     = <span class="stringliteral">&quot;dbg.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#In single conjugate mode, we use the FDPCG (used to be cbs before 2012-03-19) so that GPU code runs fast.</span></div>
<div class="line"><span class="preprocessor"></span>tomo.alg    = 1</div>
<div class="line">tomo.precond= 1</div>
<div class="line">tomo.maxit  = 5</div>
<div class="line">fit.alg     = 0</div>
<div class="line">sim.cachedm = 0</div>
</div><!-- fragment --><p>It includes the following files to define all the parameters</p>
<p><code>"sim.conf"</code> for general parameters</p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE sim.conf</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Contains common parameters to all setups. </span></div>
<div class="line"><span class="preprocessor"></span>__reset__             #replace all previous entries.</div>
<div class="line">#Telescope Aperture Configuration.</div>
<div class="line">aper.d     = [30 3.6] #may contain one <span class="keywordflow">for</span> [d] or two numbers <span class="keywordflow">for</span> [d din]. d is</div>
<div class="line"><span class="preprocessor">              #outer diameter. din is optimal inner hole diameter.</span></div>
<div class="line"><span class="preprocessor"></span>aper.fnamp    = <span class="stringliteral">&quot;TMT_23cm6.bin&quot;</span> #The amplitude map contains a <a class="code" href="structcell.html">cell</a> array</div>
<div class="line"><span class="preprocessor">                  # of 2 elements.  The first element is 5x1 vector,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  # specifying sampling dx, dy, origin coordinate ox, oy and</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  # height (0).  The second element is a NxN square array.</span></div>
<div class="line"><span class="preprocessor"></span>aper.rotdeg   = 0     #Telescope pupil rotation CCW with respect to instrument. </div>
<div class="line">aper.pupmask  =       #Instrument pupil mask</div>
<div class="line"><span class="preprocessor">#defines simulation parameters.</span></div>
<div class="line"><span class="preprocessor"></span>sim.seeds     = [1]   #random seeds. a list. 0 means random seed</div>
<div class="line">sim.start     = 0     #first time step. usually 0.</div>
<div class="line">sim.end       = 500   #last time step (exclusive)</div>
<div class="line">sim.closeloop = 1     <span class="preprocessor">#closed loop simulation</span></div>
<div class="line"><span class="preprocessor"></span>sim.dt        = 1/800 #loop sampling time. (WFS integration time)</div>
<div class="line">sim.dtrat_skip= 0     #drop frame every <span class="keyword">this</span> steps (sim.dt). 0 no drop.</div>
<div class="line">sim.zadeg     = 0     #zenith angle. moved from atm.zadeg</div>
<div class="line">sim.cachedm   = 1     #Caching DM commands to fine sampled grids that matches</div>
<div class="line"><span class="preprocessor">                  #the sampling of the WFS and/or science evaluation</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  #grid. speed up simulation</span></div>
<div class="line"><span class="preprocessor"></span>sim.fov       = 120   #The entire FoV diameter in arcsec. Only used during plotting.</div>
<div class="line">#Servo coefficients. There is two cycle delay.</div>
<div class="line">#A is command. e is error signal. at time step n, the command is updated by</div>
<div class="line"><span class="preprocessor">#A(n)=A(n-1)*apdm(0)+A(n-2)*apdm(1)+...+e(n-2)*ep</span></div>
<div class="line"><span class="preprocessor"></span>sim.aphi      = [0.999 0] #<span class="keyword">this</span> is the <span class="keywordflow">default</span>. [0.5 0.5] is used in laos </div>
<div class="line">sim.ephi      = 0.5   #error gain of high order loop. -1 to scan from 0.1 to 0.9</div>
<div class="line">sim.alhi      = 0     #Additional latency (sim.dt) of the high order loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs[hi].dtrat+1+aldm)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span>sim.aplo      = [0.999 0] #<span class="keyword">this</span> is the <span class="keywordflow">default</span>. [0.5 0.5] is used in laos.</div>
<div class="line">sim.eplo      = [0.5] #error gain of ngs mode in split tomography</div>
<div class="line">sim.allo      = 0     #Additional latency (sim.dt) of the lo order loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs[lo].dtrat+1+allo)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span>sim.fuseint   = 1     #use fused integrator. <span class="keywordflow">for</span> high and low order loop.</div>
<div class="line">sim.fcttm     = 20    #Cross over frequency of T/T split between DM and TTM*/         </div>
<div class="line"><span class="preprocessor">#Focus tracking gains.</span></div>
<div class="line"><span class="preprocessor"></span>sim.fcfocus   = 10    #cross-over frequency of the focus LPF. lpfocus=2*pi*fc/fs where fs is AO sampling frequency. -1 means 1/10 of NGS frame rate.</div>
<div class="line">sim.mffocus   = -1     #method <span class="keywordflow">for</span> focus tracking. </div>
<div class="line"><span class="preprocessor">                  #0: disable focus update. </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #1: Focus tracking using closed loop gradients, for each LGS independently. (preferred)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #2: Focus tracking using closed loop graidnets, for common LGS focus only.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #-1: auto. 1 for LGS.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Focus offloading to telescope</span></div>
<div class="line"><span class="preprocessor"></span>sim.focus2tel = 0     #Offload focus to telescope</div>
<div class="line">sim.epfocus2tel=0.01  #Integrator gain <span class="keywordflow">for</span> telescope focus control</div>
<div class="line"><span class="preprocessor">#Uplink laser pointing servo #TODO: This belongs to LGS. TODO: Migrate to powfs</span></div>
<div class="line"><span class="preprocessor"></span>sim.apfsm     = [0.999 0] #[0.5 0.5] is used in laos.</div>
<div class="line">sim.epfsm     = [0.5] #uplink integrator gain. </div>
<div class="line">sim.alfsm     = 0     #Additional latency (sim.dt) of the uplink loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs.dtrat+1+alfsm)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span>sim.commonfsm = 0     #Make FSM <span class="keywordflow">for each</span> powfs common (single FSM in LLT <span class="keywordflow">for</span> LGS WFS).</div>
<div class="line">sim.idealfsm  = 0     #ideal correction on uplink (debugging)</div>
<div class="line">sim.zetafsm   = 1     <span class="preprocessor">#Damping of FSM modeled as second harmonic oscillater (SHO).</span></div>
<div class="line"><span class="preprocessor"></span>sim.f0fsm     = 0     #Resonance frequency of FSM (SHO). 0: infinite.</div>
<div class="line">#Twfs</div>
<div class="line">sim.aptwfs    = 1     #Leak should be small <span class="keywordflow">if</span> eptwfs is small.</div>
<div class="line">sim.eptwfs    = 1     #Twfs reference vector servo gain.</div>
<div class="line">#Other</div>
<div class="line">sim.skysim    = 0     #enable presimulation <span class="keywordflow">for</span> sky coverage.</div>
<div class="line">sim.wspsd     =       #Telescope wind shake PSD input. Nx2. First column is freq</div>
<div class="line"><span class="preprocessor">              #in Hz, Second column is PSD in rad^2/Hz.</span></div>
<div class="line"><span class="preprocessor"></span>sim.wsseq     = 1     #windshake sequency. different wsseq gives different realizations</div>
<div class="line">sim.ncpa_calib= 1     #calibrate NCPA. Only useful <span class="keywordflow">if</span> surf is not empty. </div>
<div class="line"><span class="preprocessor">              #1: use all DMs. 2: use only ground dm</span></div>
<div class="line"><span class="preprocessor"></span>sim.ncpa_ttr  = 0     #Remove average t/t from NCPA <span class="keywordflow">for</span> WFS. Equivalent as repositioning WFS.</div>
<div class="line">sim.ncpa_thetax= []   #Coordinate <span class="keywordflow">for</span> NCPA calibration (arcsec). empty means follow evl.</div>
<div class="line">sim.ncpa_thetay= []   #Coordinate <span class="keywordflow">for</span> NCPA calibration (arcsec)</div>
<div class="line">sim.ncpa_wt    = []   <span class="preprocessor">#Weight for each point.</span></div>
<div class="line"><span class="preprocessor"></span>sim.ncpa_hs    = []   #Height of star</div>
<div class="line">sim.dmadd     = <span class="stringliteral">&quot;&quot;</span>    #file containing dm vector to simulate turbulence (added to integrator output). </div>
<div class="line"><span class="preprocessor">                  # #DM cells. In each cell, one colume is for each time step. Wraps over in the end. Can be empty.</span></div>
<div class="line"><span class="preprocessor"></span>sim.pause     = 0     #Pause after every step</div>
<div class="line"><span class="preprocessor">#for GPU</span></div>
<div class="line"><span class="preprocessor"></span>gpu.wfs       = 1     #Use GPU <span class="keywordflow">for</span> WFS sensing</div>
<div class="line">gpu.evl       = 1     #Use GPU <span class="keywordflow">for</span> Performance evaluation</div>
<div class="line">gpu.tomo      = 1     #Use GPU <span class="keywordflow">for</span> tomography</div>
<div class="line">gpu.fit       = 1     #Use GPU <span class="keywordflow">for</span> DM fitting</div>
<div class="line">gpu.lsr       = 1     #Use GPU <span class="keywordflow">for</span> LSR</div>
<div class="line">gpu.psf       = 1     #Use GPU to accumulate PSF.</div>
<div class="line">gpu.moao      = 1     #Use GPU <span class="keywordflow">for</span> MOAO</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if mvmport is nonzero connect to the mvm server at mvmhost:mvmport.</span></div>
<div class="line"><span class="preprocessor"></span>sim.mvmhost   = <span class="stringliteral">&quot;localhost&quot;</span> #Where does the MVM server run</div>
<div class="line">sim.mvmport   = 0     #which port does the MVM server run. 0: disable mvm server/client</div>
<div class="line">sim.mvmsize   = 0     #number of gradients to send each time. 0 is all.</div>
<div class="line">sim.mvmngpu   = 0     #&gt;0: limit maximum number of gpus to use.      </div>
<div class="line"><span class="preprocessor">#For special purpose</span></div>
<div class="line"><span class="preprocessor"></span>sim.noatm     = 0     #Disable atmosphere generation (to evaluate telescope errors).</div>
<div class="line">sim.evlol     = 0     #evaluate open loop performance only. Skip wfs/tomo/recon.</div>
<div class="line">sim.psfr      = 0     #Save PSF reconstruction telemetry.</div>
<div class="line">sim.ecnn      = 0     #Estimate WF covariance due to WFS noise cov Cnn.</div>
<div class="line">sim.wfsalias  = 0     #Study the wfs aliasing effect by project turbulence onto</div>
<div class="line"><span class="preprocessor">                  #the orthogonal of the DM vector space.</span></div>
<div class="line"><span class="preprocessor"></span>sim.idealfit  = 0     #evaluation ideal fit error only. no wfs, no recon. (was fitonly)</div>
<div class="line">sim.idealtomo = 0     #ideal tomography without wfs (directly propagate from turbulence).</div>
<div class="line">sim.idealwfs  = 0     #Implements ideal WFS by only <span class="keyword">using</span> turbulence in DM range. conflicts sim.wfsalias</div>
<div class="line">sim.idealevl  = 0     #Evaluate the performance only in DM range.</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">#Common atmospheric parameters</div>
<div class="line">atm.method    = 0     #0: Von Karman. 1: Fractal method. 2: Biharmonic. </div>
<div class="line">atm.size      = [64 64]#size of atmosphere in meter. 0: automatic.</div>
<div class="line">atm.dx        = 1/64  #sampling of the atmosphere, match evl.dx</div>
<div class="line">atm.wdrand    = 1     #&gt;0: as additional seed to randomize wind direction </div>
<div class="line">atm.frozenflow= 1      #<span class="keyword">using</span> frozen flow screen (at OL. CL is always frozenflow)</div>
<div class="line">atm.ninit     = 17    #Initial size of the screen in fractal method. &gt;=2</div>
<div class="line">atm.share     = 1     #We share atmosphere by <span class="keywordflow">default</span>.</div>
<div class="line">atm.r0evolve  = 0     #0: disable. 1: Scale turbulence screen spatially by r0logpsds, 2) Scale Raytracing <span class="keyword">using</span> r0logpsdt, 3) both.</div>
<div class="line">atm.r0logpsdt = [-1.43 3.353e-4 0 0.3107] #[alpha beta fmin fmax]:temporal PSD of log(r0) /Hz: beta*f^alpha. Or a file of nx2</div>
<div class="line">atm.r0logpsds = [-2.43 5.195e-5 0 1/30] #[alpha beta fmin fmax]:spatial PSD of log(r0) /Hz: beta*f^alpha. Or a file of nx2</div>
<div class="line"><span class="preprocessor">#Reconstructor parameters</span></div>
<div class="line"><span class="preprocessor"></span>atmr.dx       = 0   #Fundemental reconstructio grid sampling. 0: matching</div>
<div class="line"><span class="preprocessor">            #minimum of actuator spacing and subaperture size.</span></div>
<div class="line"><span class="preprocessor"></span>atmr.r0z      = -1  #atm r0 at zenith. -1: matches atm.r0z</div>
<div class="line">atmr.L0       = -1  #atm outer scale.  -1: matches atm.l0</div>
<div class="line">atmr.os       = [2]   #reconstruction screen oversampling over atmr.dx</div>
<div class="line">atmr.ht       = [] #reconstructed screen height. Empty meaning follow atm.ht (MCAO)</div>
<div class="line">atmr.wt       = [] #reconstructed screen weight. Empty meaning follow atm.wt (MCAO)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#CN2 Estimation</span></div>
<div class="line"><span class="preprocessor"></span>cn2.pair      = []    #pairs of wfs to estimate cn2. empty to disable cn2 estimation.</div>
<div class="line">cn2.step      = 100   #<span class="keywordflow">do</span> cn2 estimation every <span class="keyword">this</span> time step</div>
<div class="line">cn2.reset     = 1     #reset the accumulated cn2 after every cn2.reset set of results</div>
<div class="line">cn2.hmax      = 18000 #maximum height to esimate at zenith</div>
<div class="line">cn2.saat      = 0.95  #subaperture area threashold to use in cn2 estimation</div>
<div class="line">cn2.keepht    = 1     #1: Interpolate slodar results onto atmr.ht. 2: <span class="keywordflow">do</span> slodar directly on these layers.</div>
<div class="line">cn2.tomo      = 0     #1: update tomography parameters </div>
<div class="line">cn2.verbose   = 1     #output estimated r0, cn2 during simulation</div>
<div class="line">cn2.nhtomo    = 6     #number of layers to feed into reconstructor. only effective <span class="keywordflow">if</span> keepht==0</div>
<div class="line">cn2.psol      = 1     #1: use pseudo open loop gradients. 0: to probe residual turbulence</div>
<div class="line">cn2.moveht    = 0     #move the ht used <span class="keywordflow">for</span> reconstructor to near strongest layers. only</div>
<div class="line"><span class="preprocessor">                      #effective if keepht=0.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#set MOAO DMs parameters.</span></div>
<div class="line"><span class="preprocessor"></span>moao.dx       = [0.5] #spacing of actuator</div>
<div class="line">moao.iac      = [0.3]</div>
<div class="line">moao.gdm      = [0.5]</div>
<div class="line">moao.stroke   = [inf]</div>
<div class="line">moao.actslave = [0]</div>
<div class="line">moao.lrt_ptt  = [0]</div>
<div class="line">moao.guard    = [1]</div>
<div class="line">moao.actstuck = [<span class="stringliteral">&quot;&quot;</span>]</div>
<div class="line">moao.actfloat = [<span class="stringliteral">&quot;&quot;</span>]</div>
<div class="line">moao.ar       = [1]</div>
<div class="line"><span class="preprocessor">#some common fov parameters</span></div>
<div class="line"><span class="preprocessor"></span>evl.dx      = -1  #sampling of the aperture in simulation. -1: follow atm.dx</div>
<div class="line">evl.psf     = [1] #output psf <span class="keywordflow">for</span> <span class="keyword">this</span> direction <span class="keywordflow">if</span> psf is computed. 1 or nevl elements.</div>
<div class="line">evl.psfr    = [1] #output psf reconstruction telemetry <span class="keywordflow">for</span> <span class="keyword">this</span> direction.</div>
<div class="line">evl.hs      = [inf] #the height of the science <span class="keywordtype">object</span>. normally infinity. </div>
<div class="line">evl.rmax    = 1   #max radial order in performance evaluation. </div>
<div class="line"><span class="preprocessor">           #1: includes piston/tip/tilt. 2: p/t/t/focus/astigmatism</span></div>
<div class="line"><span class="preprocessor"></span>evl.tomo    = 0 #evaluate CL error <span class="keywordflow">for</span> tomography</div>
<div class="line">evl.moao    = -1 #index into MOAO config in recon.conf</div>
<div class="line">evl.psfhist = 0 #output history of the complex psf (a lot of storage). </div>
<div class="line">evl.psfmean = 0 #output time averaged psf. <span class="keywordflow">for</span> <span class="keyword">this</span> number of psf<span class="stringliteral">&#39;s along the</span></div>
<div class="line"><span class="stringliteral">        #way. 1: only save in the end. n: save  average every n steps (no reset after saving)</span></div>
<div class="line"><span class="stringliteral">evl.psfol   = 1 #compute OL psf in additional to CL PSF. 0: disable 1: on axis</span></div>
<div class="line"><span class="stringliteral">            #direction only, 2: all directions and average them.</span></div>
<div class="line"><span class="stringliteral">evl.psfngsr = 0 #remove NGS modes from PSF in split tomography mode. </span></div>
<div class="line"><span class="stringliteral">            # 1: both normal psf and psf with ngsmod removal are saved.</span></div>
<div class="line"><span class="stringliteral">        # 2: only psf with ngs mode removed is computed.</span></div>
<div class="line"><span class="stringliteral">evl.cov     = 0 #save covariance of opd for directions for steps like evl.psfmean (no reset after saving)</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">evl.wvl     = [1.25e-6 1.65e-6 2.2e-6]#wavelength to evaluat PSF or strehl</span></div>
<div class="line"><span class="stringliteral">evl.pttr    = [0] #remove p/t/t in wavefront OPD before computing PSF or covariance</span></div>
<div class="line"><span class="stringliteral">evl.psfisim = 20  #time step to start psfmean/psfhist</span></div>
<div class="line"><span class="stringliteral">evl.psfgridsize = [] #FFT grid size for psf computation for each</span></div>
<div class="line"><span class="stringliteral">             #wavelength. 0,1,or nwvl number of elements. 0:</span></div>
<div class="line"><span class="stringliteral">             #automatic. This determines the sampling of the computed</span></div>
<div class="line"><span class="stringliteral">             #PSF. length matches evl.wvl</span></div>
<div class="line"><span class="stringliteral">evl.psfsize = []    #size of the psf to output. The large PSF is cut to this</span></div>
<div class="line"><span class="stringliteral">            #size. Set to 1 to compute strehl only. 1 or nwvl number of</span></div>
<div class="line"><span class="stringliteral">            #elements(for each wvl)</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#some common DM parameters that are usually the same for each DM. Can take either 1 or ndm values.</span></div>
<div class="line"><span class="stringliteral">dm.dx     = [0.5]  #spacing of DM actuators. preferred way to set system order as 2014-04-03. Only way since 2016.</span></div>
<div class="line"><span class="stringliteral">dm.ar     = [1]    #DM aspect ratio. dy/dx spacing</span></div>
<div class="line"><span class="stringliteral">dm.guard  = [1]    #extra DM actuator rings in actuator grid. minimum of 2 for cubic influence function. changed to 1 on Aug 9, 2013</span></div>
<div class="line"><span class="stringliteral">dm.stroke = [inf]  #surface stroke in meter. opd is [-stroke stroke]</span></div>
<div class="line"><span class="stringliteral">dm.iastroke=[inf]  #surface inter-actuator stroke in meter. </span></div>
<div class="line"><span class="stringliteral">dm.iastrokefn=[]</span></div>
<div class="line"><span class="stringliteral">dm.iac    = [0.3]  #inter-actuator-coupling coefficient for cubic influence function. 0: disable</span></div>
<div class="line"><span class="stringliteral">dm.hist   = [0]    #output histogram of DM actuator commands.</span></div>
<div class="line"><span class="stringliteral">dm.histbin= [1e-7] #The bin size for DM histogram computation.</span></div>
<div class="line"><span class="stringliteral">dm.histn  = [201]  #Total number of bins. odd number, centered around zero.</span></div>
<div class="line"><span class="stringliteral">dm.vmisreg= [0]    #vertical misregistration. not implemented yet.</span></div>
<div class="line"><span class="stringliteral">dm.hyst   = [&quot;&quot;]   #File containing a matrix that describes the hysterisis. The matrix should have 3 rows, and multiple columns. Each column</span></div>
<div class="line"><span class="stringliteral">           #describe the parameters for a mode, and the rows are: 1) weight 2) alpha, 3) beta. See &quot;Hysteresis Modeling and</span></div>
<div class="line"><span class="stringliteral">           #Simulation&quot; by Luc Gilles. Optionally the file may contain a header that defines stroke=a where a is surface p/v stroke</span></div>
<div class="line"><span class="stringliteral">           #Consequently, alpha is scaled by a. The header may also contain alpha_power=b that describes how alpha varies when command</span></div>
<div class="line"><span class="stringliteral">           #goes from [-a a]: alpha(v)=alpha*((a-v)/(2*a))^b where v is command.</span></div>
<div class="line"><span class="stringliteral">dm.actfloat = [&quot;&quot;] #file containing floating actuators. nx2 coordinate</span></div>
<div class="line"><span class="stringliteral">dm.actstuck = [&quot;&quot;] #file containing stuck actuators. nx2 coordinate. or nx3 with third column the stuck position (in opd).</span></div>
<div class="line"><span class="stringliteral">#All misregistrations/distortions are specified here</span></div>
<div class="line"><span class="stringliteral">misreg.tel2wfs=[] #From telescope pupil (atmosphere) to WFS</span></div>
<div class="line"><span class="stringliteral">misreg.dm2wfs=[] #From DM to WFS</span></div>
<div class="line"><span class="stringliteral">misreg.dm2sci=[] #From DM to science.</span></div>
<div class="line"><span class="stringliteral">misreg.pupil=[0 0]  #2 numbers only. Misregistration of pupil wrt to AO and instrument.</span></div>
</div><!-- fragment --><p><code>"aper_tmt.conf"</code> for the aperture of TMT</p>
<div class="fragment"></div><!-- fragment --><p><code>"atm_scao.conf"</code> for the atmosphere.</p>
<div class="fragment"></div><!-- fragment --><p><code>"dm_single.conf"</code> for a single deformable mirror</p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE dm_single.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#A single DM with Fried geometry.</span></div>
<div class="line"><span class="preprocessor"></span>dm.ht     = [0]   #DM on ground.</div>
<div class="line">dm.offset = [0]   #Fried geometry.</div>
</div><!-- fragment --><p><code>"fov_oa.conf"</code> for a single on axis science and fit field.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE evl_oa.conf Contains performance evaluation direction defined for on axis only</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#performance evaluation directions.</span></div>
<div class="line"><span class="preprocessor"></span>evl.thetax = [0]</div>
<div class="line">evl.thetay = [0]</div>
<div class="line">evl.wt     = [1]</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#DM Fitting directions </span></div>
<div class="line"><span class="preprocessor"></span>fit.thetax = [0]</div>
<div class="line">fit.thetay = [0]</div>
<div class="line">fit.wt     = [1]</div>
</div><!-- fragment --><p><code>"recon.conf"</code> for tomography and DM fit.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE recon.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#The parameters for generation reconstruction</span></div>
<div class="line"><span class="preprocessor"></span>recon.alg       = 0 #0: MVR. 1: LSR</div>
<div class="line">recon.glao      = 0 #1: average gradient from wfs of same type (GLAO).</div>
<div class="line">recon.split     = 1 #0: integrated reconstruction. 1: ad hoc Split. 2: mvst (only <span class="keywordflow">if</span> recon.alg==0)</div>
<div class="line">recon.mvm       = 0 <span class="preprocessor">#1: Assemble control matrix directly. 1: use warm restart in cg from neighboring actuators. 2: disable warm restart.</span></div>
<div class="line"><span class="preprocessor"></span>recon.modal     = 0 #-2: emulate zonal, -1: zernike modes, 0: zonal, 1: KL modes</div>
<div class="line">recon.nmod      = 0 #Maxium number of modes in modal controller. 0: all available modes.</div>
<div class="line">recon.psol      = -1#1: Use pseudo open loop gradients. -1 : <span class="keyword">auto</span>, on <span class="keywordflow">for</span> MVR off <span class="keywordflow">for</span> lsr</div>
<div class="line">recon.poke      = 1e-7#How much WFE (meter) to apply to OPD for computing experimental interaction matrix. In noise free case, smaller one works fine.</div>
<div class="line">recon.psd       = 0 <span class="preprocessor">#1: compute PSDs of DM error signal averaged over aperture and field points.</span></div>
<div class="line"><span class="preprocessor"></span>recon.psddtrat  = 1024 #how many time step to sample <span class="keywordflow">for</span> PSD computation.</div>
<div class="line">recon.psddtrat_lo=256 #For low order PSD computation. 0:disable</div>
<div class="line">recon.psddtrat_twfs=0 #For TWFS PSD computation. 0:disable</div>
<div class="line">recon.psdservo_gain=0.5 #Gain used to update servo parameter</div>
<div class="line">recon.psdnseg   = 1 #how many overlapping partitions of the time history to compute PSD.</div>
<div class="line">recon.fnsphpsd  = <span class="stringliteral">&quot;&quot;</span>#PSD of spherical aberration due to profile evolution.</div>
<div class="line">#The parameters <span class="keywordflow">for</span> minimum variance tomography reconstruction, which is</div>
<div class="line"><span class="preprocessor">#composed of a turbulence tomography step and a DM fitting step.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Turbulence tomography reconstruction information.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">tomo.assemble   = 0 #1: Assemble tomography matrix.  0: don<span class="stringliteral">&#39;t assemble. 0 is</span></div>
<div class="line"><span class="stringliteral">            #fast for CG. automatically set to 1 in CBS mode</span></div>
<div class="line"><span class="stringliteral">tomo.predict    = 0 #prediction through modified ray tracing direction in tomo (testing)</span></div>
<div class="line"><span class="stringliteral">tomo.tikcr      = 1e-9#tikhonov regularization. Necessary if tomo.alg=0</span></div>
<div class="line"><span class="stringliteral">tomo.svdthres   = 1e-9 #threshold of SVD inversion. 1e-9 for GLAO. 2e-4 for BGS?</span></div>
<div class="line"><span class="stringliteral">tomo.piston_cr  = 0 #single point piston constraint in tomography. degrads fdpcg. does not help cg or cbs.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tomo.alg        = 1 #Tomography algorithm. 0: cholesky backsubstitution (CBS) on full #matrix</span></div>
<div class="line"><span class="stringliteral">            #1: Conjugate Gradient (CG). 2: SVD Inversion.</span></div>
<div class="line"><span class="stringliteral">tomo.bgs        = 0 #block Gauss Seidel method</span></div>
<div class="line"><span class="stringliteral">tomo.precond    = 1 #Tomography CG preconditioning. 0: no precondition. 1: Fourier Domain PCG</span></div>
<div class="line"><span class="stringliteral">tomo.maxit      = 0 #max iterations in CG. 0 is default: 40 for CG, 4 for FDPCG (tomo.precond=1) x10 in non warm restart mode (3 as of 2016-06-20)</span></div>
<div class="line"><span class="stringliteral">tomo.minwt      = 0.01 #minimum layer weight allowed. if less than this will force to this.</span></div>
<div class="line"><span class="stringliteral">tomo.square     = 0 #1: using square grid in tomography (xloc)</span></div>
<div class="line"><span class="stringliteral">tomo.cgthres    = 1 #Repeat cg if residual is not reached (only used in MVM assemble in gpu)</span></div>
<div class="line"><span class="stringliteral">#The following ahst_* options are only used in ad hoc split tomography</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_wt    = 1 #weighting method to remove ngs modes from lgs DM commands.</span></div>
<div class="line"><span class="stringliteral">                    #1: use NGS gradient reconstruction weighting, 2:use</span></div>
<div class="line"><span class="stringliteral">                    #aperture evaluation weighting, 3: identity weighting.</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_idealngs = 0 #apply ideal NGS mode correction. for skycoverage pre-simulation</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_focus = 1   #Only useful in LGS AO mode, in split tomography, when focus tracking (sim.mffocus)is turned on.</span></div>
<div class="line"><span class="stringliteral">                  #0: the first plate scale mode creates focus error on science, but no focus error in LGS.</span></div>
<div class="line"><span class="stringliteral">                  #1: the first plate scale mode results in no focus in science, but focus error in LGS. sim.mffocus takes care of it.</span></div>
<div class="line"><span class="stringliteral">              #2: Like 1, but feed this mode to LGS focus measurement. (Deprecated).</span></div>
<div class="line"><span class="stringliteral">tomo.cone     = 1 #1: using cone coordinate for tomography grid. keep at 1.</span></div>
<div class="line"><span class="stringliteral">tomo.cxxalg   = 0 #method to compute Cxx^-1. 0: bihormonic approx. 1: inverse psd. 2: fractal</span></div>
<div class="line"><span class="stringliteral">tomo.cxxscale = 1 #scale the Cxx^-1 term (debugging).</span></div>
<div class="line"><span class="stringliteral">tomo.guard    = 1 #rings of padding in generating reconstruction grid, not too small, not too large.</span></div>
<div class="line"><span class="stringliteral">tomo.pos      = 2 #over sampling ratio of ploc grid over actuator grid</span></div>
<div class="line"><span class="stringliteral">tomo.nxbase   = 0 #Each layer xloc grid size is tomo.os*tomo.nxbase is not zero. same for ploc.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tomo.iac      = 0 #inter-actuator-coupling in cubic influence function (testing)</span></div>
<div class="line"><span class="stringliteral">tomo.ninit    = 5 #Initial size of the screen in fractal method. &gt;=2</span></div>
<div class="line"><span class="stringliteral">tomo.splitlrt = 0 #1: use LGS low rank terms in split tomography. to 0 on 2013/1/15</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#DM Fitting</span></div>
<div class="line"><span class="stringliteral">fit.tikcr     = 1e-7 #tikhonov regularization. 1.e-9 is not enough.</span></div>
<div class="line"><span class="stringliteral">fit.svdthres  = 2e-4 #threshold of SVD inversion</span></div>
<div class="line"><span class="stringliteral">fit.actslave  = 1 #actuators that are weakly coupled are slaved to active ones during DM fitting</span></div>
<div class="line"><span class="stringliteral">fit.actthres  = 0.1 #When actuator coupling coefficient drops below this, start slaving. 0.05 is not very stable.</span></div>
<div class="line"><span class="stringliteral">fit.actinterp = 1 #Interpolate weakly coupled actuators from active ones.</span></div>
<div class="line"><span class="stringliteral">fit.lrt_piston= 1 #piston constraint</span></div>
<div class="line"><span class="stringliteral">fit.lrt_tt    = 1 #Limiting tip/tilt on upper DMs.</span></div>
<div class="line"><span class="stringliteral">fit.assemble  = 1 #1: assemble fit matrix. fast for fit.</span></div>
<div class="line"><span class="stringliteral">fit.alg       = 1 #Fitting algorithm. see tomo.alg. CBS works the best, but slow in GPU.</span></div>
<div class="line"><span class="stringliteral">fit.bgs       = 0 #block Gauss Seidel method.</span></div>
<div class="line"><span class="stringliteral">fit.precond   = 0 #CG preconditioning. see tomo.precond</span></div>
<div class="line"><span class="stringliteral">fit.maxit     = 0 #max iterations in CG. 0 is default: 10. x10 in non warm restart mode</span></div>
<div class="line"><span class="stringliteral">fit.square    = 0 #use square grid on DM grid and ploc</span></div>
<div class="line"><span class="stringliteral">fit.hs        = [inf] #the height of the science object to optimize DM fitting with. normally infinity</span></div>
<div class="line"><span class="stringliteral">fit.pos       = -1 #over sampling ratio of floc grid over actuator grid. -1: inherits tomo.pos by default.</span></div>
<div class="line"><span class="stringliteral">fit.cachedm   = 1  #cache DM command onto a grid matched with floc.</span></div>
<div class="line"><span class="stringliteral">fit.cachex    = 0  #cache x on xloc to non-cone coordinate. no speed up</span></div>
<div class="line"><span class="stringliteral">#Parameters for least square reconstructor follows tomography parameter.</span></div>
<div class="line"><span class="stringliteral">lsr.tikcr     = 1e-2</span></div>
<div class="line"><span class="stringliteral">lsr.svdthres  = 1e-5</span></div>
<div class="line"><span class="stringliteral">lsr.actthres  = 0.1 #When actuator coupling coefficient drops below this, start slaving.</span></div>
<div class="line"><span class="stringliteral">lsr.actinterp = -1 #extrapolate weakly coupled actuators from active ones. -1: auto, on for zonal, off for modal control</span></div>
<div class="line"><span class="stringliteral">lsr.fnreg     = #File name for regularization. has to be sparse cell array of ndm*ndm. </span></div>
<div class="line"><span class="stringliteral">lsr.actslave  = 1</span></div>
<div class="line"><span class="stringliteral">lsr.bgs       = 0</span></div>
<div class="line"><span class="stringliteral">lsr.alg       = 2</span></div>
<div class="line"><span class="stringliteral">lsr.maxit     = 0 #max iterations in CG. 0 is default: 30. x10 in non warm restart mode.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#The misregistration/distortion model to be used in WFE reconstruction</span></div>
<div class="line"><span class="stringliteral">recon.misreg_tel2wfs=[]</span></div>
<div class="line"><span class="stringliteral">recon.misreg_dm2wfs=[]</span></div>
<div class="line"><span class="stringliteral">recon.misreg_dm2sci=[]</span></div>
</div><!-- fragment --><p><code>"dbg.conf"</code> for debugging, gemetry and telemetry data</p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE dbg.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">###The following are parameters used for debugging</span></div>
<div class="line"><span class="preprocessor"></span>dbg.atm = []  #Test atmosphere. A number <span class="keywordflow">for each</span> layer &lt;0: fourier mode with spatial frequency 1/dbg.atm m^-1. &gt;0: zernike mode.</div>
<div class="line"></div>
<div class="line">dbg.wamethod=0  #0: Use mod on dm. 1: use mod on science when tomo.ahst_wt=2</div>
<div class="line">dbg.mvstlimit=0 #limit MVST modes to the number <span class="keywordflow">if</span> none zero</div>
<div class="line">dbg.annular_W=0</div>
<div class="line">dbg.tomo_maxit=[]#<span class="keywordflow">if</span> not empty, will study these maxits in open loop</div>
<div class="line">dbg.tomo_hxw=0  #1: force use hxw</div>
<div class="line">dbg.ecovxx=0    #output ecovxx used to generate ecov.</div>
<div class="line">dbg.useopdr=0   #use opdr in PSF reconstruction. (deprecated)</div>
<div class="line">dbg.cmpgpu=0    #1: make cpu code follow GPU implementation.</div>
<div class="line">dbg.wfslinearity=-1#Study the linearity/noise property of pixel processing algorithms of <span class="keyword">this</span> wfs.</div>
<div class="line">dbg.nocgwarm=0    #disable warm restart in cg.</div>
<div class="line">dbg.dmfullfov=0  #let DM cover full FoV (sim.fov)</div>
<div class="line">dbg.tomo=0   #debug tomography in gpu</div>
<div class="line">dbg.fit=0    #debug fitting in gpu</div>
<div class="line">dbg.na_smooth = 1 #2014-05-07 <a class="code" href="mkdtf_8h.html#a1019bd04997fd407aede4d92c4c1cc2a">smooth</a> sodium profile. newly introduced. replaced llt.smooth</div>
<div class="line">dbg.na_interp = 1 #2014-05-07 1: interpolate sodium profile (old way). 0: direct sum (slow, but accurate)</div>
<div class="line">dbg.ncpa_preload=0 #1: preload integrator with DM sys flat, 0: add DM sys flat after the integrator.</div>
<div class="line">dbg.ncpa_rmsci=0   #1: <span class="keywordflow">do</span> not include uncorrelatable error in science path.</div>
<div class="line">dbg.gradoff_scale=1 #scale the gradient reference vector</div>
<div class="line">dbg.pwfs_psx=[0 0 0 0] #pyramid WFS pupil shift along x (in pixel). pupil ordering: -x+y, +x+y, -x-y, +x-y.</div>
<div class="line">dbg.pwfs_psy=[0 0 0 0] #pyramid WFS pupil shift along y (in pixel).</div>
<div class="line">dbg.pwfs_flate=0 #pyramid flat edge width in mas.</div>
<div class="line">dbg.pwfs_flatv=0 #pyramid flat vertex width in mas.</div>
<div class="line">dbg.pwfs_pupelong=0 #pyramid pupil radial elongation induced number of pixel offset at farthest radius on detector. 1 means pupil is larger by 2*sqrt(2) pixels along radial direction than the azimuthal direction.</div>
<div class="line">dbg.pwfs_side=4  <span class="preprocessor">#Four sided pyramid WFS. 2 for roof. 3 for 3-sided.</span></div>
<div class="line"><span class="preprocessor"></span>dbg.dmoff=     #DM offset <span class="keywordflow">for</span> simulating turbulence on the DM. dimension: ndm*nstep</div>
<div class="line">dbg.gradoff=   #Introduced additional gradient offset. dimension: nwfs*nstep</div>
<div class="line">dbg.gp_noamp=0 #1: Use annular amplitude amp instead of theoretical one.</div>
<div class="line">dbg.twfsflag=1 #use TWFS to control 0: all modes, 1: only radial.</div>
<div class="line">dbg.draw_opdmax=0 #Limit OPD to [-1 1]*opdmax in drawing</div>
<div class="line">dbg.draw_gmax=0 #Limit gradient to [-1 1]*gmax in drawing</div>
<div class="line">dbg.wfs_iac=0. #Cubic spline coupling factor <span class="keywordflow">for</span> turbulence fitting onto wfs grid. 0 disables cubic spline.</div>
<div class="line">dbg.fullatm=0 #1: Always copy full atm to GPU.</div>
<div class="line">dbg.lo_blend=0 #Low order multi-rate control blending scheme. 0: no blend, 1: slower loop generates offset <span class="keywordflow">for</span> faster loop, 2: HPF/LPF</div>
<div class="line">dbg.eploscale = 1 #scale of eplo <span class="keywordflow">for</span> </div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#For plotting</span></div>
<div class="line"><span class="preprocessor"></span>plot.setup=0 #plot aperture,powfs,recon grids, etc.</div>
<div class="line">plot.atm=0   #plot atmosphere</div>
<div class="line">plot.run=0   #plot wfs opd, gradients, DM opd, science opd, etc.</div>
<div class="line">plot.opdx=0  #plot turbulence projeced to xloc.</div>
<div class="line">plot.psf=0   #plot PSF in linear (1) or log (2) mode</div>
<div class="line">plot.all=0   <span class="preprocessor">#enables plot.setup, plot.atm, and plot.run</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#The saved files can be loaded with mex routine &quot;read&quot; in MATLAB.</span></div>
<div class="line"><span class="preprocessor"></span>save.extra=1 #Save extra results, namely clep, olep, cleNGSmp, etc</div>
<div class="line">save.all=0   #saves everything below except gcov. mainly <span class="keywordflow">for</span> debugging</div>
<div class="line">save.setup=0 #save the data structs prepared during setup in subfolder <span class="stringliteral">&quot;setup&quot;</span>.</div>
<div class="line">         #They Can be loaded back in future simulation.</div>
<div class="line">save.recon=0 #save reconstructor. big matrices.</div>
<div class="line">save.mvst=0  #save mvst intermediate matrices in preparation to load later.</div>
<div class="line">save.ncpa=0  #save NCPA surface in setup_surf.c</div>
<div class="line">save.fdpcg=0 #save FDPCG matrices.</div>
<div class="line">#Run time saving:</div>
<div class="line">save.atm =0  #save atmosphere</div>
<div class="line">save.run =0  #save run time information, also enables save.dmreal,gradcl,gradpsol</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#The following four options takes 1) scalar values of 0 or 1 where 1 means all</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#wfs. or 2) vector values equal to the number of wfs. In the vector case, 1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#means output, 0 means no output.</span></div>
<div class="line"><span class="preprocessor"></span>save.ints=0   #save wfs subaperture images (images). (read above)</div>
<div class="line">save.grad=0   #save wfs gradients (also enabled by save.run)(read above)</div>
<div class="line">save.wfsopd=0 #save wfs OPDs (read above)</div>
<div class="line">save.gradgeom=0#save geometric grads in physical optics simulations (read above)</div>
<div class="line">save.dither=0 #save estimated matched filter from dithering</div>
<div class="line">save.evlopd=0 #save evaluation directions opd every <span class="keyword">this</span> time step <span class="keywordflow">if</span> &gt;0. since 2011-02-07</div>
<div class="line">save.opdr=0   #save reconstructed atmosphere. </div>
<div class="line">save.opdx=0   #save atmosphere propagated to reconstruction grid.</div>
<div class="line">save.dm=0 #   total DM commands effective. including tip/tilt.(implicit <span class="keywordflow">if</span> save.run=1)</div>
<div class="line">#special run time saving that need extra computation.</div>
<div class="line">save.gcovp=100#save the gcov every 100 steps to different files.</div>
<div class="line">save.gcov=[]  #output covariance of psol gradient. set to [1 3 2 5] to output</div>
<div class="line">          #covariance between wfs 1 and 3, 2 and 5 drawdaemon is used to <span class="keywordflow">do</span></div>
<div class="line">          #the plotting.</div>
<div class="line">save.ecov=0   #save covariance of DM error vector</div>
<div class="line">save.mvmi=0   #save tomography output of mvm control matrix assembly <span class="keywordflow">for</span> warm restart.</div>
<div class="line">save.mvmf=0   #save <a class="code" href="recon__utils_8c.html#a168e09881164d7f61ac8e0620ec7135b">FitR</a> output of mvm control matrix assemble</div>
<div class="line">save.mvm=0    #save MVM control matrix</div>
<div class="line">load.atm=#<span class="stringliteral">&quot;atm.fn&quot;</span> #load atmosphere. <a class="code" href="structcell.html">cell</a> array of <span class="keywordtype">double</span> number arrays. The</div>
<div class="line">     #sampling must match the key atm.dx in atm_*.conf</div>
<div class="line">load.locs=#<span class="stringliteral">&quot;aper_locs&quot;</span> #load aperture grid</div>
<div class="line">load.aloc=#<span class="stringliteral">&quot;aloc&quot;</span> #load DM grid</div>
<div class="line">load.xloc=#<span class="stringliteral">&quot;xloc&quot;</span> #load tomogrpahy grid. <a class="code" href="structcell.html">cell</a> array</div>
<div class="line">load.ploc=#<span class="stringliteral">&quot;ploc&quot;</span> #load aperture reconstruction grid.</div>
<div class="line">load.floc=#<span class="stringliteral">&quot;floc&quot;</span> #load aperture fitting grid.</div>
<div class="line">load.cxx=#<span class="stringliteral">&quot;cxx^-1&quot;</span> #load laplacian or bihormonic <span class="keyword">operator</span>.</div>
<div class="line">#load.HXF=#<span class="stringliteral">&quot;HXF&quot;</span> #load propagation matrix from xloc to ploc along fit directions</div>
<div class="line">load.HXW=#<span class="stringliteral">&quot;HXW&quot;</span> #load propagation matrix from xloc to ploc along wfs directions</div>
<div class="line">#load.HA=#<span class="stringliteral">&quot;HA&quot;</span> #load propagation matrix from aloc to ploc</div>
<div class="line">load.GP=#<span class="stringliteral">&quot;GP&quot;</span> #load gradient <span class="keyword">operator</span> from ploc to wfs (<span class="keywordflow">for</span> tomography)</div>
<div class="line">load.GA=#<span class="stringliteral">&quot;GA&quot;</span> #load gradient <span class="keyword">operator</span> from aloc to wfs (to compute pseudo</div>
<div class="line">    #openloop gradients)</div>
<div class="line">load.GS0=0  #load gradient <span class="keyword">operator</span> from WFS opd to WFS grad.</div>
<div class="line">load.tomo=0 #load tomography reconstruction matrices</div>
<div class="line">load.fit=0  #load fitting matrices.</div>
<div class="line">load.W=0    #load aperture W0/W1 weighting matrix.</div>
<div class="line">load.i0=    #load wfs pixel intensity matrices.</div>
<div class="line">load.mvst=0 #load mvst intermediate matrices to avoid CBS</div>
<div class="line">load.mvm=   #load recon.MVM as a <a class="code" href="structcell.html">cell</a> array that converts gradients to actuator commands.</div>
<div class="line">load.mvmi=  #load tomography output of mvm control matrix assembly <span class="keywordflow">for</span> warm restart.</div>
<div class="line">load.mvmf=  #load <a class="code" href="recon__utils_8c.html#a168e09881164d7f61ac8e0620ec7135b">FitR</a> output of mvm control matrix assembly.</div>
<div class="line">load.ncpa=  #folder name: load NCPA surface saved during save.ncpa</div>
</div><!-- fragment --><p>Finally it overrides the tomography and DM fit algorithm to cholesky backsolve and disables cache of DM commands. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
