<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Multi-threaded Adaptive Optics Simulator: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi-threaded Adaptive Optics Simulator
   </div>
   <div id="projectbrief">A Fast End to End Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page10.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MAOS is a complete reimplementation of the algorithms in the original MCAO simulator LAOS, which was written in MATLAB language and suffer multi-threading limitations.</p>
<p>The motivation to develop this software is to create an adaptive optics simulator that runs fast, consumes less memory, and does the job without MATLAB, which is proprietary and has a large memory footprint. The code is written in C language with a function oriented design. MAOS is completely configurable through configuration files. It tries its best to check the configuration for any apparent errors or conflicts. The configuration files are very readable and easy to maintain. The final development goal is to make an efficient, easy to use, general purpose adaptive optics simulator to help the development of adaptive optics systems, particularly advanced, very high order systems for TMT and other ELTs.</p>
<p>Atmospheric turbulence is represented as one or multiple discrete screen(s) at different heights that evolves according to frozen flow with given wind velocity. The resulting aberrations are sensed by one or multiple natural guide star (NGS) or laser guide star (LGS) Shack-Hartmann wavefront sensor(s) (WFS). The sensors can be simulated as idealized wavefront gradient sensors, best Zernike fit tilt sensors, or a physical optic WFS using user specified pixel characteristics and a matched filter estimation algorithm. The laser guide star wavefront sensing model includes the impact of guide star elongation for a specified sodium layer profile and (an optional) polar coordinate CCD. The tomographic wavefront reconstruction then estimates the turbulence in one or several different heights from the pseudo open loop gradients measured by the WFS, using a computationally efficient implementation of a minimum variance reconstruction algorithm as described in [Ellerbroek, 2002]. These reconstructed turbulence screens are then fit to the actuators on one or several deformable mirrors (DMs) to achieve best possible correction over a specified field of view (FoV). Performance evaluation is done in terms of RMS wavefront error, Strehl ratio, and point spread function (PSFs) at a few science objects in the target FoV, which might be different from the FoV used for the fitting step. A range of additional specified features are implemented, such as telescope wavefront aberrations and the “split tomography” control algorithm.</p>
<p>This software is written in the C language (revision 99), with external dependent libraries of FFTW version 3 (www.fftw.org) and blas/lapack (www.netlib.org/lapack/). The code contains a local copy of the Cholmod (www.cise.ufl.edu/research/sparse/SuiteSparse/, to do Cholesky factorization, copied from suite-sparse). An optimized blas library such ATLAS, GOTO-BLAS, or Intel MKL is necessary to get good performance for Cholesky decompositions of the tomography and/or fitting matrix. Use &ndash;enable-mkl when running configure to download a redistributed copy of MKL.</p>
<p>A C99 compliant compiler is required to compile the code, such as GCC 4 or Intel C++ compiler. The code has been successfully compiled on GNU/Linux using GNU GCC and the Intel C++ compiler ICC (in C mode), and in MAC OS X 10.5 using the GCC compiler. For machines with Intel CPUs, the code generally runs faster when compiled with ICC and linked with MKL.</p>
<p>This software also contains two optional executable (drawdaemon, monitor) for plotting and job monitoring (jobs can be monitored on several different machines). These two executable requires GTK+ and the Cairo development and run-time library.</p>
<p>The multi-threading is achieved using Posix Threads (no MPI is implemented) or OpenMP. This parallelism works fairly well in multi-core, shared memory machines. For example, in a recently purchased desktop with Intel Core i5 quad-core processor at 2.66 GHz, the software (configured in a NFIRAOS split tomography mode with physical optics LGS and geometric best fit Zernike tilt NGS), compiled with Intel C++ compiler version 10, can run at 10 seconds per simulation time step with 1 thread and 3 seconds per time step with 4 threads. The same setup in a dual Intel W5590 server runs 7 seconds per simulation time step with 1 thread and 4 seconds per step with 2 threads. The scaling with number of cores is fairly good. The memory consumption in the NFIRAOS baseline case is about 2 G.</p>
<p>The code contains a few directories. The sys, math, lib, maos, and skyc directory. The library directories sys, math and lib contains routines that are not specific to the simulations and can be adopted by other purposes. The directory maos contains routines that are specific the adaptive optics simulations. The directory skyc contains routines for sky coverage postprocessing. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
