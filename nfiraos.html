<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Multi-threaded Adaptive Optics Simulator: Example: NFIRAOS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multi-threaded Adaptive Optics Simulator
   </div>
   <div id="projectbrief">A Fast End to End Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nfiraos.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example: NFIRAOS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following shows the content of nfiraos.conf, which is the baseline configuration of TMT NFIRAOS system</p>
<div class="fragment"><div class="line"><span class="preprocessor">#File nfiraos.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#This .conf file contains the complete configuration of TMT NFIRAOS System.  You</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#can copy this .conf to another file and modify it to model different systems or</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#choose different parameters. This file is loaded by maos automatically if \c -c</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#switch is not supplied. </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Notice: </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#All string must be quoted with &quot;&quot;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Vectors should be embraced by [].</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Anything following # in each line is treated as comment.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#The value of some key might be another .conf while, in which case the .conf</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#file is loaded automatically. like powfs.llt </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#defines simulation parameters.</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;sim.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Tilt surfaces. Each file contains a dmat array of surface map (NOT OPD)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#with the following key in header.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#dx,dy: the sampling along x and y direction, </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#ox,oy: the origin along x and y direction, </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#txdeg: the x tilt angle in degree wrt beam (90 is prep), </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#tydeg: the y tilt angle in degree wrt beam (90 is prep), </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#ftel: The telescope effective focal length, </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#fexit: the distance between the exit pupil and the focus, </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#fsurf: the distance between the M3 and the focus.</span></div>
<div class="line"><span class="preprocessor"></span>tsurf       = [] #[<span class="stringliteral">&quot;M3_PrintThrough_ZA0_AA180_YA45.bin&quot;</span>]</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#OPD surfaces. Each file contains a dmat array with the following key in header.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#dx: the sampling along x and y direction (must be the same)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#ox,oy: the origin along x and y direction</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#h: height of the surface from pupil.   </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Important: The OPD should cover more area (1/2 meter each side) than meta pupil for interpolation.</span></div>
<div class="line"><span class="preprocessor"></span>surf        = [] #surface OPD map. can be a list of file names.</div>
<div class="line"></div>
<div class="line">#AO type. </div>
<div class="line">include     = <span class="stringliteral">&quot;dm_dual.conf&quot;</span> #MCAO with dual DMs</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Atmospheric profile</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#atm=&quot;atm_srd.conf&quot; #TMT SRD Profile</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;atm_mk13n50p.conf&quot;</span> #Mauna Kea 13N 50%.</div>
<div class="line"></div>
<div class="line">#Wavefront sensor information.</div>
<div class="line">include     = <span class="stringliteral">&quot;wfs_lgs_ttf_tt.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Evaluation and fitting FoV information.</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;fov_iris.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Including configurations for reconstruction (tomo/fitting)</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;recon.conf&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#For debugging purpose</span></div>
<div class="line"><span class="preprocessor"></span>include     = <span class="stringliteral">&quot;dbg.conf&quot;</span></div>
</div><!-- fragment --><p>It includes the following files to define all the parameters. <code>"sim.conf"</code> to define some general parameters: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE sim.conf</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Contains common parameters to all setups. </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Telescope Aperture Configuration.</span></div>
<div class="line"><span class="preprocessor"></span>aper.d     = [30 3.6] #may contain one <span class="keywordflow">for</span> [d] or two numbers <span class="keywordflow">for</span> [d din]. d is</div>
<div class="line"><span class="preprocessor">              #outer diameter. din is optimal inner hole diameter.</span></div>
<div class="line"><span class="preprocessor"></span>aper.fnamp    = <span class="stringliteral">&quot;TMT_23cm6.bin&quot;</span> #The amplitude map contains a <a class="code" href="structcell.html">cell</a> array</div>
<div class="line"><span class="preprocessor">                  # of 2 elements.  The first element is 5x1 vector,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  # specifying sampling dx, dy, origin coordinate ox, oy and</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  # height (0).  The second element is a NxN square array.</span></div>
<div class="line"><span class="preprocessor"></span>aper.rotdeg   = 0     #Telescope pupil rotation CCW with respect to instrument. </div>
<div class="line">aper.pupmask  =       #Instrument pupil mask</div>
<div class="line"><span class="preprocessor">#defines simulation parameters.</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.seeds     = [1]   #random seeds. a list. 0 means random seed</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.start     = 0     #first time step. usually 0.</div>
<div class="line">sim.end       = 500   #last time step (exclusive)</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.closeloop = 1     <span class="preprocessor">#closed loop simulation</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt        = 1/800 #loop sampling time. (WFS integration time)</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dtrat_skip= 0     #drop frame every <span class="keyword">this</span> steps (<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt). 0 no drop.</div>
<div class="line">sim.zadeg     = 0     #zenith angle. moved from atm.zadeg</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.cachedm   = 1     #Caching DM commands to fine sampled grids that matches</div>
<div class="line"><span class="preprocessor">                  #the sampling of the WFS and/or science evaluation</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                  #grid. speed up simulation</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.fov       = 120   #The entire FoV diameter in arcsec. Only used during plotting.</div>
<div class="line">#Servo coefficients. There is two cycle delay.</div>
<div class="line">#A is command. e is error signal. at time step n, the command is updated by</div>
<div class="line"><span class="preprocessor">#A(n)=A(n-1)*apdm(0)+A(n-2)*apdm(1)+...+e(n-2)*ep</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.apdm      = [1 0] #<span class="keyword">this</span> is the <span class="keywordflow">default</span>. [0.5 0.5] is used in laos </div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.epdm      = 0.5   #error gain of high order loop. -1 to scan from 0.1 to 0.9</div>
<div class="line">sim.aldm      = 0     #Additional latency (<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt) of the high order loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs.dtrat+1+aldm)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.aplo      = [1 0] #<span class="keyword">this</span> is the <span class="keywordflow">default</span>. [0.5 0.5] is used in laos.</div>
<div class="line">sim.eplo      = [0.5] #error gain of ngs mode in split tomography</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.allo      = 0     #Additional latency (<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt) of the lo order loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs.dtrat+1+allo)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.fuseint   = 1     #use fused integrator. <span class="keywordflow">for</span> high and low order loop.</div>
<div class="line">sim.fcttm     = 20    #Cross over frequency of T/T split between DM and TTM*/         </div>
<div class="line"><span class="preprocessor">#Focus tracking gains.</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.fcfocus   = -1    #cross-over frequency of the focus LPF. lpfocus=2*pi*fc/fs where fs is AO sampling frequency. -1 means 1/10 of NGS frame rate.</div>
<div class="line">sim.mffocus   = 0     #method <span class="keywordflow">for</span> focus tracking. </div>
<div class="line"><span class="preprocessor">                  #0: disable focus update. </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #1: Focus tracking using closed loop gradients, for each LGS independently. (preferred)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #2: Focus tracking using closed loop graidnets, for common LGS focus only.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Uplink laser pointing servo</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.apupt     = [1 0] #[0.5 0.5] is used in laos.</div>
<div class="line">sim.epupt     = [0.5] #uplink integrator gain. </div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.alupt     = 0     #Additional latency (<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt) of the uplink loop. </div>
<div class="line">                  <span class="preprocessor">#End to end latency is (powfs.dtrat+1+alupt)*sim.dt</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.uptideal  = 0     #ideal correction on uplink (debugging)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Trombone zoom corrector for LGS</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.zoomdtrat = 266 #dtrat of the trombone controller (averager)</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.zoomgain  = 0.5 <span class="preprocessor">#gain of the trombone controller</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.zoomshare = 1</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#Other</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.skysim    = 0     #enable presimulation <span class="keywordflow">for</span> sky coverage.</div>
<div class="line">sim.parallel  = 1     #make the big loop parallel.</div>
<div class="line">sim.wspsd     =       #Telescope wind shake PSD input. Nx2. First column is freq</div>
<div class="line"><span class="preprocessor">              #in Hz, Second column is PSD in rad^2/Hz.</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.wsseq     = 1     #windshake sequency. different wsseq gives different realizations</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.ncpa_calib= 1     #calibrate NCPA. Only useful <span class="keywordflow">if</span> surf is not empty. </div>
<div class="line"><span class="preprocessor">              #1: use all DMs. 2: use only ground dm</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.ncpa_ttr  = 1     #Remove average t/t from NCPA <span class="keywordflow">for</span> WFS. Equivalent as repositioning WFS.</div>
<div class="line">sim.ncpa_thetax= []   #Coordinate <span class="keywordflow">for</span> NCPA calibration (arcsec). empty means follow evl.</div>
<div class="line">sim.ncpa_thetay= []   #Coordinate <span class="keywordflow">for</span> NCPA calibration (arcsec)</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.ncpa_wt    = []   <span class="preprocessor">#Weight for each point.</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.ncpa_hs    = []   #Height of star</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#for GPU</span></div>
<div class="line"><span class="preprocessor"></span>gpu.wfs       = 1     #Use GPU <span class="keywordflow">for</span> WFS sensing</div>
<div class="line">gpu.evl       = 1     #Use GPU <span class="keywordflow">for</span> Performance evaluation</div>
<div class="line">gpu.tomo      = 1     #Use GPU <span class="keywordflow">for</span> tomography</div>
<div class="line">gpu.fit       = 1     #Use GPU <span class="keywordflow">for</span> DM fitting</div>
<div class="line">gpu.lsr       = 1     #Use GPU <span class="keywordflow">for</span> LSR</div>
<div class="line">gpu.psf       = 1     #Use GPU to accumulate PSF.</div>
<div class="line">gpu.moao      = 1     #Use GPU <span class="keywordflow">for</span> MOAO</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if mvmport is nonzero connect to the mvm server at mvmhost:mvmport.</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.mvmhost   = <span class="stringliteral">&quot;localhost&quot;</span> #Where does the MVM server run</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.mvmport   = 0     #which port does the MVM server run. 0: disable mvm server/client</div>
<div class="line"><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.mvmsize   = 0     #number of gradients to send each time. 0 is all.</div>
<div class="line">sim.mvmngpu   = 0     #&gt;0: limit maximum number of gpus to use.      </div>
<div class="line"><span class="preprocessor">#For special purpose</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.noatm     = 0     #Disable atmosphere generation (to evaluate telescope errors).</div>
<div class="line">sim.evlol     = 0     #evaluate open loop performance only. don<span class="stringliteral">&#39;t do wfs/tomo/recon.</span></div>
<div class="line"><span class="stringliteral">sim.psfr      = 0     #Save PSF reconstruction telemetry.</span></div>
<div class="line"><span class="stringliteral">sim.ecnn      = 0     #Estimate WF covariance due to WFS noise cov Cnn.</span></div>
<div class="line"><span class="stringliteral">sim.wfsalias  = 0     #Study the wfs aliasing effect by project turbulence onto</span></div>
<div class="line"><span class="stringliteral">                  #the orthogonal of the DM vector space.</span></div>
<div class="line"><span class="stringliteral">sim.idealfit  = 0     #evaluation ideal fit error only. no wfs, no recon. (was fitonly)</span></div>
<div class="line"><span class="stringliteral">sim.idealtomo = 0     #ideal tomography without wfs (directly propagate from turbulence).</span></div>
<div class="line"><span class="stringliteral">sim.idealwfs  = 0     #Implements ideal WFS by only using turbulence in DM range. conflicts sim.wfsalias</span></div>
<div class="line"><span class="stringliteral">sim.idealevl  = 0     #Evaluate the performance only in DM range.</span></div>
<div class="line"><span class="stringliteral">sim.ahstfocus = 0     #&gt;0: the first plate scale mode creates no focus error on science</span></div>
<div class="line"><span class="stringliteral">                  #=1: do not null the focus offset of the first plate scale mode on LGS WFS (preferred)</span></div>
<div class="line"><span class="stringliteral">              #=2: null the focus effect of the first plate mode on LGS WFS gradients</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#Common atmospheric parameters</span></div>
<div class="line"><span class="stringliteral">atm.fractal   = 0     #Use fractal method to generate atmosphere screen. 0: fft method.</span></div>
<div class="line"><span class="stringliteral">atm.size      = [0 0] #size of atmosphere in meter. 0: automatic.</span></div>
<div class="line"><span class="stringliteral">atm.dx        = 1/64  #sampling of the atmosphere, match evl.dx</span></div>
<div class="line"><span class="stringliteral">atm.wdrand    = 1     #&gt;0: as additional seed to randomize wind direction </span></div>
<div class="line"><span class="stringliteral">atm.evolve    = 0     #evolve the atm in additional to frozen flow. developed</span></div>
<div class="line"><span class="stringliteral">              #for fractal since it does not wrap. Need twice as storage.</span></div>
<div class="line"><span class="stringliteral">atm.frozenflow=0      #using frozen flow screen (at OL. CL is always frozenflow)</span></div>
<div class="line"><span class="stringliteral">atm.ninit     = 17    #Initial size of the screen in fractal method. &gt;=2</span></div>
<div class="line"><span class="stringliteral">atm.share     = 1     #We share atmosphere by default.</span></div>
<div class="line"><span class="stringliteral">atmr.dx       = 0     #Sampling if tomography grid. 0 for automatic</span></div>
<div class="line"><span class="stringliteral">#CN2 Estimation</span></div>
<div class="line"><span class="stringliteral">cn2.pair      = []    #pairs of wfs to estimate cn2. empty to disable cn2 estimation.</span></div>
<div class="line"><span class="stringliteral">cn2.step      = 100   #do cn2 estimation every this time step</span></div>
<div class="line"><span class="stringliteral">cn2.reset     = 0     #reset the accumulated cn2 after every cn2step.</span></div>
<div class="line"><span class="stringliteral">cn2.hmax      = 18000 #maximum height to esimate at zenith</span></div>
<div class="line"><span class="stringliteral">cn2.saat      = 0.95  #subaperture area threashold to use in cn2 estimation</span></div>
<div class="line"><span class="stringliteral">cn2.keepht    = 1     #1: keep the layer ht specified by atmr.ht by</span></div>
<div class="line"><span class="stringliteral">              #interpolation. 2: do slodar directly on these layers.</span></div>
<div class="line"><span class="stringliteral">cn2.tomo      = 0     #update tomography parameters if non zero</span></div>
<div class="line"><span class="stringliteral">cn2.verbose   = 1     #output estimated r0, cn2 during simulation</span></div>
<div class="line"><span class="stringliteral">cn2.nhtomo    = 6     #number of layers to feed into reconstructor. only effective if keepht==0</span></div>
<div class="line"><span class="stringliteral">cn2.moveht    = 0     #move the ht used for reconstructor to near strongest layers. only</span></div>
<div class="line"><span class="stringliteral">                      #effective if keepht=0.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#set MOAO DMs parameters.</span></div>
<div class="line"><span class="stringliteral">moao.order    = [0]   #override this if moao is required.</span></div>
<div class="line"><span class="stringliteral">moao.cubic    = [1]</span></div>
<div class="line"><span class="stringliteral">moao.iac      = [0.3]</span></div>
<div class="line"><span class="stringliteral">moao.gdm      = [0.5]</span></div>
<div class="line"><span class="stringliteral">moao.stroke   = [inf]</span></div>
<div class="line"><span class="stringliteral">moao.actslave = [0]</span></div>
<div class="line"><span class="stringliteral">moao.lrt_ptt  = [0]</span></div>
<div class="line"><span class="stringliteral">moao.actstuck = [&quot;&quot;]</span></div>
<div class="line"><span class="stringliteral">moao.actfloat = [&quot;&quot;]</span></div>
<div class="line"><span class="stringliteral">moao.ar       = [1]</span></div>
<div class="line"><span class="stringliteral">#some common fov parameters</span></div>
<div class="line"><span class="stringliteral">evl.dx      = 1/64  #sampling of the aperture in simulation</span></div>
<div class="line"><span class="stringliteral">evl.psf     = [1] #output psf for this direction if psf is computed. 1 or nevl elements.</span></div>
<div class="line"><span class="stringliteral">evl.psfr    = [1] #output psf reconstruction telemetry for this direction.</span></div>
<div class="line"><span class="stringliteral">evl.hs      = [inf] #the height of the science object. normally infinity. </span></div>
<div class="line"><span class="stringliteral">evl.rmax    = 1   #max radial order in performance evaluation. </span></div>
<div class="line"><span class="stringliteral">           #1: includes piston/tip/tilt. 2: p/t/t/focus/astigmatism</span></div>
<div class="line"><span class="stringliteral">evl.tomo    = 0 #evaluate CL error for tomography</span></div>
<div class="line"><span class="stringliteral">evl.moao    = -1 #index into MOAO config in recon.conf</span></div>
<div class="line"><span class="stringliteral">evl.psfhist = 0 #output history of the psf (a lot of storage). </span></div>
<div class="line"><span class="stringliteral">evl.psfmean = 0 #output time averaged psf. for this number of psf&#39;</span>s along the</div>
<div class="line"><span class="preprocessor">        #way. 1: only save in the end. n: save cumulative average every</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #n steps (do not reset)</span></div>
<div class="line"><span class="preprocessor"></span>evl.psfol   = 1 #compute OL psf in additional to CL PSF. 0: disable 1: on axis</div>
<div class="line"><span class="preprocessor">            #direction only, 2: all directions and average them.</span></div>
<div class="line"><span class="preprocessor"></span>evl.psfngsr = 0 #<span class="keyword">remove</span> NGS modes from PSF in split tomography mode. </div>
<div class="line"><span class="preprocessor">            # 1: both normal psf and psf with ngsmod removal are saved.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # 2: only psf with ngs mode removed is computed.</span></div>
<div class="line"><span class="preprocessor"></span>evl.opdcov  = 0 #save covariance of opd <span class="keywordflow">for</span> directions where evl.psf==1.</div>
<div class="line"></div>
<div class="line">evl.wvl     = [1.25e-6 1.65e-6 2.2e-6]#wavelength to evaluat PSF or strehl</div>
<div class="line">evl.psfpttr = [0] #<span class="keyword">remove</span> p/t/t in wavefront OPD before computing PSF.</div>
<div class="line">evl.psfisim = 20  #time step to start psfmean/psfhist</div>
<div class="line">evl.psfgridsize = [] #FFT grid size <span class="keywordflow">for</span> psf computation <span class="keywordflow">for each</span></div>
<div class="line"><span class="preprocessor">             #wavelength. 0,1,or nwvl number of elements. 0:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">             #automatic. This determines the sampling of the computed</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">             #PSF. length matches evl.wvl</span></div>
<div class="line"><span class="preprocessor"></span>evl.psfsize = []    #size of the psf to output. The large PSF is cut to <span class="keyword">this</span></div>
<div class="line"><span class="preprocessor">            #size. Set to 1 to compute strehl only. 1 or nwvl number of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #elements(for each wvl)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#some common DM parameters that are usually the same for each DM. Can take either 1 or ndm values.</span></div>
<div class="line"><span class="preprocessor"></span>dm.guard  = [1]    #extra DM actuator rings in actuator grid. minimum of 2 <span class="keywordflow">for</span> cubic influence <span class="keyword">function</span>. changed to 1 on Aug 9, 2013</div>
<div class="line">dm.stroke = [inf]  #surface stroke in meter. opd is [-stroke stroke]</div>
<div class="line">dm.iastroke=[inf]  #surface inter-actuator stroke in meter. </div>
<div class="line">dm.iastrokefn=[]</div>
<div class="line">dm.cubic  = [1]    #1: cubic influence <span class="keyword">function</span>, with dm.iac as inter-actuator-coupling.</div>
<div class="line">dm.iac    = [0.3]  #inter-actuator-coupling coefficient.  </div>
<div class="line">dm.hist   = [0]    #output histogram of DM actuator commands.</div>
<div class="line">dm.histbin= [1e-7] #The bin size <span class="keywordflow">for</span> DM histogram computation.</div>
<div class="line">dm.histn  = [201]  #Total number of bins. odd number, centered around zero.</div>
<div class="line">dm.vmisreg= [0]    #vertical misregistration. not implemented yet.</div>
<div class="line">dm.hyst   = [<span class="stringliteral">&quot;&quot;</span>]   #File containing a matrix that describes the hysterisis. The matrix should have 3 rows, and multiple columns. Each column</div>
<div class="line"><span class="preprocessor">           #describe the parameters for a mode, and the rows are: 1) weight 2) alpha, 3) beta. See &quot;Hysteresis Modeling and</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">           #Simulation&quot; by Luc Gilles. Optionally the file may contain a header that defines stroke=a where a is surface p/v stroke</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">           #Concequently, alpha is scaled by a. The header may also contain alpha_power=b that describes how alpha varies when command</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">           #goes from [-a a]: alpha(v)=alpha*((a-v)/(2*a))^b where v is command.</span></div>
<div class="line"><span class="preprocessor"></span>dm.actfloat = [<span class="stringliteral">&quot;&quot;</span>] #file containing floating actuators. nx2 coordinate</div>
<div class="line">dm.actstuck = [<span class="stringliteral">&quot;&quot;</span>] #file containing stuck actuators. nx2 coordinate.</div>
<div class="line">dm.ar     = [1]    #DM aspect ratio. dy/dx spacing</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#All misregistrations/distortions are specified here</span></div>
<div class="line"><span class="preprocessor"></span>misreg.tel2wfs=[] #From telescope pupil (atmosphere) to WFS</div>
<div class="line">misreg.dm2wfs=[] <span class="preprocessor">#From DM to WFS</span></div>
<div class="line"><span class="preprocessor"></span>misreg.dm2sci=[] #From DM to science.</div>
<div class="line">misreg.pupil=[0 0]  #2 numbers only. Misregistration of pupil wrt to AO and instrument.</div>
</div><!-- fragment --><p><code>"dm_dual.conf"</code> to define the dual deformable mirrors </p>
<div class="fragment"><div class="line"><span class="preprocessor">#File dm_dual.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Deformable Mirror Information.</span></div>
<div class="line"><span class="preprocessor"></span>dm.order  = [60 60]   #The order of the system. 2 numbers <span class="keywordflow">for</span> two DMs.</div>
<div class="line">dm.ht     = [0 11200] #height conjugation in meter.</div>
<div class="line">dm.offset = [0 1/2]   #0: actuator is on subaperture edge. 1/2: actuator is on</div>
<div class="line"><span class="preprocessor">              #subaperture center.</span></div>
</div><!-- fragment --><p><code>"atm_mk13n50p.conf"</code> to define the turbulence profiles using the Mauna Kea 13N median seeing </p>
<div class="fragment"><div class="line"><span class="preprocessor">#File atm_mk13n50p.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Turbulence profile for Mauna Kea 13N median seeing condition provided by TMT</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#site testing group. DIMM/MASS results were Extrapolated to above ~50m</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#2010-12-14: Updated to fixed profile provided by Matthias Schoeck.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#2010-01-03: Some common parameters have been moved to sim.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">atm.r0z   = 0.186 #atm r0 at zenith</div>
<div class="line">atm.l0    = 30    #atm outer scale</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#atm.ht, atm.wt, atm.ws, atm.wsdeg must have the same length</span></div>
<div class="line"><span class="preprocessor"></span>atm.ht = [0 500 1000 2000 4000 8000 16000] </div>
<div class="line"><span class="preprocessor">       #turbulence screen height.</span></div>
<div class="line"><span class="preprocessor"></span>atm.wt = [0.4557    0.1295    0.0442    0.0506    0.1167    0.0926    0.1107]</div>
<div class="line"><span class="preprocessor">       #weight of each layer. (normalized Cn^2). sum to 1.</span></div>
<div class="line"><span class="preprocessor"></span>atm.ws = [5.6 5.77 6.25 7.57 13.31 19.06 12.14 ];</div>
<div class="line"><span class="preprocessor">       #wind speed to height atm.ht. updated on 2010-02-19. from tony on 2009-11</span></div>
<div class="line"><span class="preprocessor"></span>atm.wddeg = [0]  </div>
<div class="line"><span class="preprocessor">       #wind direction in degree. If wdrand=1, this will be irrelevant.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Reconstructor parameters</span></div>
<div class="line"><span class="preprocessor"></span>atmr.r0z = -1  #atm r0 at zenith. -1: matches atm.r0z</div>
<div class="line">atmr.l0  = -1  #atm outer scale.  -1: matches atm.l0</div>
<div class="line">atmr.ht  = [0 1000 2000 4000 8000 16000]#reconstructed screen height.</div>
<div class="line">atmr.wt  = [0.5248    0.1136    0.0416    0.1167    0.0926    0.1107]</div>
<div class="line"><span class="preprocessor">     #reconstructed screen weight. see atm.wt</span></div>
<div class="line"><span class="preprocessor"></span>atmr.os  = [2 2 2 2 1 1] #over sampling factor of XLOC over the sampling defined by</div>
<div class="line"><span class="preprocessor">             #actuator spacing.</span></div>
</div><!-- fragment --><p><code>"wfs_lgs_ttf_tt.conf"</code> to define the wavefront sensors. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE wfs_common.conf</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Gather options regarding WFS that are not specific to a certain telescope or AO implementation. The values are determined from best practice regarding SHWFS. Specific AO instrument may choose to override the values permanently or temporarily for testing purpose.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#The same value applies to LGS, NGS High, or NGS lo order WFS.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Most entry has only one number that will be duplicated for different powfs types.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">powfs.saat      = [0.3]  #threshold of relative area to turn off subaperture.</div>
<div class="line">powfs.neareconfile=[<span class="stringliteral">&quot;&quot;</span>] #file contains NEA <span class="keywordflow">for each</span> SA. takes precedence. File name takes same format as piinfile. in radian unit. (takes precedance)</div>
<div class="line">powfs.neasim    = [-1] # geometric only: nea in mas <span class="keywordflow">for</span> simulation. -1 to match nearecon (not neareconfile).</div>
<div class="line">powfs.neasimfile= [<span class="stringliteral">&quot;&quot;</span>] # read NEA used in simulation from file. Defined at  <a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt sampling rate, in radian. neasim must be -1</div>
<div class="line">powfs.neaphy    = [0]  # 1: use nea from matched <a class="code" href="filter_8c.html#aafaf3cf93da63d63bd5f43be060ffa9c" title="Does the servo filtering by calling filter_cl() or filter_ol()">filter</a> in geometric simulations.</div>
<div class="line">powfs.skip      = [0]  # don<span class="stringliteral">&#39;t use this WFS in reconstruction (useful only if .lo is not set)</span></div>
<div class="line"><span class="stringliteral">#The following only applies to physical optics WFS.</span></div>
<div class="line"><span class="stringliteral">powfs.phyusenea = [0]  # 1: force use specified nea_recon in reconstruction in physical optics mode.</span></div>
<div class="line"><span class="stringliteral">powfs.neaspeckle= [0]  # additional speckle noise equivalent angle in mas to be added to matched filter estimation of nea.</span></div>
<div class="line"><span class="stringliteral">powfs.radpixtheta=[0]  # CCD Pixel size along radiual direction.</span></div>
<div class="line"><span class="stringliteral">powfs.radgx     = [1]  # Create gx, gy along radial/azimuthal direction.</span></div>
<div class="line"><span class="stringliteral">powfs.fieldstop = [0]  # the field stop in arcsec. Only useful for high order NGS WFS.</span></div>
<div class="line"><span class="stringliteral">powfs.pixblur   = [0.3]# bluring of pixels in unit of pixtheta due to charge diffusion</span></div>
<div class="line"><span class="stringliteral">powfs.radrot  = [0]  #rotate OTF to do radial pixel 0: like laos. 1: rotate OTF. 1 is good for side launch to save memory.</span></div>
<div class="line"><span class="stringliteral">powfs.ncomp   = [0]  #specify FFT grid size in WFS sensor imaging. 0: automatic. </span></div>
<div class="line"><span class="stringliteral">powfs.pixoffx = [0]  #offset of psf center from pixel vertex.</span></div>
<div class="line"><span class="stringliteral">powfs.pixoffy = [0]  #offset of psf center from pixel vertex.</span></div>
<div class="line"><span class="stringliteral">powfs.i0scale = [0]  #scale sum of averaged image intensity generated using turbulence OTF to match normalized subaperture area. This is used to build matched filter.</span></div>
<div class="line"><span class="stringliteral">powfs.sigscale= [1]  #scale factor from the wfs.siglev to wfs.siglevsim for simulation. to simulate signal variation/mismatch</span></div>
<div class="line"><span class="stringliteral">powfs.bkgrnd  = [0]  #sky background in unit e/pixel/frame at sim.dt.</span></div>
<div class="line"><span class="stringliteral">powfs.bkgrndc = [1]  #background correction factor for powfs.bkgrnd. 1: DC component fully removed.</span></div>
<div class="line"><span class="stringliteral">powfs.bkgrndfn= [&quot;&quot;] #sky background/rayleigh backscatter image for each subaperture in each wfs. at sim.dt</span></div>
<div class="line"><span class="stringliteral">powfs.bkgrndfnc=[&quot;&quot;] #estimation of bkgrndfn that will be subtracted.</span></div>
<div class="line"><span class="stringliteral">powfs.embfac  = [2]  #embeding factor of complex pupil function to generate subaperture image using FFT method. keep at 2</span></div>
<div class="line"><span class="stringliteral">powfs.psfout  = [0]  #output complex psf core for sky coverage. only valid in split tomography, do ideal compensation of NGS modes.</span></div>
<div class="line"><span class="stringliteral">powfs.pistatout = [0] #output tip/tilt removed averaged psf for later #matched filter input</span></div>
<div class="line"><span class="stringliteral">powfs.pistatstc = [0] #shift pistat to center using fft method.</span></div>
<div class="line"><span class="stringliteral">powfs.pistatstart=[20]#first time step to start output pistat</span></div>
<div class="line"><span class="stringliteral">powfs.piinfile  = [&quot;&quot;]#pixel intensities input file prefix. Mainly used for NGS. If seed is 1, and pistatout=[0 1 1], the program outputs pistat_seed1_wfs[678].bin. Put here powfs.piinfile=[&quot;&quot; &quot;pistat_see1&quot; &quot;pistat_seed1&quot;] here and set pistatout=[0 0 0] to run physical optics NGS simulation. PSF must be centered.</span></div>
<div class="line"><span class="stringliteral">powfs.sninfile  = [&quot;&quot;]#speckle noise. not yet used</span></div>
<div class="line"><span class="stringliteral">powfs.phytype   = [1] #1: matched filter. 2:cog </span></div>
<div class="line"><span class="stringliteral">powfs.phytypesim= [-1]#physical optics type in simulation. -1 to match phytype</span></div>
<div class="line"><span class="stringliteral">#Advanced options for matched filter</span></div>
<div class="line"><span class="stringliteral">powfs.mtchcpl  = [1]  #use coupling between r/a measure error. 0: diagnalize.</span></div>
<div class="line"><span class="stringliteral">powfs.mtchcra  = [-1] #use constraint matched filter for azimuthal. -1: follow mtchcr</span></div>
<div class="line"><span class="stringliteral">powfs.mtchscl  = [-1] #scale subaperture image to have the same intensity as i0. -1: enables when sigscale!=1.</span></div>
<div class="line"><span class="stringliteral">powfs.mtchadp  = [0] #Using adaptive matched filter. Use cr when FWHM&gt;4 pix.</span></div>
<div class="line"><span class="stringliteral">powfs.cogthres = [1] #tCoG threshold, relative to noise</span></div>
<div class="line"><span class="stringliteral">powfs.cogoff   = [1] #tCoG offset to remove, relative to nois</span></div>
<div class="line"><span class="stringliteral">powfs.ncpa_method=[2]#Method to correct ncpa; 0: do nothing. 1: apply gradient offset. 2: apply bias when computing i0, should be more accurate than 1. </span></div>
<div class="line"><span class="stringliteral">powfs.moao     = [-1] #index into moao config. -1 mean no moao.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">powfs.dither   = [0]     #Dithering to update centroid gain or matched filter. </span></div>
<div class="line"><span class="stringliteral">powfs.dither_amp=[0.1]   #Dithering radius in unit of pixel size.</span></div>
<div class="line"><span class="stringliteral">powfs.dither_nskip=[20]  #Skip frames for uplink to be stable before PLL and statistics</span></div>
<div class="line"><span class="stringliteral">powfs.dither_npll=[240]  #Period for updating PLL</span></div>
<div class="line"><span class="stringliteral">powfs.dither_gpll=[0.5]  #Gain of PLL</span></div>
<div class="line"><span class="stringliteral">powfs.dither_nstat=[2400]#Period for updating statistics</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#some rarely used powfs</span></div>
<div class="line"><span class="stringliteral">powfs.safill2d=[1] #fill factor of lenslet, in 2-dimensions. Results in photon loss and larger spot.</span></div>
<div class="line"><span class="stringliteral">powfs.saspherical=[0]  #spherical aberration at best focus of each lenslet in nm RMS.</span></div>
<div class="line"><span class="stringliteral">powfs.safocuspv=[0] #focus error for each subaperture in nm p/v.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#signal level at 800 Hz for fully illuminated subaperture. </span></div>
<div class="line"><span class="stringliteral">wfs.siglev = [] #if set, powfs.siglev must be set to empty.</span></div>
<div class="line"><span class="stringliteral">#concatenated lists of wavelength weighting.</span></div>
<div class="line"><span class="stringliteral">wfs.wvlwts = [] #if set, powfs.wvlwts must be set to empty.</span></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="preprocessor">#FILE wfs_lgs_tt_ttf.conf</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Contains 6 LGS in a pentagon at 70&quot; diameter by default.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#powfs is type of wfs.</span></div>
<div class="line"><span class="preprocessor"></span>include=wfs_common.conf</div>
<div class="line">powfs.order   = [0 2 1]  # number of sa in one dimension. 0 to match ground DM order.</div>
<div class="line">powfs.dx    = [1/64 1/16 1/16] #sampling of opd in each subaperture.  NGS</div>
<div class="line"><span class="preprocessor">                     #performs pretty good with 1/16 sampling.</span></div>
<div class="line"><span class="preprocessor"></span>powfs.hs    = [90e3 inf inf] #height of the guide star. 90e3 <span class="keywordflow">for</span> LGS. inf <span class="keywordflow">for</span> NGS.</div>
<div class="line">powfs.fnllt = [<span class="stringliteral">&quot;llt_CL.conf&quot;</span> <span class="stringliteral">&quot;&quot;</span> <span class="stringliteral">&quot;&quot;</span>] # configuration of laser launch telescope. </div>
<div class="line">powfs.trs   = [1 0 0]    #tilt <span class="keyword">remove</span> flag. 1 <span class="keywordflow">for</span> LGS. 0 <span class="keywordflow">for</span> NGS</div>
<div class="line">powfs.dfrs  = [0 0 0]    #differential focus removal flag. 1 <span class="keywordflow">for</span> LGS. 0 <span class="keywordflow">for</span> NGS</div>
<div class="line">powfs.lo    = [0 1 1]    #low order. 1 <span class="keywordflow">for</span> T/T or T/T/F WFS. 0 <span class="keywordflow">for</span> LGS and high order NGS</div>
<div class="line"></div>
<div class="line">powfs.nearecon= [20 0.11 0.055] # noise equivalent angle in mas <span class="keywordflow">for</span> reconstruction</div>
<div class="line">powfs.gtype_sim = [0 1 1] #geometric gradient <span class="keywordflow">for</span> simulation. </div>
<div class="line"><span class="preprocessor">                          #0: gtilt (averaging gradient). </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">              #1: ztilt (best zernike tip/tilt fit)</span></div>
<div class="line"><span class="preprocessor"></span>powfs.gtype_recon = [0 1 1] #gtype used <span class="keywordflow">for</span> reconstructor. see gtype_sim.</div>
<div class="line">#Physical optics options.</div>
<div class="line">powfs.pixtheta= [0.5 0.0113 0.0057] #CCD Pixel size in arcsec.</div>
<div class="line">powfs.pixpsa  = [6 8 8]  #number of pixels per subaperture or along azimuthal</div>
<div class="line"><span class="preprocessor">             #direction if radpix is nonzero. 6 is good for LGS.</span></div>
<div class="line"><span class="preprocessor"></span>powfs.radpix  = [16 0 0] #<span class="keywordflow">if</span> non zero, radial pixel along radial direction. </div>
<div class="line"><span class="preprocessor">                     #If negative, figure out appropriate size automatically.</span></div>
<div class="line"><span class="preprocessor"></span>powfs.rne     = [3 5 5] #read out noise in e-</div>
<div class="line">powfs.nwvl      = [1 2 2]#number of wavelength. 1 <span class="keywordflow">for</span> LGS, 2 <span class="keywordflow">for</span> J+H NGS</div>
<div class="line">powfs.wvl       = [0.589e-6 1.25e-6 1.65e-6 1.25e-6 1.65e-6] #concatenated list of wavelength</div>
<div class="line">powfs.wvlwts    = [1 0.5 0.5 0.5 0.5]#may be overriden by wfs.wvlwts</div>
<div class="line"></div>
<div class="line">powfs.phystep  = [0 -1 -1] #time step to start doing physical optics. -1 to</div>
<div class="line"><span class="preprocessor">               #disable physical optics.</span></div>
<div class="line"><span class="preprocessor"></span>powfs.mtchcr   = [1 0 0] #use constraint matched <a class="code" href="filter_8c.html#aafaf3cf93da63d63bd5f43be060ffa9c" title="Does the servo filtering by calling filter_cl() or filter_ol()">filter</a></div>
<div class="line">powfs.mtchstc  = [0 1 1] #shift peak in the <span class="keywordtype">short</span> exposure image i0 to center <span class="keyword">using</span> fft before building matched <a class="code" href="filter_8c.html#aafaf3cf93da63d63bd5f43be060ffa9c" title="Does the servo filtering by calling filter_cl() or filter_ol()">filter</a>.</div>
<div class="line">powfs.noisy    = [1 1 1] #noisy detector in simulation.</div>
<div class="line">powfs.dtrat    = [1 1 1] #sampling period relative to 1/<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.dt (1/800)</div>
<div class="line">powfs.siglev   = [900 900 900]   #siglev at always 800Hz <span class="keywordflow">for</span> fully illuminated subaps (Circle and 1/4 of a circle <span class="keywordflow">for</span> TT or TTF WFS). may be overriden by wfs.siglev</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">wfs.thetax=[0 0  -33.287 -20.5725  20.5725 33.287 -10 10 10]#x coordinate in arcsecond unit.</div>
<div class="line">wfs.thetay=[0 35 10.8156 -28.3156 -28.3156 10.8156 0 10 -10]#y coordinate in arcsecond unit.</div>
<div class="line">wfs.powfs =[0 0 0 0 0 0 1 2 2] #type of powfs <span class="keywordflow">for each</span> wfs.</div>
<div class="line"></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="preprocessor">#File llt_CL.conf for center launch</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Specifying laser launch telescope and sodium layer parameters.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Notice that when the options are overriden else, the key must be specified like</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#powfs0_llt.d=0.4</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">llt.d=0.4      #laser launch telescope diameter in meter.</div>
<div class="line">llt.widthp=0.6 #Gaussian beam width. 60 percent of d</div>
<div class="line">llt.ttrat=5.155#ratio of LLT uplink jitter to downlink jitter = 1/(2*D_M2/M1). Need to determine the direction.</div>
<div class="line">llt.fnamp=<span class="stringliteral">&quot;&quot;</span>   #Pupil amplitude map. Overrides widthp</div>
<div class="line">llt.fnsurf=<span class="stringliteral">&quot;&quot;</span>  #Pupil surface error of each LLT. <a class="code" href="structcell.html">cell</a> array of 2-d <a class="code" href="structmap__t.html" title="OPD or Amplitude map defined on square/rectangular grids.">map_t</a> arrays.</div>
<div class="line">llt.<a class="code" href="structmap__t.html#ac7a7ed6823814624bbe926ba3dadd79a" title="Origin in x.">ox</a>=[0]     #LLT x coordinate. single number or match # of wfs belongs to</div>
<div class="line">          #<span class="keyword">this</span> powfs.</div>
<div class="line">llt.oy=[0]     #LLT y coordinate.</div>
<div class="line">llt.misreg=[0 0]#misregistration during ray tracing (<span class="keywordflow">for</span> testing purpose)</div>
<div class="line">llt.fnrange=<span class="stringliteral">&quot;&quot;</span> #additional change of sodium height <span class="keywordflow">for</span> LGS. in meter. </div>
<div class="line"><span class="preprocessor">          #matrix of size nsim*1 or nsim*nLGS.</span></div>
<div class="line"><span class="preprocessor"></span>llt.fnprof=<span class="stringliteral">&quot;NapMean.bin&quot;</span> #sodium profile to build LGS elongation ETF. can</div>
<div class="line"><span class="preprocessor">               #contain 2 or more columns. The first column is the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">               #altitude, the second and the rest columns are the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">               #strength of sodium layer that sum to the scaling</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">               #factor of signal level, normally 1.</span></div>
<div class="line"><span class="preprocessor"></span>llt.smooth = 1 #2010-07-21: smooth sodium profile. newly introduced.</div>
<div class="line">llt.colprep= 0 #which column of the profiles to use in matched <a class="code" href="filter_8c.html#aafaf3cf93da63d63bd5f43be060ffa9c" title="Does the servo filtering by calling filter_cl() or filter_ol()">filter</a>.</div>
<div class="line">llt.colsim = 0 #which column of the profiles to start to use in simulation.</div>
<div class="line">llt.colsimdtrat=0 #every coldsimtrat to increment to next column during</div>
<div class="line"><span class="preprocessor">               #simulation and update etf. 0 means not updating.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#For side launch, uncomment and put the following in your override .conf file</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#SL_6</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#powfs.radpix=[30 0 0]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#llt.ox=[3.2618  -10.6046  -13.8664   -3.2618   10.6046   13.8664]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#llt.oy=[14.1284    9.8890   -4.2394  -14.1284   -9.8890    4.2394]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#powfs.ncomp=[128 0 0]#128 is faster than 124 by many times.</span></div>
</div><!-- fragment --><p><code>"fov_iris.conf"</code> to define the science fov for performance evaluation with IRIS. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE evl_iris.conf Contains performance evaluation direction defined for TMT</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#NFIRAOS IRIS Instrument which has 17x17 square FoV.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#performance evaluation directions.</span></div>
<div class="line"><span class="preprocessor"></span>evl.thetax  = [0 8.5 0 -8.5 0 8.5 -8.5 -8.5 8.5]#x coordinate in arcsec</div>
<div class="line">evl.thetay  = [0 0 8.5 0 -8.5 8.5 8.5 -8.5 -8.5]#y coordinate in arcsec</div>
<div class="line">evl.wt      = [4/9 1/9 1/9 1/9 1/9 1/36 1/36 1/36 1/36] #weighting to compute</div>
<div class="line"><span class="preprocessor">                        #field average wavefront error.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#DM Fitting directions </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#Circular, 30 as to better sharpen the NGS to get good sky coverage.</span></div>
<div class="line"><span class="preprocessor"></span>fit.thetax=[0  15  10.6066    0  -10.6066  -15 -10.6066   -0   10.6066]</div>
<div class="line">fit.thetay=[0  0   10.6066   15   10.6066    0 -10.6066  -15  -10.6066]</div>
<div class="line">fit.wt =   [1/2 1/12 1/24 1/12 1/24 1/12 1/24 1/12 1/24]</div>
</div><!-- fragment --><p><code>"recon.conf"</code> to define the parameters about turbulence reconstruction and DM fitting </p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE recon.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#The parameters for generation reconstruction</span></div>
<div class="line"><span class="preprocessor"></span>recon.alg       = 0 #0: MVR. 1: LSR</div>
<div class="line">recon.glao      = 0 #1: average gradient from wfs of same type (GLAO).</div>
<div class="line">recon.split     = 1 #0: integrated reconstruction. 1: ad hoc Split. 2: mvst (only <span class="keywordflow">if</span> recon.alg==0)</div>
<div class="line">recon.mvm       = 0 <span class="preprocessor">#1: Assemble control matrix directly. 1: use warm restart in cg from neighboring actuators. 2: disable warm restart.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#The parameters for minimum variance tomography reconstruction, which is</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#composed of a turbulence tomography step and a DM fitting step.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#Turbulence tomography reconstruction information.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">tomo.assemble   = 0 #1: Assemble tomography matrix.  0: don<span class="stringliteral">&#39;t assemble. 0 is</span></div>
<div class="line"><span class="stringliteral">            #fast for CG. automatically set to 1 in CBS mode</span></div>
<div class="line"><span class="stringliteral">tomo.predict    = 0 #prediction through modified ray tracing direction in tomo (testing)</span></div>
<div class="line"><span class="stringliteral">tomo.tikcr      = 1e-9#tikhonov regularization. Necessary if tomo.alg=0</span></div>
<div class="line"><span class="stringliteral">tomo.svdthres   = 1e-9 #threshold of SVD inversion. 1e-9 for GLAO. 2e-4 for BGS?</span></div>
<div class="line"><span class="stringliteral">tomo.piston_cr  = 0 #single point piston constraint in tomography. degrads</span></div>
<div class="line"><span class="stringliteral">            #fdpcg. does not help cg or cbs</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tomo.alg        = 1 #Tomography algorithm. 0: cholesky backsubstitution (CBS) on full #matrix</span></div>
<div class="line"><span class="stringliteral">            #1: Conjugate Gradient (CG). 2: SVD Inversion.</span></div>
<div class="line"><span class="stringliteral">tomo.bgs        = 0 #block Gauss Seidel method</span></div>
<div class="line"><span class="stringliteral">tomo.precond    = 0 #Tomography CG preconditioning. 0: no precondition. 1: Fourier Domain PCG</span></div>
<div class="line"><span class="stringliteral">tomo.maxit      = 0 #max iterations in CG. 0 is default: 30 for CG, 3 for FDPCG (tomo.precond=1) x10 in non warm restart mode</span></div>
<div class="line"><span class="stringliteral">tomo.minwt      = 0.01 #minimum layer weight allowed. if less than this will force to this.</span></div>
<div class="line"><span class="stringliteral">tomo.square     = 0 #1: using square grid in tomography (xloc)</span></div>
<div class="line"><span class="stringliteral">tomo.cgthres    = 1 #Repeat cg if residual is not reached (only used in MVM assemble in gpu)</span></div>
<div class="line"><span class="stringliteral">#The following split_* options are only used in ad hoc split tomography</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_wt    = 1 #weighting method to remove ngs modes from lgs DM commands.</span></div>
<div class="line"><span class="stringliteral">                    #1: use NGS gradient reconstruction weighting, 2:use</span></div>
<div class="line"><span class="stringliteral">                    #aperture evaluation weighting, 3: identity weighting.</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_idealngs = 0 #apply ideal NGS mode correction. for skycoverage pre-simulation</span></div>
<div class="line"><span class="stringliteral">tomo.ahst_ttr      = 0 #remove tip/tilt on each DM. generally not necessary.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tomo.cone     = 1 #1: using cone coordinate for tomography grid. keep at 1.</span></div>
<div class="line"><span class="stringliteral">tomo.cxx      = 0 #method to compute Cxx^-1. 0: bihormonic approx. 1: inverse psd. 2: fractal</span></div>
<div class="line"><span class="stringliteral">tomo.cxxscale = 1 #scale the Cxx^-1 term.</span></div>
<div class="line"><span class="stringliteral">tomo.guard    = 1 #rings of padding in generating reconstruction grid, not too small, not too large.</span></div>
<div class="line"><span class="stringliteral">tomo.pos      = 2 #over sampling ratio of ploc grid over actuator grid</span></div>
<div class="line"><span class="stringliteral">tomo.nxbase   = 0 #Each layer xloc grid size is tomo.os*tomo.nxbase is not zero. same for ploc.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tomo.cubic    = 0 #cubic influence function in tomography (testing)</span></div>
<div class="line"><span class="stringliteral">tomo.iac      = 0 #inter-actuator-coupling in cubic influence function (testing)</span></div>
<div class="line"><span class="stringliteral">tomo.ninit    = 5 #Initial size of the screen in fractal method. &gt;=2</span></div>
<div class="line"><span class="stringliteral">tomo.psol     = 1 #Use pseudo open loop gradients in MVR. keep at 1.</span></div>
<div class="line"><span class="stringliteral">tomo.splitlrt = 0 #1: use LGS low rank terms in split tomography. to 0 on 2013/1/15</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#DM Fitting</span></div>
<div class="line"><span class="stringliteral">fit.tikcr     = 1e-7 #tikhonov regularization. 1.e-9 is not enough.</span></div>
<div class="line"><span class="stringliteral">fit.svdthres  = 2e-4 #threshold of SVD inversion</span></div>
<div class="line"><span class="stringliteral">fit.actslave  = 1 #actuators that are weakly coupled are slaved to active ones during DM fitting</span></div>
<div class="line"><span class="stringliteral">fit.actinterp = 0 #Interpolate weakly coupled actuators from activeo nes.</span></div>
<div class="line"><span class="stringliteral">fit.lrt_piston= 1 #piston constraint</span></div>
<div class="line"><span class="stringliteral">fit.lrt_tt    = 1 #Tip/tilt constraint (2 dm system only). 0: no. 2: differential</span></div>
<div class="line"><span class="stringliteral">          #tilt on two DMs. 1: upper DM tt constraint.</span></div>
<div class="line"><span class="stringliteral">fit.assemble  = 1 #1: assemble fit matrix. fast for fit.</span></div>
<div class="line"><span class="stringliteral">fit.alg       = 1 #Fitting algorithm. see tomo.alg</span></div>
<div class="line"><span class="stringliteral">fit.bgs       = 0 #block Gauss Seidel method</span></div>
<div class="line"><span class="stringliteral">fit.precond   = 0 #CG preconditioning. see tomo.precond</span></div>
<div class="line"><span class="stringliteral">fit.maxit     = 0 #max iterations in CG. 0 is default: 4. x10 in non warm restart mode</span></div>
<div class="line"><span class="stringliteral">fit.square    = 0 #use square grid on DM grid and ploc</span></div>
<div class="line"><span class="stringliteral">fit.hs        = [inf] #the height of the science object to optimize DM fitting with. normally infinity</span></div>
<div class="line"><span class="stringliteral">fit.pos       = -1 #over sampling ratio of floc grid over actuator grid. -1: inherits tomo.pos by default.</span></div>
<div class="line"><span class="stringliteral">fit.wfs       = [] #include these wfs in fitting directions</span></div>
<div class="line"><span class="stringliteral">fit.wfswt     = [] #the wt of these wfs for fitting.</span></div>
<div class="line"><span class="stringliteral">fit.cachedm   = 1  #cache DM command onto a grid matched with floc.</span></div>
<div class="line"><span class="stringliteral">fit.cachex    = 0  #cache x on xloc to non-cone coordinate. no speed up</span></div>
<div class="line"><span class="stringliteral">#Parameters for least square reconstructor follows tomography parameter.</span></div>
<div class="line"><span class="stringliteral">lsr.tikcr     = 1e-2</span></div>
<div class="line"><span class="stringliteral">lsr.svdthres  = 1e-5</span></div>
<div class="line"><span class="stringliteral">lsr.fnreg     = #File name for regularization. has to be sparse cell array of ndm*ndm. </span></div>
<div class="line"><span class="stringliteral">lsr.actslave  = 1</span></div>
<div class="line"><span class="stringliteral">lsr.bgs       = 0</span></div>
<div class="line"><span class="stringliteral">lsr.alg       = 2</span></div>
<div class="line"><span class="stringliteral">lsr.maxit     = 0 #max iterations in CG. 0 is default: 30. x10 in non warm restart mode.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#The misregistration/distortion model to be used in WFE reconstruction</span></div>
<div class="line"><span class="stringliteral">recon.misreg_tel2wfs=[]</span></div>
<div class="line"><span class="stringliteral">recon.misreg_dm2wfs=[]</span></div>
<div class="line"><span class="stringliteral">recon.misreg_dm2sci=[]</span></div>
</div><!-- fragment --><p><code>"dbg.conf"</code> to define debugging and saving/loading geometry and telemetry. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#FILE dbg.conf</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">###The following are parameters used for debugging</span></div>
<div class="line"><span class="preprocessor"></span>dbg.psol=0      #use dm command 1 frame in the future to form pseudo open loop</div>
<div class="line"><span class="preprocessor">            #gradients (RTC scheme). Tested ok.</span></div>
<div class="line"><span class="preprocessor"></span>dbg.atm   = 0   #test special atmosphere. 1: tip/tilt. 2: diff focus. -1: use power of -4 instead of -11/3.</div>
<div class="line"></div>
<div class="line">dbg.wamethod=0  #0: Use mod on dm. 1: use mod on science when tomo.ahst_wt=2</div>
<div class="line">dbg.mvstlimit=0 #limit MVST modes to the number <span class="keywordflow">if</span> none zero</div>
<div class="line">dbg.annular_W=0</div>
<div class="line">dbg.tomo_maxit=[]#<span class="keywordflow">if</span> not empty, will study these maxits in open loop</div>
<div class="line">dbg.tomo_hxw=0  #1: force use hxw</div>
<div class="line">dbg.ecovxx=0    #output ecovxx used to generate ecov.</div>
<div class="line">dbg.useopdr=0   #use opdr. (deprecated)</div>
<div class="line">dbg.usegwr=0    #GA/GX method. 0: GP, 1: GS0</div>
<div class="line">dbg.cmpgpu=0    #1: make cpu code follow GPU implementation.</div>
<div class="line">dbg.pupmask=0   #pupil mask (<span class="keywordflow">for</span> ngs wfs, within LGS volume)</div>
<div class="line">dbg.wfslinearity=-1#Study the linearity/noise <span class="keyword">property</span> of pixel processing algorithms of <span class="keyword">this</span> wfs.</div>
<div class="line">dbg.nocgwarm=0    #disable warm restart in cg.</div>
<div class="line">dbg.deltafocus=0 #use delta focus between science and NGS estimated from opdr.</div>
<div class="line">dbg.dmfullfov=0 #let DM cover full FoV (<a class="code" href="sim_8c.html#ab5fd8ff2c1fe7a6270dad89ec5da4873" title="Closed loop simulation main loop.">sim</a>.fov)</div>
<div class="line">dbg.tomo=0   <span class="preprocessor">#debug tomography in gpu</span></div>
<div class="line"><span class="preprocessor"></span>dbg.fit=0    #debug fitting in gpu</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#For plotting</span></div>
<div class="line"><span class="preprocessor"></span>plot.setup=0 #plot aperture,powfs,recon grids, etc.</div>
<div class="line">plot.atm=0   #plot atmosphere</div>
<div class="line">plot.run=0   #plot wfs opd, gradients, DM opd, science opd, etc.</div>
<div class="line">plot.opdx=0  #plot turbulence projeced to xloc.</div>
<div class="line">plot.all=0   #enables plot.setup, plot.atm, and plot.run</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#The saved files can be loaded with mex routine &quot;read&quot; in MATLAB.</span></div>
<div class="line"><span class="preprocessor"></span>save.extra=1 #Save extra results, namely clep, olep, cleNGSmp, etc</div>
<div class="line">save.all=0   #saves everything below except gcov. mainly <span class="keywordflow">for</span> debugging</div>
<div class="line">save.setup=0 #save the data structs prepared during setup in subfolder <span class="stringliteral">&quot;setup&quot;</span>.</div>
<div class="line">         #They Can be loaded back in future simulation.</div>
<div class="line">save.recon=0 #save reconstructor. big matrices.</div>
<div class="line">save.mvst=0  #save mvst intermediate matrices in preparation to load later.</div>
<div class="line">#Run time saving:</div>
<div class="line">save.atm =0  #save atmosphere</div>
<div class="line">save.run =0  #save run time information, also enables save.dmreal,gradcl,gradpsol</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#The following four options takes 1) scalar values of 0 or 1 where 1 means all</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#wfs. or 2) vector values equal to the number of wfs. In the vector case, 1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#means output, 0 means no output.</span></div>
<div class="line"><span class="preprocessor"></span>save.ints=0   #save wfs subaperture images (images). (read above)</div>
<div class="line">save.grad=0   #save wfs gradients (also enabled by save.run)(read above)</div>
<div class="line">save.wfsopd=0 #save wfs OPDs (read above)</div>
<div class="line">save.gradgeom=0#save geometric grads in physical optics simulations (read above)</div>
<div class="line"></div>
<div class="line">save.evlopd=0 #save evaluation directions opd every <span class="keyword">this</span> time step <span class="keywordflow">if</span> &gt;0. since 2011-02-07</div>
<div class="line">save.opdr=0   #save reconstructed atmosphere. </div>
<div class="line">save.opdx=0   #save atmosphere propagated to reconstruction grid.</div>
<div class="line">save.dm=0 #   total DM commands effective. including tip/tilt.(implicit <span class="keywordflow">if</span> save.run=1)</div>
<div class="line">#special run time saving that need extra computation.</div>
<div class="line">save.gcovp=100#save the gcov every 100 steps to different files.</div>
<div class="line">save.gcov=[]  #output covariance of psol gradient. <span class="keyword">set</span> to [1 3 2 5] to output</div>
<div class="line">          #covariance between wfs 1 and 3, 2 and 5 drawdaemon is used to <span class="keywordflow">do</span></div>
<div class="line">          #the plotting.</div>
<div class="line">save.mvmi=0   #save tomography output of mvm control matrix assembly <span class="keywordflow">for</span> warm restart.</div>
<div class="line">save.mvmf=0   #save <a class="code" href="recon__utils_8c.html#a168e09881164d7f61ac8e0620ec7135b" title="Apply fit right hand side matrix in CG mode without using assembled matrix.">FitR</a> output of mvm control matrix assemble</div>
<div class="line">save.mvm=0    #save MVM control matrix</div>
<div class="line">load.atm=#<span class="stringliteral">&quot;atm.fn&quot;</span> #load atmosphere. <a class="code" href="structcell.html">cell</a> array of <span class="keywordtype">double</span> number arrays. The</div>
<div class="line">     #sampling must match the key atm.dx in atm_*.conf</div>
<div class="line">load.locs=#<span class="stringliteral">&quot;aper_locs&quot;</span> #load aperture grid</div>
<div class="line">load.aloc=#<span class="stringliteral">&quot;aloc&quot;</span> #load DM grid</div>
<div class="line">load.xloc=#<span class="stringliteral">&quot;xloc&quot;</span> #load tomogrpahy grid. <a class="code" href="structcell.html">cell</a> array</div>
<div class="line">load.ploc=#<span class="stringliteral">&quot;ploc&quot;</span> #load aperture reconstruction grid.</div>
<div class="line">load.floc=#<span class="stringliteral">&quot;floc&quot;</span> #load aperture fitting grid.</div>
<div class="line">load.cxx=#<span class="stringliteral">&quot;cxx^-1&quot;</span> #load laplacian or bihormonic <span class="keyword">operator</span>.</div>
<div class="line">load.HXF=#<span class="stringliteral">&quot;HXF&quot;</span> #load propagation matrix from xloc to ploc along fit directions</div>
<div class="line">load.HXW=#<span class="stringliteral">&quot;HXW&quot;</span> #load propagation matrix from xloc to ploc along wfs directions</div>
<div class="line">load.HA=#<span class="stringliteral">&quot;HA&quot;</span> #load propagation matrix from aloc to ploc</div>
<div class="line">load.GP=#<span class="stringliteral">&quot;GP&quot;</span> #load gradient <span class="keyword">operator</span> from ploc to wfs (<span class="keywordflow">for</span> tomography)</div>
<div class="line">load.GA=#<span class="stringliteral">&quot;GA&quot;</span> #load gradient <span class="keyword">operator</span> from aloc to wfs (to compute pseudo</div>
<div class="line">    #openloop gradients)</div>
<div class="line">load.GS0=0  #load gradient <span class="keyword">operator</span> from WFS opd to WFS grad.</div>
<div class="line">load.tomo=0 #load tomography reconstruction matrices</div>
<div class="line">load.fit=0  #load fitting matrices.</div>
<div class="line">load.W=0    #load aperture W0/W1 weighting matrix.</div>
<div class="line">load.i0=0   #load wfs pixel intensity matrices.</div>
<div class="line">load.mvst=0 #load mvst intermediate matrices to avoid CBS</div>
<div class="line">load.mvm=   #load recon.MVM as a <a class="code" href="structcell.html">cell</a> array that converts gradients to actuator commands.</div>
<div class="line">load.mvmi=  #load tomography output of mvm control matrix assembly <span class="keywordflow">for</span> warm restart.</div>
<div class="line">load.mvmf=  #load <a class="code" href="recon__utils_8c.html#a168e09881164d7f61ac8e0620ec7135b" title="Apply fit right hand side matrix in CG mode without using assembled matrix.">FitR</a> output of mvm control matrix assembly.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
