<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>maos-1.2.0: lib/bin.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="/home/lianqiw/work/programming/aos/doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">maos-1.2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bin_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lib/bin.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines our custom file format .bin or zipped .bin.gz and the basic IO functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0016d90662ca4190e978ebcd93f3eb5d"></a><!-- doxytag: member="bin.c::FLUSH_OUT" ref="a0016d90662ca4190e978ebcd93f3eb5d" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FLUSH_OUT</b></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a3460abaa987907e837b1a0c7ff627034">procfn</a> (const char *fn, const char *mod, const int defaultgzip)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the input file name and return file names that can be open to read/write.  <a href="#a3460abaa987907e837b1a0c7ff627034"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55e5dc1b9fd29f858d152f3194dd1d22"></a><!-- doxytag: member="bin.c::zfexist" ref="a55e5dc1b9fd29f858d152f3194dd1d22" args="(const char *format,...)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>zfexist</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a413945d9b9ed2b96159910115707a7ad"></a><!-- doxytag: member="bin.c::zftouch" ref="a413945d9b9ed2b96159910115707a7ad" args="(const char *format,...)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>zftouch</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a261bd3b157566d437aca1aa447ee4b8b"></a><!-- doxytag: member="bin.c::PNEW" ref="a261bd3b157566d437aca1aa447ee4b8b" args="(lock)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>PNEW</b> (lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a79716681dc6107dcc0e471b36ee2a00d"></a><!-- doxytag: member="bin.c::zfdopen" ref="a79716681dc6107dcc0e471b36ee2a00d" args="(int sock, char *mod)" -->
file_t *&#160;</td><td class="memItemRight" valign="bottom"><b>zfdopen</b> (int sock, char *mod)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a3d9545eb7bf658ee050828326040278c">zfopen</a> (const char *fn, char *mod)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the file and return a file_t struct that either contains a file descriptor (for .bin) or a zlib file pointer.  <a href="#a3d9545eb7bf658ee050828326040278c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a4b81bfaf82d10ec42e8d296544a0b3dc">zfname</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the underlining filename.  <a href="#a4b81bfaf82d10ec42e8d296544a0b3dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a01b67a362199a6b984e5759f7d84c168">zfisfits</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether it's fits file.  <a href="#a01b67a362199a6b984e5759f7d84c168"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a4ed840d37c980314e41e565e7dd617d3">zfclose</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the file.  <a href="#a4ed840d37c980314e41e565e7dd617d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a758ea8410a35084ddb90d9ab73f97d5f"></a><!-- doxytag: member="bin.c::zfwrite_do" ref="a758ea8410a35084ddb90d9ab73f97d5f" args="(const void *ptr, const size_t size, const size_t nmemb, file_t *fp)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>zfwrite_do</b> (const void *ptr, const size_t size, const size_t nmemb, file_t *fp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a67c349fe1033d91feb34b436dbb7e6b3">zfwrite</a> (const void *ptr, const size_t size, const size_t nmemb, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the file.  <a href="#a67c349fe1033d91feb34b436dbb7e6b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3d5456f854a2f40b2fceb27927dc99e"></a><!-- doxytag: member="bin.c::zfread_do" ref="af3d5456f854a2f40b2fceb27927dc99e" args="(void *ptr, const size_t size, const size_t nmemb, file_t *fp)" -->
static int&#160;</td><td class="memItemRight" valign="bottom"><b>zfread_do</b> (void *ptr, const size_t size, const size_t nmemb, file_t *fp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a092420d038c729b4dc5e9829b515fd94">zfread2</a> (void *ptr, const size_t size, const size_t nmemb, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from the file.  <a href="#a092420d038c729b4dc5e9829b515fd94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a6f90c7b343cad172afd005feb5112c30">zfread</a> (void *ptr, const size_t size, const size_t nmemb, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from the file.  <a href="#a6f90c7b343cad172afd005feb5112c30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a3d718e30cd4faabe0c6b902e3ede141c">zfseek</a> (file_t *fp, long offset, int whence)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the current position pointer, like fseek.  <a href="#a3d718e30cd4faabe0c6b902e3ede141c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a0fb14ee86ee80eac407abb5fe9b5e289">zfrewind</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the file position pointer to the beginning.  <a href="#a0fb14ee86ee80eac407abb5fe9b5e289"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a1d046d102635bba171fb6eaf42ff54fc">zfpos</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell position in file.  <a href="#a1d046d102635bba171fb6eaf42ff54fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#afb7723b26befc0c6f2a95a7e1a516201">zfeof</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell whether we end of file is reached.  <a href="#afb7723b26befc0c6f2a95a7e1a516201"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a956297097c436bc2e8eaf8789fa522ee">zflush</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the buffer.  <a href="#a956297097c436bc2e8eaf8789fa522ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a661981dba53025cce58eb981094679b7">zfwritelarr</a> (file_t *fp, int count,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write multiple long numbers into the file.  <a href="#a661981dba53025cce58eb981094679b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#af2343993fa331cbf30672791bdf90e7d">zfreadlarr</a> (file_t *fp, int count,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read multiple long numbers from the file.  <a href="#af2343993fa331cbf30672791bdf90e7d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a4e7e5b8bce8516e4521ee83e6523ad57">read_bin_magic</a> (file_t *fp, char **header)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the current magic number.  <a href="#a4e7e5b8bce8516e4521ee83e6523ad57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a8c9be74a07c1993bbb2af09ab95717f3">write_bin_magic</a> (uint32_t magic, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the magic into file.  <a href="#a8c9be74a07c1993bbb2af09ab95717f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a137b6fe8f33659e66e9952e7278d495f">write_bin_header</a> (const char *header, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Append the header to current position in the file.  <a href="#a137b6fe8f33659e66e9952e7278d495f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a930b3628a64d9f6fa488c8bd0f161e95">write_fits_header</a> (file_t *fp, const char *str, uint32_t magic, int count,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write fits header.  <a href="#a930b3628a64d9f6fa488c8bd0f161e95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a07ea5474fc7e2a0f1e9f4e0f952bfc93">read_fits_header</a> (file_t *fp, char **str, uint32_t *magic, uint64_t *nx, uint64_t *ny)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read fits header.  <a href="#a07ea5474fc7e2a0f1e9f4e0f952bfc93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#aeafd15c22e61f56f291b709b43ddb04e">write_header</a> (const <a class="el" href="structheader__t.html">header_t</a> *header, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A unified header writing routine for .bin and .fits files.  <a href="#aeafd15c22e61f56f291b709b43ddb04e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a972a1cdff7d5f045daa2ffe7fb43ecc0">read_header2</a> (<a class="el" href="structheader__t.html">header_t</a> *header, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A unified header reading routine for .bin and .fits files.  <a href="#a972a1cdff7d5f045daa2ffe7fb43ecc0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a5ed0da59c78ad3c8ada5c0ce67fa1c94">read_header</a> (<a class="el" href="structheader__t.html">header_t</a> *header, file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">calls read_header2 and abort if error happens.  <a href="#a5ed0da59c78ad3c8ada5c0ce67fa1c94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a343d68b2551eff30cf94bb976cafb0ff">bytes_header</a> (const char *header)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the length of string in header, rounded to multiple of 8.  <a href="#a343d68b2551eff30cf94bb976cafb0ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a1825ca342f947862c152e0408e923189">write_timestamp</a> (file_t *fp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the time stamp as header into current location in the file.  <a href="#a1825ca342f947862c152e0408e923189"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#adf3e8d275430f33c2cd8262fac88cac8">search_header</a> (const char *header, const char *key)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Search and return the value correspond to key.  <a href="#adf3e8d275430f33c2cd8262fac88cac8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#af916b0aa443255291534c8a9222dd585">search_header_num</a> (const char *header, const char *key)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a number from the header with key.  <a href="#af916b0aa443255291534c8a9222dd585"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#abefda2be23c35c49761c61084c86b936">search_header_num_valid</a> (const char *header, const char *key)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a number from the header and verify.  <a href="#abefda2be23c35c49761c61084c86b936"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a39d866e52a84b78885f8262f23e1e361">do_write</a> (const void *fpn, const int isfn, const size_t size, const uint32_t magic, const char *str, const void *p, const uint64_t nx, const uint64_t ny)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an 1-d or 2-d array into the file.  <a href="#a39d866e52a84b78885f8262f23e1e361"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a07e8fcd0256fd8377d0bb0d86bfd3c53">writedbl</a> (const double *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a double array of size nx*ny to file.  <a href="#a07e8fcd0256fd8377d0bb0d86bfd3c53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#ad50c5f6b6016874997a5be6105482229">writeflt</a> (const float *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a double array of size nx*ny to file.  <a href="#ad50c5f6b6016874997a5be6105482229"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a3b79cbb8bdc6e520ce66162fd80a01b3">writecmp</a> (const dcomplex *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a double complex array of size nx*ny to file.  <a href="#a3b79cbb8bdc6e520ce66162fd80a01b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a2945e4b7fdf9ea504ef1c13a092f8b9b">writefcmp</a> (const fcomplex *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a float complex array of size nx*ny to file.  <a href="#a2945e4b7fdf9ea504ef1c13a092f8b9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a6f306628b3df9abba320293f2108b4aa">writeint</a> (const int *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a int array of size nx*ny to file.  <a href="#a6f306628b3df9abba320293f2108b4aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#aee94d09fd8d7b41ed85dcf5bd6e493a2">writelong</a> (const long *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a long array of size nx*ny to file.  <a href="#aee94d09fd8d7b41ed85dcf5bd6e493a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a85fcc0ed2953b5e9d0812f92de86e5a3">writespint</a> (const spint *p, long nx, long ny, const char *format,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write spint array of size nx*ny to file.  <a href="#a85fcc0ed2953b5e9d0812f92de86e5a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4fdbbb160f78db3e75593887b597d51"></a><!-- doxytag: member="bin.c::readspintdata" ref="aa4fdbbb160f78db3e75593887b597d51" args="(file_t *fp, uint32_t magic, spint *out, long len)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>readspintdata</b> (file_t *fp, uint32_t magic, spint *out, long len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a17976d85cba2939873589c6a8bc3e08b">readspint</a> (file_t *fp, long *nx, long *ny)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read spint array of size nx*ny from file.  <a href="#a17976d85cba2939873589c6a8bc3e08b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a7052d4dbd36ff6e9108e022df369b0a2">mmap_unref</a> (struct mmap_t *in)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unreference the mmaped memory.  <a href="#a7052d4dbd36ff6e9108e022df369b0a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mmap_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a3a28a7321caa0513c0395c929ca49eae">mmap_new</a> (int fd, void *p, long n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a mmap_t object.  <a href="#a3a28a7321caa0513c0395c929ca49eae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">mmap_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bin_8c.html#a1ae41cea03912f667596c2fe5af3678d">mmap_ref</a> (mmap_t *in)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a reference to a mmap_t.  <a href="#a1ae41cea03912f667596c2fe5af3678d"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Defines our custom file format .bin or zipped .bin.gz and the basic IO functions. </p>
<p>All file read/write operators are through functions in this file. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3460abaa987907e837b1a0c7ff627034"></a><!-- doxytag: member="bin.c::procfn" ref="a3460abaa987907e837b1a0c7ff627034" args="(const char *fn, const char *mod, const int defaultgzip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="bin_8c.html#a3460abaa987907e837b1a0c7ff627034">procfn</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>defaultgzip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process the input file name and return file names that can be open to read/write. </p>
<p>If the file name does not end with .bin or .bin.gz it will add to the end .bin or .bin.gz depending on the value of defaultgzip. For read only access, it will also look into the path for files. </p>

</div>
</div>
<a class="anchor" id="a3d9545eb7bf658ee050828326040278c"></a><!-- doxytag: member="bin.c::zfopen" ref="a3d9545eb7bf658ee050828326040278c" args="(const char *fn, char *mod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_t* <a class="el" href="bin_8c.html#a3d9545eb7bf658ee050828326040278c">zfopen</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open the file and return a file_t struct that either contains a file descriptor (for .bin) or a zlib file pointer. </p>

</div>
</div>
<a class="anchor" id="a4b81bfaf82d10ec42e8d296544a0b3dc"></a><!-- doxytag: member="bin.c::zfname" ref="a4b81bfaf82d10ec42e8d296544a0b3dc" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="bin_8c.html#a4b81bfaf82d10ec42e8d296544a0b3dc">zfname</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the underlining filename. </p>

</div>
</div>
<a class="anchor" id="a01b67a362199a6b984e5759f7d84c168"></a><!-- doxytag: member="bin.c::zfisfits" ref="a01b67a362199a6b984e5759f7d84c168" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a01b67a362199a6b984e5759f7d84c168">zfisfits</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return whether it's fits file. </p>

</div>
</div>
<a class="anchor" id="a4ed840d37c980314e41e565e7dd617d3"></a><!-- doxytag: member="bin.c::zfclose" ref="a4ed840d37c980314e41e565e7dd617d3" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a4ed840d37c980314e41e565e7dd617d3">zfclose</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the file. </p>

</div>
</div>
<a class="anchor" id="a67c349fe1033d91feb34b436dbb7e6b3"></a><!-- doxytag: member="bin.c::zfwrite" ref="a67c349fe1033d91feb34b436dbb7e6b3" args="(const void *ptr, const size_t size, const size_t nmemb, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a67c349fe1033d91feb34b436dbb7e6b3">zfwrite</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to the file. </p>
<p>If in gzip mode, calls gzwrite, otherwise, calls fwrite. Follows the interface of fwrite. </p>

</div>
</div>
<a class="anchor" id="a092420d038c729b4dc5e9829b515fd94"></a><!-- doxytag: member="bin.c::zfread2" ref="a092420d038c729b4dc5e9829b515fd94" args="(void *ptr, const size_t size, const size_t nmemb, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a092420d038c729b4dc5e9829b515fd94">zfread2</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from the file. </p>
<p>if in gzip mode, calls gzread, otherwise calls fread. follows the interface of fread. It does byte ordering from big endian to small endian in case we are reading fits file. </p>

</div>
</div>
<a class="anchor" id="a6f90c7b343cad172afd005feb5112c30"></a><!-- doxytag: member="bin.c::zfread" ref="a6f90c7b343cad172afd005feb5112c30" args="(void *ptr, const size_t size, const size_t nmemb, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a6f90c7b343cad172afd005feb5112c30">zfread</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from the file. </p>
<p>if in gzip mode, calls gzread, otherwise calls fread. follows the interface of fread. </p>

</div>
</div>
<a class="anchor" id="a3d718e30cd4faabe0c6b902e3ede141c"></a><!-- doxytag: member="bin.c::zfseek" ref="a3d718e30cd4faabe0c6b902e3ede141c" args="(file_t *fp, long offset, int whence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a3d718e30cd4faabe0c6b902e3ede141c">zfseek</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move the current position pointer, like fseek. </p>

</div>
</div>
<a class="anchor" id="a0fb14ee86ee80eac407abb5fe9b5e289"></a><!-- doxytag: member="bin.c::zfrewind" ref="a0fb14ee86ee80eac407abb5fe9b5e289" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a0fb14ee86ee80eac407abb5fe9b5e289">zfrewind</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move the file position pointer to the beginning. </p>

</div>
</div>
<a class="anchor" id="a1d046d102635bba171fb6eaf42ff54fc"></a><!-- doxytag: member="bin.c::zfpos" ref="a1d046d102635bba171fb6eaf42ff54fc" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a1d046d102635bba171fb6eaf42ff54fc">zfpos</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tell position in file. </p>

</div>
</div>
<a class="anchor" id="afb7723b26befc0c6f2a95a7e1a516201"></a><!-- doxytag: member="bin.c::zfeof" ref="afb7723b26befc0c6f2a95a7e1a516201" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#afb7723b26befc0c6f2a95a7e1a516201">zfeof</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tell whether we end of file is reached. </p>

</div>
</div>
<a class="anchor" id="a956297097c436bc2e8eaf8789fa522ee"></a><!-- doxytag: member="bin.c::zflush" ref="a956297097c436bc2e8eaf8789fa522ee" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a956297097c436bc2e8eaf8789fa522ee">zflush</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush the buffer. </p>

</div>
</div>
<a class="anchor" id="a661981dba53025cce58eb981094679b7"></a><!-- doxytag: member="bin.c::zfwritelarr" ref="a661981dba53025cce58eb981094679b7" args="(file_t *fp, int count,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a661981dba53025cce58eb981094679b7">zfwritelarr</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write multiple long numbers into the file. </p>
<p>To write three numbers, a, b, c, call with zfwritelarr(fp, 3, &amp;a, &amp;b, &amp;c); </p>

</div>
</div>
<a class="anchor" id="af2343993fa331cbf30672791bdf90e7d"></a><!-- doxytag: member="bin.c::zfreadlarr" ref="af2343993fa331cbf30672791bdf90e7d" args="(file_t *fp, int count,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#af2343993fa331cbf30672791bdf90e7d">zfreadlarr</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read multiple long numbers from the file. </p>
<p>To read three numbers, a, b, c, call with zfreadlarr(fp, 3, &amp;a, &amp;b, &amp;c); </p>

</div>
</div>
<a class="anchor" id="a4e7e5b8bce8516e4521ee83e6523ad57"></a><!-- doxytag: member="bin.c::read_bin_magic" ref="a4e7e5b8bce8516e4521ee83e6523ad57" args="(file_t *fp, char **header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t <a class="el" href="bin_8c.html#a4e7e5b8bce8516e4521ee83e6523ad57">read_bin_magic</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtain the current magic number. </p>
<p>If it is a header, read it out if output of header is not NULL. The header will be appended to the output header.</p>
<p>In file, the header is located before the data magic. </p>

</div>
</div>
<a class="anchor" id="a8c9be74a07c1993bbb2af09ab95717f3"></a><!-- doxytag: member="bin.c::write_bin_magic" ref="a8c9be74a07c1993bbb2af09ab95717f3" args="(uint32_t magic, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="bin_8c.html#a8c9be74a07c1993bbb2af09ab95717f3">write_bin_magic</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write the magic into file. </p>
<p>Also write a dummy header to make data alignment to 8 bytes. </p>

</div>
</div>
<a class="anchor" id="a137b6fe8f33659e66e9952e7278d495f"></a><!-- doxytag: member="bin.c::write_bin_header" ref="a137b6fe8f33659e66e9952e7278d495f" args="(const char *header, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="bin_8c.html#a137b6fe8f33659e66e9952e7278d495f">write_bin_header</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Append the header to current position in the file. </p>
<p>First write magic number, then the length of the header, then the header, then the length of the header again, then the magic number again. The two set of strlen and header are used to identify the header from the end of the file and also to verify that what we are reading are indeed header. The header may be written multiple times. They will be concatenated when read. The header should contain key=value entries just like the configuration files. The entries should be separated by new line charactor. </p>

</div>
</div>
<a class="anchor" id="a930b3628a64d9f6fa488c8bd0f161e95"></a><!-- doxytag: member="bin.c::write_fits_header" ref="a930b3628a64d9f6fa488c8bd0f161e95" args="(file_t *fp, const char *str, uint32_t magic, int count,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="bin_8c.html#a930b3628a64d9f6fa488c8bd0f161e95">write_fits_header</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write fits header. </p>
<p>extra is extra header that will be put in fits comment </p>

</div>
</div>
<a class="anchor" id="a07ea5474fc7e2a0f1e9f4e0f952bfc93"></a><!-- doxytag: member="bin.c::read_fits_header" ref="a07ea5474fc7e2a0f1e9f4e0f952bfc93" args="(file_t *fp, char **str, uint32_t *magic, uint64_t *nx, uint64_t *ny)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a07ea5474fc7e2a0f1e9f4e0f952bfc93">read_fits_header</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>ny</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read fits header. </p>

</div>
</div>
<a class="anchor" id="aeafd15c22e61f56f291b709b43ddb04e"></a><!-- doxytag: member="bin.c::write_header" ref="aeafd15c22e61f56f291b709b43ddb04e" args="(const header_t *header, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#aeafd15c22e61f56f291b709b43ddb04e">write_header</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structheader__t.html">header_t</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A unified header writing routine for .bin and .fits files. </p>
<p>It write the array information and string header if any. </p>

</div>
</div>
<a class="anchor" id="a972a1cdff7d5f045daa2ffe7fb43ecc0"></a><!-- doxytag: member="bin.c::read_header2" ref="a972a1cdff7d5f045daa2ffe7fb43ecc0" args="(header_t *header, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="bin_8c.html#a972a1cdff7d5f045daa2ffe7fb43ecc0">read_header2</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheader__t.html">header_t</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A unified header reading routine for .bin and .fits files. </p>
<p>It read the array information and string header if any. Return error signal. </p>

</div>
</div>
<a class="anchor" id="a5ed0da59c78ad3c8ada5c0ce67fa1c94"></a><!-- doxytag: member="bin.c::read_header" ref="a5ed0da59c78ad3c8ada5c0ce67fa1c94" args="(header_t *header, file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a5ed0da59c78ad3c8ada5c0ce67fa1c94">read_header</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheader__t.html">header_t</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>calls read_header2 and abort if error happens. </p>

</div>
</div>
<a class="anchor" id="a343d68b2551eff30cf94bb976cafb0ff"></a><!-- doxytag: member="bin.c::bytes_header" ref="a343d68b2551eff30cf94bb976cafb0ff" args="(const char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="bin_8c.html#a343d68b2551eff30cf94bb976cafb0ff">bytes_header</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the length of string in header, rounded to multiple of 8. </p>

</div>
</div>
<a class="anchor" id="a1825ca342f947862c152e0408e923189"></a><!-- doxytag: member="bin.c::write_timestamp" ref="a1825ca342f947862c152e0408e923189" args="(file_t *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a1825ca342f947862c152e0408e923189">write_timestamp</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write the time stamp as header into current location in the file. </p>

</div>
</div>
<a class="anchor" id="adf3e8d275430f33c2cd8262fac88cac8"></a><!-- doxytag: member="bin.c::search_header" ref="adf3e8d275430f33c2cd8262fac88cac8" args="(const char *header, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="bin_8c.html#adf3e8d275430f33c2cd8262fac88cac8">search_header</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search and return the value correspond to key. </p>
<p>NULL if not found. Do not free the returned pointer. The key must be preceeded by space (isspace), and succeeded by = sign. </p>

</div>
</div>
<a class="anchor" id="af916b0aa443255291534c8a9222dd585"></a><!-- doxytag: member="bin.c::search_header_num" ref="af916b0aa443255291534c8a9222dd585" args="(const char *header, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="bin_8c.html#af916b0aa443255291534c8a9222dd585">search_header_num</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a number from the header with key. </p>

</div>
</div>
<a class="anchor" id="abefda2be23c35c49761c61084c86b936"></a><!-- doxytag: member="bin.c::search_header_num_valid" ref="abefda2be23c35c49761c61084c86b936" args="(const char *header, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="bin_8c.html#abefda2be23c35c49761c61084c86b936">search_header_num_valid</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a number from the header and verify. </p>

</div>
</div>
<a class="anchor" id="a39d866e52a84b78885f8262f23e1e361"></a><!-- doxytag: member="bin.c::do_write" ref="a39d866e52a84b78885f8262f23e1e361" args="(const void *fpn, const int isfn, const size_t size, const uint32_t magic, const char *str, const void *p, const uint64_t nx, const uint64_t ny)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a39d866e52a84b78885f8262f23e1e361">do_write</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>fpn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>isfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>ny</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write an 1-d or 2-d array into the file. </p>
<p>First write a magic number that represents the data type. Then write two numbers representing the dimension. Finally write the data itself. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fpn</td><td>The file pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isfn</td><td>Is this a filename or already opened file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of each element </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">magic</td><td>The magic number. see bin.h </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The header as string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>The data of the array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nx</td><td>Number of rows. this index changes fastest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ny</td><td>Number of columns. 1 for vector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a07e8fcd0256fd8377d0bb0d86bfd3c53"></a><!-- doxytag: member="bin.c::writedbl" ref="a07e8fcd0256fd8377d0bb0d86bfd3c53" args="(const double *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a07e8fcd0256fd8377d0bb0d86bfd3c53">writedbl</a> </td>
          <td>(</td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a double array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="ad50c5f6b6016874997a5be6105482229"></a><!-- doxytag: member="bin.c::writeflt" ref="ad50c5f6b6016874997a5be6105482229" args="(const float *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#ad50c5f6b6016874997a5be6105482229">writeflt</a> </td>
          <td>(</td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a double array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="a3b79cbb8bdc6e520ce66162fd80a01b3"></a><!-- doxytag: member="bin.c::writecmp" ref="a3b79cbb8bdc6e520ce66162fd80a01b3" args="(const dcomplex *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a3b79cbb8bdc6e520ce66162fd80a01b3">writecmp</a> </td>
          <td>(</td>
          <td class="paramtype">const dcomplex *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a double complex array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="a2945e4b7fdf9ea504ef1c13a092f8b9b"></a><!-- doxytag: member="bin.c::writefcmp" ref="a2945e4b7fdf9ea504ef1c13a092f8b9b" args="(const fcomplex *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a2945e4b7fdf9ea504ef1c13a092f8b9b">writefcmp</a> </td>
          <td>(</td>
          <td class="paramtype">const fcomplex *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a float complex array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="a6f306628b3df9abba320293f2108b4aa"></a><!-- doxytag: member="bin.c::writeint" ref="a6f306628b3df9abba320293f2108b4aa" args="(const int *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a6f306628b3df9abba320293f2108b4aa">writeint</a> </td>
          <td>(</td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a int array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="aee94d09fd8d7b41ed85dcf5bd6e493a2"></a><!-- doxytag: member="bin.c::writelong" ref="aee94d09fd8d7b41ed85dcf5bd6e493a2" args="(const long *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#aee94d09fd8d7b41ed85dcf5bd6e493a2">writelong</a> </td>
          <td>(</td>
          <td class="paramtype">const long *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a long array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="a85fcc0ed2953b5e9d0812f92de86e5a3"></a><!-- doxytag: member="bin.c::writespint" ref="a85fcc0ed2953b5e9d0812f92de86e5a3" args="(const spint *p, long nx, long ny, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a85fcc0ed2953b5e9d0812f92de86e5a3">writespint</a> </td>
          <td>(</td>
          <td class="paramtype">const spint *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write spint array of size nx*ny to file. </p>

</div>
</div>
<a class="anchor" id="a17976d85cba2939873589c6a8bc3e08b"></a><!-- doxytag: member="bin.c::readspint" ref="a17976d85cba2939873589c6a8bc3e08b" args="(file_t *fp, long *nx, long *ny)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spint* <a class="el" href="bin_8c.html#a17976d85cba2939873589c6a8bc3e08b">readspint</a> </td>
          <td>(</td>
          <td class="paramtype">file_t *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>ny</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read spint array of size nx*ny from file. </p>
<p>Optionally convert from other formats. </p>

</div>
</div>
<a class="anchor" id="a7052d4dbd36ff6e9108e022df369b0a2"></a><!-- doxytag: member="bin.c::mmap_unref" ref="a7052d4dbd36ff6e9108e022df369b0a2" args="(struct mmap_t *in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="bin_8c.html#a7052d4dbd36ff6e9108e022df369b0a2">mmap_unref</a> </td>
          <td>(</td>
          <td class="paramtype">struct mmap_t *&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unreference the mmaped memory. </p>
<p>When the reference drops to zero, unmap it. </p>

</div>
</div>
<a class="anchor" id="a3a28a7321caa0513c0395c929ca49eae"></a><!-- doxytag: member="bin.c::mmap_new" ref="a3a28a7321caa0513c0395c929ca49eae" args="(int fd, void *p, long n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mmap_t* <a class="el" href="bin_8c.html#a3a28a7321caa0513c0395c929ca49eae">mmap_new</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a mmap_t object. </p>

</div>
</div>
<a class="anchor" id="a1ae41cea03912f667596c2fe5af3678d"></a><!-- doxytag: member="bin.c::mmap_ref" ref="a1ae41cea03912f667596c2fe5af3678d" args="(mmap_t *in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mmap_t* <a class="el" href="bin_8c.html#a1ae41cea03912f667596c2fe5af3678d">mmap_ref</a> </td>
          <td>(</td>
          <td class="paramtype">mmap_t *&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a reference to a mmap_t. </p>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bin_8c.html">bin.c</a>      </li>

    <li class="footer">Generated on Tue Aug 14 2012 09:47:57 for maos-1.2.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
